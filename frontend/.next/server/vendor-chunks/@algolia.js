/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@algolia";
exports.ids = ["vendor-chunks/@algolia"];
exports.modules = {

/***/ "(ssr)/./node_modules/@algolia/cache-common/dist/cache-common.esm.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@algolia/cache-common/dist/cache-common.esm.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createFallbackableCache: () => (/* binding */ createFallbackableCache),\n/* harmony export */   createNullCache: () => (/* binding */ createNullCache)\n/* harmony export */ });\n// @todo Add logger on options to debug when caches go wrong.\r\nfunction createFallbackableCache(options) {\r\n    const caches = [...options.caches];\r\n    const current = caches.shift(); // eslint-disable-line functional/immutable-data\r\n    if (current === undefined) {\r\n        return createNullCache();\r\n    }\r\n    return {\r\n        get(key, defaultValue, events = {\r\n            miss: () => Promise.resolve(),\r\n        }) {\r\n            return current.get(key, defaultValue, events).catch(() => {\r\n                return createFallbackableCache({ caches }).get(key, defaultValue, events);\r\n            });\r\n        },\r\n        set(key, value) {\r\n            return current.set(key, value).catch(() => {\r\n                return createFallbackableCache({ caches }).set(key, value);\r\n            });\r\n        },\r\n        delete(key) {\r\n            return current.delete(key).catch(() => {\r\n                return createFallbackableCache({ caches }).delete(key);\r\n            });\r\n        },\r\n        clear() {\r\n            return current.clear().catch(() => {\r\n                return createFallbackableCache({ caches }).clear();\r\n            });\r\n        },\r\n    };\r\n}\n\nfunction createNullCache() {\r\n    return {\r\n        get(_key, defaultValue, events = {\r\n            miss: () => Promise.resolve(),\r\n        }) {\r\n            const value = defaultValue();\r\n            return value\r\n                .then(result => Promise.all([result, events.miss(result)]))\r\n                .then(([result]) => result);\r\n        },\r\n        set(_key, value) {\r\n            return Promise.resolve(value);\r\n        },\r\n        delete(_key) {\r\n            return Promise.resolve();\r\n        },\r\n        clear() {\r\n            return Promise.resolve();\r\n        },\r\n    };\r\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvY2FjaGUtY29tbW9uL2Rpc3QvY2FjaGUtY29tbW9uLmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxpREFBaUQsUUFBUTtBQUN6RCxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxpREFBaUQsUUFBUTtBQUN6RCxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxpREFBaUQsUUFBUTtBQUN6RCxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxpREFBaUQsUUFBUTtBQUN6RCxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFb0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcGVjLWxvZ2ljLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0BhbGdvbGlhL2NhY2hlLWNvbW1vbi9kaXN0L2NhY2hlLWNvbW1vbi5lc20uanM/YzM0MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdG9kbyBBZGQgbG9nZ2VyIG9uIG9wdGlvbnMgdG8gZGVidWcgd2hlbiBjYWNoZXMgZ28gd3JvbmcuXHJcbmZ1bmN0aW9uIGNyZWF0ZUZhbGxiYWNrYWJsZUNhY2hlKG9wdGlvbnMpIHtcclxuICAgIGNvbnN0IGNhY2hlcyA9IFsuLi5vcHRpb25zLmNhY2hlc107XHJcbiAgICBjb25zdCBjdXJyZW50ID0gY2FjaGVzLnNoaWZ0KCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgaWYgKGN1cnJlbnQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVOdWxsQ2FjaGUoKTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0KGtleSwgZGVmYXVsdFZhbHVlLCBldmVudHMgPSB7XHJcbiAgICAgICAgICAgIG1pc3M6ICgpID0+IFByb21pc2UucmVzb2x2ZSgpLFxyXG4gICAgICAgIH0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQuZ2V0KGtleSwgZGVmYXVsdFZhbHVlLCBldmVudHMpLmNhdGNoKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVGYWxsYmFja2FibGVDYWNoZSh7IGNhY2hlcyB9KS5nZXQoa2V5LCBkZWZhdWx0VmFsdWUsIGV2ZW50cyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0KGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQuc2V0KGtleSwgdmFsdWUpLmNhdGNoKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVGYWxsYmFja2FibGVDYWNoZSh7IGNhY2hlcyB9KS5zZXQoa2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVsZXRlKGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY3VycmVudC5kZWxldGUoa2V5KS5jYXRjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlRmFsbGJhY2thYmxlQ2FjaGUoeyBjYWNoZXMgfSkuZGVsZXRlKGtleSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2xlYXIoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50LmNsZWFyKCkuY2F0Y2goKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUZhbGxiYWNrYWJsZUNhY2hlKHsgY2FjaGVzIH0pLmNsZWFyKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU51bGxDYWNoZSgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0KF9rZXksIGRlZmF1bHRWYWx1ZSwgZXZlbnRzID0ge1xyXG4gICAgICAgICAgICBtaXNzOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoKSxcclxuICAgICAgICB9KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZGVmYXVsdFZhbHVlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IFByb21pc2UuYWxsKFtyZXN1bHQsIGV2ZW50cy5taXNzKHJlc3VsdCldKSlcclxuICAgICAgICAgICAgICAgIC50aGVuKChbcmVzdWx0XSkgPT4gcmVzdWx0KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldChfa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRlbGV0ZShfa2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNsZWFyKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbn1cblxuZXhwb3J0IHsgY3JlYXRlRmFsbGJhY2thYmxlQ2FjaGUsIGNyZWF0ZU51bGxDYWNoZSB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/cache-common/dist/cache-common.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/cache-in-memory/dist/cache-in-memory.esm.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@algolia/cache-in-memory/dist/cache-in-memory.esm.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createInMemoryCache: () => (/* binding */ createInMemoryCache)\n/* harmony export */ });\nfunction createInMemoryCache(options = { serializable: true }) {\r\n    // eslint-disable-next-line functional/no-let\r\n    let cache = {};\r\n    return {\r\n        get(key, defaultValue, events = {\r\n            miss: () => Promise.resolve(),\r\n        }) {\r\n            const keyAsString = JSON.stringify(key);\r\n            if (keyAsString in cache) {\r\n                return Promise.resolve(options.serializable ? JSON.parse(cache[keyAsString]) : cache[keyAsString]);\r\n            }\r\n            const promise = defaultValue();\r\n            const miss = (events && events.miss) || (() => Promise.resolve());\r\n            return promise.then((value) => miss(value)).then(() => promise);\r\n        },\r\n        set(key, value) {\r\n            // eslint-disable-next-line functional/immutable-data\r\n            cache[JSON.stringify(key)] = options.serializable ? JSON.stringify(value) : value;\r\n            return Promise.resolve(value);\r\n        },\r\n        delete(key) {\r\n            // eslint-disable-next-line functional/immutable-data\r\n            delete cache[JSON.stringify(key)];\r\n            return Promise.resolve();\r\n        },\r\n        clear() {\r\n            cache = {};\r\n            return Promise.resolve();\r\n        },\r\n    };\r\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvY2FjaGUtaW4tbWVtb3J5L2Rpc3QvY2FjaGUtaW4tbWVtb3J5LmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEseUNBQXlDLG9CQUFvQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUUrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3NwZWMtbG9naWMtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvY2FjaGUtaW4tbWVtb3J5L2Rpc3QvY2FjaGUtaW4tbWVtb3J5LmVzbS5qcz9hMzEwIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGNyZWF0ZUluTWVtb3J5Q2FjaGUob3B0aW9ucyA9IHsgc2VyaWFsaXphYmxlOiB0cnVlIH0pIHtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL25vLWxldFxyXG4gICAgbGV0IGNhY2hlID0ge307XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGdldChrZXksIGRlZmF1bHRWYWx1ZSwgZXZlbnRzID0ge1xyXG4gICAgICAgICAgICBtaXNzOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoKSxcclxuICAgICAgICB9KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGtleUFzU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoa2V5KTtcclxuICAgICAgICAgICAgaWYgKGtleUFzU3RyaW5nIGluIGNhY2hlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG9wdGlvbnMuc2VyaWFsaXphYmxlID8gSlNPTi5wYXJzZShjYWNoZVtrZXlBc1N0cmluZ10pIDogY2FjaGVba2V5QXNTdHJpbmddKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBwcm9taXNlID0gZGVmYXVsdFZhbHVlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1pc3MgPSAoZXZlbnRzICYmIGV2ZW50cy5taXNzKSB8fCAoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZS50aGVuKCh2YWx1ZSkgPT4gbWlzcyh2YWx1ZSkpLnRoZW4oKCkgPT4gcHJvbWlzZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgICAgICBjYWNoZVtKU09OLnN0cmluZ2lmeShrZXkpXSA9IG9wdGlvbnMuc2VyaWFsaXphYmxlID8gSlNPTi5zdHJpbmdpZnkodmFsdWUpIDogdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVsZXRlKGtleSkge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgICAgICBkZWxldGUgY2FjaGVbSlNPTi5zdHJpbmdpZnkoa2V5KV07XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNsZWFyKCkge1xyXG4gICAgICAgICAgICBjYWNoZSA9IHt9O1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbn1cblxuZXhwb3J0IHsgY3JlYXRlSW5NZW1vcnlDYWNoZSB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/cache-in-memory/dist/cache-in-memory.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/client-analytics/dist/client-analytics.esm.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@algolia/client-analytics/dist/client-analytics.esm.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addABTest: () => (/* binding */ addABTest),\n/* harmony export */   createAnalyticsClient: () => (/* binding */ createAnalyticsClient),\n/* harmony export */   deleteABTest: () => (/* binding */ deleteABTest),\n/* harmony export */   getABTest: () => (/* binding */ getABTest),\n/* harmony export */   getABTests: () => (/* binding */ getABTests),\n/* harmony export */   stopABTest: () => (/* binding */ stopABTest)\n/* harmony export */ });\n/* harmony import */ var _algolia_client_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @algolia/client-common */ \"(ssr)/./node_modules/@algolia/client-common/dist/client-common.esm.js\");\n/* harmony import */ var _algolia_transporter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @algolia/transporter */ \"(ssr)/./node_modules/@algolia/transporter/dist/transporter.esm.js\");\n/* harmony import */ var _algolia_requester_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @algolia/requester-common */ \"(ssr)/./node_modules/@algolia/requester-common/dist/requester-common.esm.js\");\n\n\n\n\nconst createAnalyticsClient = options => {\r\n    const region = options.region || 'us';\r\n    const auth = (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_0__.createAuth)(_algolia_client_common__WEBPACK_IMPORTED_MODULE_0__.AuthMode.WithinHeaders, options.appId, options.apiKey);\r\n    const transporter = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_1__.createTransporter)({\r\n        hosts: [{ url: `analytics.${region}.algolia.com` }],\r\n        ...options,\r\n        headers: {\r\n            ...auth.headers(),\r\n            ...{ 'content-type': 'application/json' },\r\n            ...options.headers,\r\n        },\r\n        queryParameters: {\r\n            ...auth.queryParameters(),\r\n            ...options.queryParameters,\r\n        },\r\n    });\r\n    const appId = options.appId;\r\n    return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_0__.addMethods)({ appId, transporter }, options.methods);\r\n};\n\nconst addABTest = (base) => {\r\n    return (abTest, requestOptions) => {\r\n        return base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_2__.MethodEnum.Post,\r\n            path: '2/abtests',\r\n            data: abTest,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst deleteABTest = (base) => {\r\n    return (abTestID, requestOptions) => {\r\n        return base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_2__.MethodEnum.Delete,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_0__.encode)('2/abtests/%s', abTestID),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getABTest = (base) => {\r\n    return (abTestID, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_2__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_0__.encode)('2/abtests/%s', abTestID),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getABTests = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_2__.MethodEnum.Get,\r\n            path: '2/abtests',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst stopABTest = (base) => {\r\n    return (abTestID, requestOptions) => {\r\n        return base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_2__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_0__.encode)('2/abtests/%s/stop', abTestID),\r\n        }, requestOptions);\r\n    };\r\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvY2xpZW50LWFuYWx5dGljcy9kaXN0L2NsaWVudC1hbmFseXRpY3MuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFrRjtBQUN6QjtBQUNGOztBQUV2RDtBQUNBO0FBQ0EsaUJBQWlCLGtFQUFVLENBQUMsNERBQVE7QUFDcEMsd0JBQXdCLHVFQUFpQjtBQUN6QyxrQkFBa0Isa0JBQWtCLE9BQU8sZUFBZTtBQUMxRDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsb0NBQW9DO0FBQ3JEO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQSxXQUFXLGtFQUFVLEdBQUcsb0JBQW9CO0FBQzVDOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBVTtBQUM5QjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlFQUFVO0FBQzlCLGtCQUFrQiw4REFBTTtBQUN4QixTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUVBQVU7QUFDOUIsa0JBQWtCLDhEQUFNO0FBQ3hCLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBVTtBQUM5QjtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBVTtBQUM5QixrQkFBa0IsOERBQU07QUFDeEIsU0FBUztBQUNUO0FBQ0E7O0FBRTZGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3BlYy1sb2dpYy1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AYWxnb2xpYS9jbGllbnQtYW5hbHl0aWNzL2Rpc3QvY2xpZW50LWFuYWx5dGljcy5lc20uanM/NjBhNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVBdXRoLCBBdXRoTW9kZSwgYWRkTWV0aG9kcywgZW5jb2RlIH0gZnJvbSAnQGFsZ29saWEvY2xpZW50LWNvbW1vbic7XG5pbXBvcnQgeyBjcmVhdGVUcmFuc3BvcnRlciB9IGZyb20gJ0BhbGdvbGlhL3RyYW5zcG9ydGVyJztcbmltcG9ydCB7IE1ldGhvZEVudW0gfSBmcm9tICdAYWxnb2xpYS9yZXF1ZXN0ZXItY29tbW9uJztcblxuY29uc3QgY3JlYXRlQW5hbHl0aWNzQ2xpZW50ID0gb3B0aW9ucyA9PiB7XHJcbiAgICBjb25zdCByZWdpb24gPSBvcHRpb25zLnJlZ2lvbiB8fCAndXMnO1xyXG4gICAgY29uc3QgYXV0aCA9IGNyZWF0ZUF1dGgoQXV0aE1vZGUuV2l0aGluSGVhZGVycywgb3B0aW9ucy5hcHBJZCwgb3B0aW9ucy5hcGlLZXkpO1xyXG4gICAgY29uc3QgdHJhbnNwb3J0ZXIgPSBjcmVhdGVUcmFuc3BvcnRlcih7XHJcbiAgICAgICAgaG9zdHM6IFt7IHVybDogYGFuYWx5dGljcy4ke3JlZ2lvbn0uYWxnb2xpYS5jb21gIH1dLFxyXG4gICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAuLi5hdXRoLmhlYWRlcnMoKSxcclxuICAgICAgICAgICAgLi4ueyAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuaGVhZGVycyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHF1ZXJ5UGFyYW1ldGVyczoge1xyXG4gICAgICAgICAgICAuLi5hdXRoLnF1ZXJ5UGFyYW1ldGVycygpLFxyXG4gICAgICAgICAgICAuLi5vcHRpb25zLnF1ZXJ5UGFyYW1ldGVycyxcclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBhcHBJZCA9IG9wdGlvbnMuYXBwSWQ7XHJcbiAgICByZXR1cm4gYWRkTWV0aG9kcyh7IGFwcElkLCB0cmFuc3BvcnRlciB9LCBvcHRpb25zLm1ldGhvZHMpO1xyXG59O1xuXG5jb25zdCBhZGRBQlRlc3QgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChhYlRlc3QsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogJzIvYWJ0ZXN0cycsXHJcbiAgICAgICAgICAgIGRhdGE6IGFiVGVzdCxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBkZWxldGVBQlRlc3QgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChhYlRlc3RJRCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5EZWxldGUsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMi9hYnRlc3RzLyVzJywgYWJUZXN0SUQpLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGdldEFCVGVzdCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKGFiVGVzdElELCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzIvYWJ0ZXN0cy8lcycsIGFiVGVzdElEKSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXRBQlRlc3RzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLkdldCxcclxuICAgICAgICAgICAgcGF0aDogJzIvYWJ0ZXN0cycsXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3Qgc3RvcEFCVGVzdCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKGFiVGVzdElELCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMi9hYnRlc3RzLyVzL3N0b3AnLCBhYlRlc3RJRCksXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuZXhwb3J0IHsgYWRkQUJUZXN0LCBjcmVhdGVBbmFseXRpY3NDbGllbnQsIGRlbGV0ZUFCVGVzdCwgZ2V0QUJUZXN0LCBnZXRBQlRlc3RzLCBzdG9wQUJUZXN0IH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/client-analytics/dist/client-analytics.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/client-common/dist/client-common.esm.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@algolia/client-common/dist/client-common.esm.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthMode: () => (/* binding */ AuthMode),\n/* harmony export */   addMethods: () => (/* binding */ addMethods),\n/* harmony export */   createAuth: () => (/* binding */ createAuth),\n/* harmony export */   createRetryablePromise: () => (/* binding */ createRetryablePromise),\n/* harmony export */   createWaitablePromise: () => (/* binding */ createWaitablePromise),\n/* harmony export */   destroy: () => (/* binding */ destroy),\n/* harmony export */   encode: () => (/* binding */ encode),\n/* harmony export */   shuffle: () => (/* binding */ shuffle),\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\nfunction createAuth(authMode, appId, apiKey) {\r\n    const credentials = {\r\n        'x-algolia-api-key': apiKey,\r\n        'x-algolia-application-id': appId,\r\n    };\r\n    return {\r\n        headers() {\r\n            return authMode === AuthMode.WithinHeaders ? credentials : {};\r\n        },\r\n        queryParameters() {\r\n            return authMode === AuthMode.WithinQueryParameters ? credentials : {};\r\n        },\r\n    };\r\n}\n\nfunction createRetryablePromise(callback) {\r\n    let retriesCount = 0; // eslint-disable-line functional/no-let\r\n    const retry = () => {\r\n        retriesCount++;\r\n        return new Promise((resolve) => {\r\n            setTimeout(() => {\r\n                resolve(callback(retry));\r\n            }, Math.min(100 * retriesCount, 1000));\r\n        });\r\n    };\r\n    return callback(retry);\r\n}\n\nfunction createWaitablePromise(promise, wait = (_response, _requestOptions) => {\r\n    return Promise.resolve();\r\n}) {\r\n    // eslint-disable-next-line functional/immutable-data\r\n    return Object.assign(promise, {\r\n        wait(requestOptions) {\r\n            return createWaitablePromise(promise\r\n                .then(response => Promise.all([wait(response, requestOptions), response]))\r\n                .then(promiseResults => promiseResults[1]));\r\n        },\r\n    });\r\n}\n\n// eslint-disable-next-line functional/prefer-readonly-type\r\nfunction shuffle(array) {\r\n    let c = array.length - 1; // eslint-disable-line functional/no-let\r\n    // eslint-disable-next-line functional/no-loop-statement\r\n    for (c; c > 0; c--) {\r\n        const b = Math.floor(Math.random() * (c + 1));\r\n        const a = array[c];\r\n        array[c] = array[b]; // eslint-disable-line functional/immutable-data, no-param-reassign\r\n        array[b] = a; // eslint-disable-line functional/immutable-data, no-param-reassign\r\n    }\r\n    return array;\r\n}\r\nfunction addMethods(base, methods) {\r\n    if (!methods) {\r\n        return base;\r\n    }\r\n    Object.keys(methods).forEach(key => {\r\n        // eslint-disable-next-line functional/immutable-data, no-param-reassign\r\n        base[key] = methods[key](base);\r\n    });\r\n    return base;\r\n}\r\nfunction encode(format, ...args) {\r\n    // eslint-disable-next-line functional/no-let\r\n    let i = 0;\r\n    return format.replace(/%s/g, () => encodeURIComponent(args[i++]));\r\n}\n\nconst version = '4.25.3';\n\nconst destroy = (base) => {\r\n    return () => {\r\n        return base.transporter.requester.destroy();\r\n    };\r\n};\n\nconst AuthMode = {\r\n    /**\r\n     * If auth credentials should be in query parameters.\r\n     */\r\n    WithinQueryParameters: 0,\r\n    /**\r\n     * If auth credentials should be in headers.\r\n     */\r\n    WithinHeaders: 1,\r\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvY2xpZW50LWNvbW1vbi9kaXN0L2NsaWVudC1jb21tb24uZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUU4SCIsInNvdXJjZXMiOlsid2VicGFjazovL3NwZWMtbG9naWMtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvY2xpZW50LWNvbW1vbi9kaXN0L2NsaWVudC1jb21tb24uZXNtLmpzPzExNDciXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gY3JlYXRlQXV0aChhdXRoTW9kZSwgYXBwSWQsIGFwaUtleSkge1xyXG4gICAgY29uc3QgY3JlZGVudGlhbHMgPSB7XHJcbiAgICAgICAgJ3gtYWxnb2xpYS1hcGkta2V5JzogYXBpS2V5LFxyXG4gICAgICAgICd4LWFsZ29saWEtYXBwbGljYXRpb24taWQnOiBhcHBJZCxcclxuICAgIH07XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYWRlcnMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdXRoTW9kZSA9PT0gQXV0aE1vZGUuV2l0aGluSGVhZGVycyA/IGNyZWRlbnRpYWxzIDoge307XHJcbiAgICAgICAgfSxcclxuICAgICAgICBxdWVyeVBhcmFtZXRlcnMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdXRoTW9kZSA9PT0gQXV0aE1vZGUuV2l0aGluUXVlcnlQYXJhbWV0ZXJzID8gY3JlZGVudGlhbHMgOiB7fTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxufVxuXG5mdW5jdGlvbiBjcmVhdGVSZXRyeWFibGVQcm9taXNlKGNhbGxiYWNrKSB7XHJcbiAgICBsZXQgcmV0cmllc0NvdW50ID0gMDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBmdW5jdGlvbmFsL25vLWxldFxyXG4gICAgY29uc3QgcmV0cnkgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0cmllc0NvdW50Kys7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShjYWxsYmFjayhyZXRyeSkpO1xyXG4gICAgICAgICAgICB9LCBNYXRoLm1pbigxMDAgKiByZXRyaWVzQ291bnQsIDEwMDApKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gY2FsbGJhY2socmV0cnkpO1xyXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShwcm9taXNlLCB3YWl0ID0gKF9yZXNwb25zZSwgX3JlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbn0pIHtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihwcm9taXNlLCB7XHJcbiAgICAgICAgd2FpdChyZXF1ZXN0T3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKHByb21pc2VcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IFByb21pc2UuYWxsKFt3YWl0KHJlc3BvbnNlLCByZXF1ZXN0T3B0aW9ucyksIHJlc3BvbnNlXSkpXHJcbiAgICAgICAgICAgICAgICAudGhlbihwcm9taXNlUmVzdWx0cyA9PiBwcm9taXNlUmVzdWx0c1sxXSkpO1xyXG4gICAgICAgIH0sXHJcbiAgICB9KTtcclxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9wcmVmZXItcmVhZG9ubHktdHlwZVxyXG5mdW5jdGlvbiBzaHVmZmxlKGFycmF5KSB7XHJcbiAgICBsZXQgYyA9IGFycmF5Lmxlbmd0aCAtIDE7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9uby1sZXRcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL25vLWxvb3Atc3RhdGVtZW50XHJcbiAgICBmb3IgKGM7IGMgPiAwOyBjLS0pIHtcclxuICAgICAgICBjb25zdCBiID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGMgKyAxKSk7XHJcbiAgICAgICAgY29uc3QgYSA9IGFycmF5W2NdO1xyXG4gICAgICAgIGFycmF5W2NdID0gYXJyYXlbYl07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YSwgbm8tcGFyYW0tcmVhc3NpZ25cclxuICAgICAgICBhcnJheVtiXSA9IGE7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YSwgbm8tcGFyYW0tcmVhc3NpZ25cclxuICAgIH1cclxuICAgIHJldHVybiBhcnJheTtcclxufVxyXG5mdW5jdGlvbiBhZGRNZXRob2RzKGJhc2UsIG1ldGhvZHMpIHtcclxuICAgIGlmICghbWV0aG9kcykge1xyXG4gICAgICAgIHJldHVybiBiYXNlO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmtleXMobWV0aG9kcykuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhLCBuby1wYXJhbS1yZWFzc2lnblxyXG4gICAgICAgIGJhc2Vba2V5XSA9IG1ldGhvZHNba2V5XShiYXNlKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGJhc2U7XHJcbn1cclxuZnVuY3Rpb24gZW5jb2RlKGZvcm1hdCwgLi4uYXJncykge1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvbm8tbGV0XHJcbiAgICBsZXQgaSA9IDA7XHJcbiAgICByZXR1cm4gZm9ybWF0LnJlcGxhY2UoLyVzL2csICgpID0+IGVuY29kZVVSSUNvbXBvbmVudChhcmdzW2krK10pKTtcclxufVxuXG5jb25zdCB2ZXJzaW9uID0gJzQuMjUuMyc7XG5cbmNvbnN0IGRlc3Ryb3kgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZXF1ZXN0ZXIuZGVzdHJveSgpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgQXV0aE1vZGUgPSB7XHJcbiAgICAvKipcclxuICAgICAqIElmIGF1dGggY3JlZGVudGlhbHMgc2hvdWxkIGJlIGluIHF1ZXJ5IHBhcmFtZXRlcnMuXHJcbiAgICAgKi9cclxuICAgIFdpdGhpblF1ZXJ5UGFyYW1ldGVyczogMCxcclxuICAgIC8qKlxyXG4gICAgICogSWYgYXV0aCBjcmVkZW50aWFscyBzaG91bGQgYmUgaW4gaGVhZGVycy5cclxuICAgICAqL1xyXG4gICAgV2l0aGluSGVhZGVyczogMSxcclxufTtcblxuZXhwb3J0IHsgQXV0aE1vZGUsIGFkZE1ldGhvZHMsIGNyZWF0ZUF1dGgsIGNyZWF0ZVJldHJ5YWJsZVByb21pc2UsIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZSwgZGVzdHJveSwgZW5jb2RlLCBzaHVmZmxlLCB2ZXJzaW9uIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/client-common/dist/client-common.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/client-personalization/dist/client-personalization.esm.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@algolia/client-personalization/dist/client-personalization.esm.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPersonalizationClient: () => (/* binding */ createPersonalizationClient),\n/* harmony export */   getPersonalizationStrategy: () => (/* binding */ getPersonalizationStrategy),\n/* harmony export */   setPersonalizationStrategy: () => (/* binding */ setPersonalizationStrategy)\n/* harmony export */ });\n/* harmony import */ var _algolia_client_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @algolia/client-common */ \"(ssr)/./node_modules/@algolia/client-common/dist/client-common.esm.js\");\n/* harmony import */ var _algolia_transporter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @algolia/transporter */ \"(ssr)/./node_modules/@algolia/transporter/dist/transporter.esm.js\");\n/* harmony import */ var _algolia_requester_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @algolia/requester-common */ \"(ssr)/./node_modules/@algolia/requester-common/dist/requester-common.esm.js\");\n\n\n\n\nconst createPersonalizationClient = options => {\r\n    const region = options.region || 'us';\r\n    const auth = (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_0__.createAuth)(_algolia_client_common__WEBPACK_IMPORTED_MODULE_0__.AuthMode.WithinHeaders, options.appId, options.apiKey);\r\n    const transporter = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_1__.createTransporter)({\r\n        hosts: [{ url: `personalization.${region}.algolia.com` }],\r\n        ...options,\r\n        headers: {\r\n            ...auth.headers(),\r\n            ...{ 'content-type': 'application/json' },\r\n            ...options.headers,\r\n        },\r\n        queryParameters: {\r\n            ...auth.queryParameters(),\r\n            ...options.queryParameters,\r\n        },\r\n    });\r\n    return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_0__.addMethods)({ appId: options.appId, transporter }, options.methods);\r\n};\n\nconst getPersonalizationStrategy = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_2__.MethodEnum.Get,\r\n            path: '1/strategies/personalization',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst setPersonalizationStrategy = (base) => {\r\n    return (personalizationStrategy, requestOptions) => {\r\n        return base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_2__.MethodEnum.Post,\r\n            path: '1/strategies/personalization',\r\n            data: personalizationStrategy,\r\n        }, requestOptions);\r\n    };\r\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvY2xpZW50LXBlcnNvbmFsaXphdGlvbi9kaXN0L2NsaWVudC1wZXJzb25hbGl6YXRpb24uZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUEwRTtBQUNqQjtBQUNGOztBQUV2RDtBQUNBO0FBQ0EsaUJBQWlCLGtFQUFVLENBQUMsNERBQVE7QUFDcEMsd0JBQXdCLHVFQUFpQjtBQUN6QyxrQkFBa0Isd0JBQXdCLE9BQU8sZUFBZTtBQUNoRTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsb0NBQW9DO0FBQ3JEO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0wsV0FBVyxrRUFBVSxHQUFHLG1DQUFtQztBQUMzRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUVBQVU7QUFDOUI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUVBQVU7QUFDOUI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUUrRiIsInNvdXJjZXMiOlsid2VicGFjazovL3NwZWMtbG9naWMtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvY2xpZW50LXBlcnNvbmFsaXphdGlvbi9kaXN0L2NsaWVudC1wZXJzb25hbGl6YXRpb24uZXNtLmpzPzBhMWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQXV0aCwgQXV0aE1vZGUsIGFkZE1ldGhvZHMgfSBmcm9tICdAYWxnb2xpYS9jbGllbnQtY29tbW9uJztcbmltcG9ydCB7IGNyZWF0ZVRyYW5zcG9ydGVyIH0gZnJvbSAnQGFsZ29saWEvdHJhbnNwb3J0ZXInO1xuaW1wb3J0IHsgTWV0aG9kRW51bSB9IGZyb20gJ0BhbGdvbGlhL3JlcXVlc3Rlci1jb21tb24nO1xuXG5jb25zdCBjcmVhdGVQZXJzb25hbGl6YXRpb25DbGllbnQgPSBvcHRpb25zID0+IHtcclxuICAgIGNvbnN0IHJlZ2lvbiA9IG9wdGlvbnMucmVnaW9uIHx8ICd1cyc7XHJcbiAgICBjb25zdCBhdXRoID0gY3JlYXRlQXV0aChBdXRoTW9kZS5XaXRoaW5IZWFkZXJzLCBvcHRpb25zLmFwcElkLCBvcHRpb25zLmFwaUtleSk7XHJcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IGNyZWF0ZVRyYW5zcG9ydGVyKHtcclxuICAgICAgICBob3N0czogW3sgdXJsOiBgcGVyc29uYWxpemF0aW9uLiR7cmVnaW9ufS5hbGdvbGlhLmNvbWAgfV0sXHJcbiAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgIC4uLmF1dGguaGVhZGVycygpLFxyXG4gICAgICAgICAgICAuLi57ICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcclxuICAgICAgICAgICAgLi4ub3B0aW9ucy5oZWFkZXJzLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcXVlcnlQYXJhbWV0ZXJzOiB7XHJcbiAgICAgICAgICAgIC4uLmF1dGgucXVlcnlQYXJhbWV0ZXJzKCksXHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMucXVlcnlQYXJhbWV0ZXJzLFxyXG4gICAgICAgIH0sXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBhZGRNZXRob2RzKHsgYXBwSWQ6IG9wdGlvbnMuYXBwSWQsIHRyYW5zcG9ydGVyIH0sIG9wdGlvbnMubWV0aG9kcyk7XHJcbn07XG5cbmNvbnN0IGdldFBlcnNvbmFsaXphdGlvblN0cmF0ZWd5ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLkdldCxcclxuICAgICAgICAgICAgcGF0aDogJzEvc3RyYXRlZ2llcy9wZXJzb25hbGl6YXRpb24nLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNldFBlcnNvbmFsaXphdGlvblN0cmF0ZWd5ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocGVyc29uYWxpemF0aW9uU3RyYXRlZ3ksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogJzEvc3RyYXRlZ2llcy9wZXJzb25hbGl6YXRpb24nLFxyXG4gICAgICAgICAgICBkYXRhOiBwZXJzb25hbGl6YXRpb25TdHJhdGVneSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5leHBvcnQgeyBjcmVhdGVQZXJzb25hbGl6YXRpb25DbGllbnQsIGdldFBlcnNvbmFsaXphdGlvblN0cmF0ZWd5LCBzZXRQZXJzb25hbGl6YXRpb25TdHJhdGVneSB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/client-personalization/dist/client-personalization.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/client-search/dist/client-search.esm.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@algolia/client-search/dist/client-search.esm.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApiKeyACLEnum: () => (/* binding */ ApiKeyACLEnum),\n/* harmony export */   BatchActionEnum: () => (/* binding */ BatchActionEnum),\n/* harmony export */   ScopeEnum: () => (/* binding */ ScopeEnum),\n/* harmony export */   StrategyEnum: () => (/* binding */ StrategyEnum),\n/* harmony export */   SynonymEnum: () => (/* binding */ SynonymEnum),\n/* harmony export */   addApiKey: () => (/* binding */ addApiKey),\n/* harmony export */   assignUserID: () => (/* binding */ assignUserID),\n/* harmony export */   assignUserIDs: () => (/* binding */ assignUserIDs),\n/* harmony export */   batch: () => (/* binding */ batch),\n/* harmony export */   browseObjects: () => (/* binding */ browseObjects),\n/* harmony export */   browseRules: () => (/* binding */ browseRules),\n/* harmony export */   browseSynonyms: () => (/* binding */ browseSynonyms),\n/* harmony export */   chunkedBatch: () => (/* binding */ chunkedBatch),\n/* harmony export */   clearDictionaryEntries: () => (/* binding */ clearDictionaryEntries),\n/* harmony export */   clearObjects: () => (/* binding */ clearObjects),\n/* harmony export */   clearRules: () => (/* binding */ clearRules),\n/* harmony export */   clearSynonyms: () => (/* binding */ clearSynonyms),\n/* harmony export */   copyIndex: () => (/* binding */ copyIndex),\n/* harmony export */   copyRules: () => (/* binding */ copyRules),\n/* harmony export */   copySettings: () => (/* binding */ copySettings),\n/* harmony export */   copySynonyms: () => (/* binding */ copySynonyms),\n/* harmony export */   createBrowsablePromise: () => (/* binding */ createBrowsablePromise),\n/* harmony export */   createMissingObjectIDError: () => (/* binding */ createMissingObjectIDError),\n/* harmony export */   createObjectNotFoundError: () => (/* binding */ createObjectNotFoundError),\n/* harmony export */   createSearchClient: () => (/* binding */ createSearchClient),\n/* harmony export */   createValidUntilNotFoundError: () => (/* binding */ createValidUntilNotFoundError),\n/* harmony export */   customRequest: () => (/* binding */ customRequest),\n/* harmony export */   deleteApiKey: () => (/* binding */ deleteApiKey),\n/* harmony export */   deleteBy: () => (/* binding */ deleteBy),\n/* harmony export */   deleteDictionaryEntries: () => (/* binding */ deleteDictionaryEntries),\n/* harmony export */   deleteIndex: () => (/* binding */ deleteIndex),\n/* harmony export */   deleteObject: () => (/* binding */ deleteObject),\n/* harmony export */   deleteObjects: () => (/* binding */ deleteObjects),\n/* harmony export */   deleteRule: () => (/* binding */ deleteRule),\n/* harmony export */   deleteSynonym: () => (/* binding */ deleteSynonym),\n/* harmony export */   exists: () => (/* binding */ exists),\n/* harmony export */   findAnswers: () => (/* binding */ findAnswers),\n/* harmony export */   findObject: () => (/* binding */ findObject),\n/* harmony export */   generateSecuredApiKey: () => (/* binding */ generateSecuredApiKey),\n/* harmony export */   getApiKey: () => (/* binding */ getApiKey),\n/* harmony export */   getAppTask: () => (/* binding */ getAppTask),\n/* harmony export */   getDictionarySettings: () => (/* binding */ getDictionarySettings),\n/* harmony export */   getLogs: () => (/* binding */ getLogs),\n/* harmony export */   getObject: () => (/* binding */ getObject),\n/* harmony export */   getObjectPosition: () => (/* binding */ getObjectPosition),\n/* harmony export */   getObjects: () => (/* binding */ getObjects),\n/* harmony export */   getRule: () => (/* binding */ getRule),\n/* harmony export */   getSecuredApiKeyRemainingValidity: () => (/* binding */ getSecuredApiKeyRemainingValidity),\n/* harmony export */   getSettings: () => (/* binding */ getSettings),\n/* harmony export */   getSynonym: () => (/* binding */ getSynonym),\n/* harmony export */   getTask: () => (/* binding */ getTask),\n/* harmony export */   getTopUserIDs: () => (/* binding */ getTopUserIDs),\n/* harmony export */   getUserID: () => (/* binding */ getUserID),\n/* harmony export */   hasPendingMappings: () => (/* binding */ hasPendingMappings),\n/* harmony export */   initIndex: () => (/* binding */ initIndex),\n/* harmony export */   listApiKeys: () => (/* binding */ listApiKeys),\n/* harmony export */   listClusters: () => (/* binding */ listClusters),\n/* harmony export */   listIndices: () => (/* binding */ listIndices),\n/* harmony export */   listUserIDs: () => (/* binding */ listUserIDs),\n/* harmony export */   moveIndex: () => (/* binding */ moveIndex),\n/* harmony export */   multipleBatch: () => (/* binding */ multipleBatch),\n/* harmony export */   multipleGetObjects: () => (/* binding */ multipleGetObjects),\n/* harmony export */   multipleQueries: () => (/* binding */ multipleQueries),\n/* harmony export */   multipleSearchForFacetValues: () => (/* binding */ multipleSearchForFacetValues),\n/* harmony export */   partialUpdateObject: () => (/* binding */ partialUpdateObject),\n/* harmony export */   partialUpdateObjects: () => (/* binding */ partialUpdateObjects),\n/* harmony export */   removeUserID: () => (/* binding */ removeUserID),\n/* harmony export */   replaceAllObjects: () => (/* binding */ replaceAllObjects),\n/* harmony export */   replaceAllRules: () => (/* binding */ replaceAllRules),\n/* harmony export */   replaceAllSynonyms: () => (/* binding */ replaceAllSynonyms),\n/* harmony export */   replaceDictionaryEntries: () => (/* binding */ replaceDictionaryEntries),\n/* harmony export */   restoreApiKey: () => (/* binding */ restoreApiKey),\n/* harmony export */   saveDictionaryEntries: () => (/* binding */ saveDictionaryEntries),\n/* harmony export */   saveObject: () => (/* binding */ saveObject),\n/* harmony export */   saveObjects: () => (/* binding */ saveObjects),\n/* harmony export */   saveRule: () => (/* binding */ saveRule),\n/* harmony export */   saveRules: () => (/* binding */ saveRules),\n/* harmony export */   saveSynonym: () => (/* binding */ saveSynonym),\n/* harmony export */   saveSynonyms: () => (/* binding */ saveSynonyms),\n/* harmony export */   search: () => (/* binding */ search),\n/* harmony export */   searchDictionaryEntries: () => (/* binding */ searchDictionaryEntries),\n/* harmony export */   searchForFacetValues: () => (/* binding */ searchForFacetValues),\n/* harmony export */   searchRules: () => (/* binding */ searchRules),\n/* harmony export */   searchSynonyms: () => (/* binding */ searchSynonyms),\n/* harmony export */   searchUserIDs: () => (/* binding */ searchUserIDs),\n/* harmony export */   setDictionarySettings: () => (/* binding */ setDictionarySettings),\n/* harmony export */   setSettings: () => (/* binding */ setSettings),\n/* harmony export */   updateApiKey: () => (/* binding */ updateApiKey),\n/* harmony export */   waitAppTask: () => (/* binding */ waitAppTask),\n/* harmony export */   waitTask: () => (/* binding */ waitTask)\n/* harmony export */ });\n/* harmony import */ var _algolia_client_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @algolia/client-common */ \"(ssr)/./node_modules/@algolia/client-common/dist/client-common.esm.js\");\n/* harmony import */ var _algolia_transporter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @algolia/transporter */ \"(ssr)/./node_modules/@algolia/transporter/dist/transporter.esm.js\");\n/* harmony import */ var _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @algolia/requester-common */ \"(ssr)/./node_modules/@algolia/requester-common/dist/requester-common.esm.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\n\n\n\n\nfunction createBrowsablePromise(options) {\r\n    const browse = (data) => {\r\n        return options.request(data).then(response => {\r\n            /**\r\n             * First we send to the developer the\r\n             * batch retrieved from the API.\r\n             */\r\n            if (options.batch !== undefined) {\r\n                options.batch(response.hits);\r\n            }\r\n            /**\r\n             * Then, we ask to the browse concrete implementation\r\n             * if we should stop browsing. As example, the `browseObjects`\r\n             * method will stop if the cursor is not present on the response.\r\n             */\r\n            if (options.shouldStop(response)) {\r\n                return undefined;\r\n            }\r\n            /**\r\n             * Finally, if the response contains a cursor, we browse to the next\r\n             * batch using that same cursor. Otherwise, we just use the traditional\r\n             * browsing using the page element.\r\n             */\r\n            if (response.cursor) {\r\n                return browse({\r\n                    cursor: response.cursor,\r\n                });\r\n            }\r\n            return browse({\r\n                page: (data.page || 0) + 1,\r\n            });\r\n        });\r\n    };\r\n    return browse({});\r\n}\n\nconst createSearchClient = options => {\r\n    const appId = options.appId;\r\n    const auth = (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createAuth)(options.authMode !== undefined ? options.authMode : _algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.AuthMode.WithinHeaders, appId, options.apiKey);\r\n    const transporter = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createTransporter)({\r\n        hosts: [\r\n            { url: `${appId}-dsn.algolia.net`, accept: _algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.CallEnum.Read },\r\n            { url: `${appId}.algolia.net`, accept: _algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.CallEnum.Write },\r\n        ].concat((0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.shuffle)([\r\n            { url: `${appId}-1.algolianet.com` },\r\n            { url: `${appId}-2.algolianet.com` },\r\n            { url: `${appId}-3.algolianet.com` },\r\n        ])),\r\n        ...options,\r\n        headers: {\r\n            ...auth.headers(),\r\n            ...{ 'content-type': 'application/x-www-form-urlencoded' },\r\n            ...options.headers,\r\n        },\r\n        queryParameters: {\r\n            ...auth.queryParameters(),\r\n            ...options.queryParameters,\r\n        },\r\n    });\r\n    const base = {\r\n        transporter,\r\n        appId,\r\n        addAlgoliaAgent(segment, version) {\r\n            transporter.userAgent.add({ segment, version });\r\n        },\r\n        clearCache() {\r\n            return Promise.all([\r\n                transporter.requestsCache.clear(),\r\n                transporter.responsesCache.clear(),\r\n            ]).then(() => undefined);\r\n        },\r\n    };\r\n    return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.addMethods)(base, options.methods);\r\n};\n\nfunction createMissingObjectIDError() {\r\n    return {\r\n        name: 'MissingObjectIDError',\r\n        message: 'All objects must have an unique objectID ' +\r\n            '(like a primary key) to be valid. ' +\r\n            'Algolia is also able to generate objectIDs ' +\r\n            \"automatically but *it's not recommended*. \" +\r\n            \"To do it, use the `{'autoGenerateObjectIDIfNotExist': true}` option.\",\r\n    };\r\n}\n\nfunction createObjectNotFoundError() {\r\n    return {\r\n        name: 'ObjectNotFoundError',\r\n        message: 'Object not found.',\r\n    };\r\n}\n\nfunction createValidUntilNotFoundError() {\r\n    return {\r\n        name: 'ValidUntilNotFoundError',\r\n        message: 'ValidUntil not found in given secured api key.',\r\n    };\r\n}\n\nconst addApiKey = (base) => {\r\n    return (acl, requestOptions) => {\r\n        const { queryParameters, ...options } = requestOptions || {};\r\n        const data = {\r\n            acl,\r\n            ...(queryParameters !== undefined ? { queryParameters } : {}),\r\n        };\r\n        const wait = (response, waitRequestOptions) => {\r\n            return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createRetryablePromise)(retry => {\r\n                return getApiKey(base)(response.key, waitRequestOptions).catch((apiError) => {\r\n                    if (apiError.status !== 404) {\r\n                        throw apiError;\r\n                    }\r\n                    return retry();\r\n                });\r\n            });\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/keys',\r\n            data,\r\n        }, options), wait);\r\n    };\r\n};\n\nconst assignUserID = (base) => {\r\n    return (userID, clusterName, requestOptions) => {\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(requestOptions);\r\n        // eslint-disable-next-line functional/immutable-data\r\n        mappedRequestOptions.queryParameters['X-Algolia-User-ID'] = userID;\r\n        return base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/clusters/mapping',\r\n            data: { cluster: clusterName },\r\n        }, mappedRequestOptions);\r\n    };\r\n};\n\nconst assignUserIDs = (base) => {\r\n    return (userIDs, clusterName, requestOptions) => {\r\n        return base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/clusters/mapping/batch',\r\n            data: {\r\n                users: userIDs,\r\n                cluster: clusterName,\r\n            },\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst clearDictionaryEntries = (base) => {\r\n    return (dictionary, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('/1/dictionaries/%s/batch', dictionary),\r\n            data: {\r\n                clearExistingDictionaryEntries: true,\r\n                requests: { action: 'addEntry', body: [] },\r\n            },\r\n        }, requestOptions), (response, waitRequestOptions) => waitAppTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst copyIndex = (base) => {\r\n    return (from, to, requestOptions) => {\r\n        const wait = (response, waitRequestOptions) => {\r\n            return initIndex(base)(from, {\r\n                methods: { waitTask },\r\n            }).waitTask(response.taskID, waitRequestOptions);\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/operation', from),\r\n            data: {\r\n                operation: 'copy',\r\n                destination: to,\r\n            },\r\n        }, requestOptions), wait);\r\n    };\r\n};\n\nconst copyRules = (base) => {\r\n    return (from, to, requestOptions) => {\r\n        return copyIndex(base)(from, to, {\r\n            ...requestOptions,\r\n            scope: [ScopeEnum.Rules],\r\n        });\r\n    };\r\n};\n\nconst copySettings = (base) => {\r\n    return (from, to, requestOptions) => {\r\n        return copyIndex(base)(from, to, {\r\n            ...requestOptions,\r\n            scope: [ScopeEnum.Settings],\r\n        });\r\n    };\r\n};\n\nconst copySynonyms = (base) => {\r\n    return (from, to, requestOptions) => {\r\n        return copyIndex(base)(from, to, {\r\n            ...requestOptions,\r\n            scope: [ScopeEnum.Synonyms],\r\n        });\r\n    };\r\n};\n\nconst customRequest = (base) => {\r\n    return (request, requestOptions) => {\r\n        if (request.method === _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get) {\r\n            return base.transporter.read(request, requestOptions);\r\n        }\r\n        return base.transporter.write(request, requestOptions);\r\n    };\r\n};\n\nconst deleteApiKey = (base) => {\r\n    return (apiKey, requestOptions) => {\r\n        const wait = (_, waitRequestOptions) => {\r\n            return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createRetryablePromise)(retry => {\r\n                return getApiKey(base)(apiKey, waitRequestOptions)\r\n                    .then(retry)\r\n                    .catch((apiError) => {\r\n                    if (apiError.status !== 404) {\r\n                        throw apiError;\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Delete,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/keys/%s', apiKey),\r\n        }, requestOptions), wait);\r\n    };\r\n};\n\nconst deleteDictionaryEntries = (base) => {\r\n    return (dictionary, objectIDs, requestOptions) => {\r\n        const requests = objectIDs.map(objectID => ({\r\n            action: 'deleteEntry',\r\n            body: { objectID },\r\n        }));\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('/1/dictionaries/%s/batch', dictionary),\r\n            data: { clearExistingDictionaryEntries: false, requests },\r\n        }, requestOptions), (response, waitRequestOptions) => waitAppTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst generateSecuredApiKey = () => {\r\n    return (parentApiKey, restrictions) => {\r\n        const queryParameters = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.serializeQueryParameters)(restrictions);\r\n        const securedKey = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.createHmac)('sha256', parentApiKey)\r\n            .update(queryParameters)\r\n            .digest('hex');\r\n        return Buffer.from(securedKey + queryParameters).toString('base64');\r\n    };\r\n};\n\nconst getApiKey = (base) => {\r\n    return (apiKey, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/keys/%s', apiKey),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getAppTask = (base) => {\r\n    return (taskID, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/task/%s', taskID.toString()),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getDictionarySettings = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '/1/dictionaries/*/settings',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getLogs = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/logs',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getSecuredApiKeyRemainingValidity = () => {\r\n    return (securedApiKey) => {\r\n        const decodedString = Buffer.from(securedApiKey, 'base64').toString('ascii');\r\n        const regex = /validUntil=(\\d+)/;\r\n        const match = decodedString.match(regex);\r\n        if (match === null) {\r\n            throw createValidUntilNotFoundError();\r\n        }\r\n        return parseInt(match[1], 10) - Math.round(new Date().getTime() / 1000);\r\n    };\r\n};\n\nconst getTopUserIDs = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/clusters/mapping/top',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getUserID = (base) => {\r\n    return (userID, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/clusters/mapping/%s', userID),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst hasPendingMappings = (base) => {\r\n    return (requestOptions) => {\r\n        const { retrieveMappings, ...options } = requestOptions || {};\r\n        if (retrieveMappings === true) {\r\n            // eslint-disable-next-line functional/immutable-data\r\n            options.getClusters = true;\r\n        }\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/clusters/mapping/pending',\r\n        }, options);\r\n    };\r\n};\n\nconst initIndex = (base) => {\r\n    return (indexName, options = {}) => {\r\n        const searchIndex = {\r\n            transporter: base.transporter,\r\n            appId: base.appId,\r\n            indexName,\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.addMethods)(searchIndex, options.methods);\r\n    };\r\n};\n\nconst listApiKeys = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/keys',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst listClusters = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/clusters',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst listIndices = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/indexes',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst listUserIDs = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/clusters/mapping',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst moveIndex = (base) => {\r\n    return (from, to, requestOptions) => {\r\n        const wait = (response, waitRequestOptions) => {\r\n            return initIndex(base)(from, {\r\n                methods: { waitTask },\r\n            }).waitTask(response.taskID, waitRequestOptions);\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/operation', from),\r\n            data: {\r\n                operation: 'move',\r\n                destination: to,\r\n            },\r\n        }, requestOptions), wait);\r\n    };\r\n};\n\nconst multipleBatch = (base) => {\r\n    return (requests, requestOptions) => {\r\n        const wait = (response, waitRequestOptions) => {\r\n            return Promise.all(Object.keys(response.taskID).map(indexName => {\r\n                return initIndex(base)(indexName, {\r\n                    methods: { waitTask },\r\n                }).waitTask(response.taskID[indexName], waitRequestOptions);\r\n            }));\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/indexes/*/batch',\r\n            data: {\r\n                requests,\r\n            },\r\n        }, requestOptions), wait);\r\n    };\r\n};\n\nconst multipleGetObjects = (base) => {\r\n    return (requests, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/indexes/*/objects',\r\n            data: {\r\n                requests,\r\n            },\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst multipleQueries = (base) => {\r\n    return (queries, requestOptions) => {\r\n        const requests = queries.map(query => {\r\n            return {\r\n                ...query,\r\n                params: (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.serializeQueryParameters)(query.params || {}),\r\n            };\r\n        });\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/indexes/*/queries',\r\n            data: {\r\n                requests,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst multipleSearchForFacetValues = (base) => {\r\n    return (queries, requestOptions) => {\r\n        return Promise.all(queries.map(query => {\r\n            const { facetName, facetQuery, ...params } = query.params;\r\n            return initIndex(base)(query.indexName, {\r\n                methods: { searchForFacetValues },\r\n            }).searchForFacetValues(facetName, facetQuery, {\r\n                ...requestOptions,\r\n                ...params,\r\n            });\r\n        }));\r\n    };\r\n};\n\nconst removeUserID = (base) => {\r\n    return (userID, requestOptions) => {\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(requestOptions);\r\n        // eslint-disable-next-line functional/immutable-data\r\n        mappedRequestOptions.queryParameters['X-Algolia-User-ID'] = userID;\r\n        return base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Delete,\r\n            path: '1/clusters/mapping',\r\n        }, mappedRequestOptions);\r\n    };\r\n};\n\nconst replaceDictionaryEntries = (base) => {\r\n    return (dictionary, entries, requestOptions) => {\r\n        const requests = entries.map(entry => ({\r\n            action: 'addEntry',\r\n            body: entry,\r\n        }));\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('/1/dictionaries/%s/batch', dictionary),\r\n            data: { clearExistingDictionaryEntries: true, requests },\r\n        }, requestOptions), (response, waitRequestOptions) => waitAppTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst restoreApiKey = (base) => {\r\n    return (apiKey, requestOptions) => {\r\n        const wait = (_, waitRequestOptions) => {\r\n            return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createRetryablePromise)(retry => {\r\n                return getApiKey(base)(apiKey, waitRequestOptions).catch((apiError) => {\r\n                    if (apiError.status !== 404) {\r\n                        throw apiError;\r\n                    }\r\n                    return retry();\r\n                });\r\n            });\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/keys/%s/restore', apiKey),\r\n        }, requestOptions), wait);\r\n    };\r\n};\n\nconst saveDictionaryEntries = (base) => {\r\n    return (dictionary, entries, requestOptions) => {\r\n        const requests = entries.map(entry => ({\r\n            action: 'addEntry',\r\n            body: entry,\r\n        }));\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('/1/dictionaries/%s/batch', dictionary),\r\n            data: { clearExistingDictionaryEntries: false, requests },\r\n        }, requestOptions), (response, waitRequestOptions) => waitAppTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst searchDictionaryEntries = (base) => {\r\n    return (dictionary, query, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('/1/dictionaries/%s/search', dictionary),\r\n            data: {\r\n                query,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst searchUserIDs = (base) => {\r\n    return (query, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/clusters/mapping/search',\r\n            data: {\r\n                query,\r\n            },\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst setDictionarySettings = (base) => {\r\n    return (settings, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Put,\r\n            path: '/1/dictionaries/*/settings',\r\n            data: settings,\r\n        }, requestOptions), (response, waitRequestOptions) => waitAppTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst updateApiKey = (base) => {\r\n    return (apiKey, requestOptions) => {\r\n        const updatedFields = Object.assign({}, requestOptions);\r\n        const { queryParameters, ...options } = requestOptions || {};\r\n        const data = queryParameters ? { queryParameters } : {};\r\n        const apiKeyFields = [\r\n            'acl',\r\n            'indexes',\r\n            'referers',\r\n            'restrictSources',\r\n            'queryParameters',\r\n            'description',\r\n            'maxQueriesPerIPPerHour',\r\n            'maxHitsPerQuery',\r\n        ];\r\n        // Check that all the fields retrieved through getApiKey are the same as the ones we wanted to update\r\n        const hasChanged = (getApiKeyResponse) => {\r\n            return Object.keys(updatedFields)\r\n                .filter((updatedField) => apiKeyFields.indexOf(updatedField) !== -1)\r\n                .every(updatedField => {\r\n                // If the field is an array, we need to check that they are the same length and that all the values are the same\r\n                if (Array.isArray(getApiKeyResponse[updatedField]) &&\r\n                    Array.isArray(updatedFields[updatedField])) {\r\n                    const getApiKeyResponseArray = getApiKeyResponse[updatedField];\r\n                    return (getApiKeyResponseArray.length === updatedFields[updatedField].length &&\r\n                        getApiKeyResponseArray.every((value, index) => value === updatedFields[updatedField][index]));\r\n                }\r\n                else {\r\n                    return getApiKeyResponse[updatedField] === updatedFields[updatedField];\r\n                }\r\n            });\r\n        };\r\n        const wait = (_, waitRequestOptions) => (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createRetryablePromise)(retry => {\r\n            return getApiKey(base)(apiKey, waitRequestOptions).then(getApiKeyResponse => {\r\n                return hasChanged(getApiKeyResponse) ? Promise.resolve() : retry();\r\n            });\r\n        });\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Put,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/keys/%s', apiKey),\r\n            data,\r\n        }, options), wait);\r\n    };\r\n};\n\nconst waitAppTask = (base) => {\r\n    return (taskID, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createRetryablePromise)(retry => {\r\n            return getAppTask(base)(taskID, requestOptions).then(response => {\r\n                return response.status !== 'published' ? retry() : undefined;\r\n            });\r\n        });\r\n    };\r\n};\n\nconst batch = (base) => {\r\n    return (requests, requestOptions) => {\r\n        const wait = (response, waitRequestOptions) => {\r\n            return waitTask(base)(response.taskID, waitRequestOptions);\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/batch', base.indexName),\r\n            data: {\r\n                requests,\r\n            },\r\n        }, requestOptions), wait);\r\n    };\r\n};\n\nconst browseObjects = (base) => {\r\n    return (requestOptions) => {\r\n        return createBrowsablePromise({\r\n            shouldStop: response => response.cursor === undefined,\r\n            ...requestOptions,\r\n            request: (data) => base.transporter.read({\r\n                method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n                path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/browse', base.indexName),\r\n                data,\r\n            }, requestOptions),\r\n        });\r\n    };\r\n};\n\nconst browseRules = (base) => {\r\n    return (requestOptions) => {\r\n        const options = {\r\n            hitsPerPage: 1000,\r\n            ...requestOptions,\r\n        };\r\n        return createBrowsablePromise({\r\n            shouldStop: response => response.hits.length < options.hitsPerPage,\r\n            ...options,\r\n            request(data) {\r\n                return searchRules(base)('', { ...options, ...data }).then((response) => {\r\n                    return {\r\n                        ...response,\r\n                        hits: response.hits.map(rule => {\r\n                            // eslint-disable-next-line functional/immutable-data,no-param-reassign\r\n                            delete rule._highlightResult;\r\n                            return rule;\r\n                        }),\r\n                    };\r\n                });\r\n            },\r\n        });\r\n    };\r\n};\n\nconst browseSynonyms = (base) => {\r\n    return (requestOptions) => {\r\n        const options = {\r\n            hitsPerPage: 1000,\r\n            ...requestOptions,\r\n        };\r\n        return createBrowsablePromise({\r\n            shouldStop: response => response.hits.length < options.hitsPerPage,\r\n            ...options,\r\n            request(data) {\r\n                return searchSynonyms(base)('', { ...options, ...data }).then((response) => {\r\n                    return {\r\n                        ...response,\r\n                        hits: response.hits.map(synonym => {\r\n                            // eslint-disable-next-line functional/immutable-data,no-param-reassign\r\n                            delete synonym._highlightResult;\r\n                            return synonym;\r\n                        }),\r\n                    };\r\n                });\r\n            },\r\n        });\r\n    };\r\n};\n\nconst chunkedBatch = (base) => {\r\n    return (bodies, action, requestOptions) => {\r\n        const { batchSize, ...options } = requestOptions || {};\r\n        const response = {\r\n            taskIDs: [],\r\n            objectIDs: [],\r\n        };\r\n        const forEachBatch = (lastIndex = 0) => {\r\n            // eslint-disable-next-line functional/prefer-readonly-type\r\n            const bodiesChunk = [];\r\n            // eslint-disable-next-line functional/no-let\r\n            let index;\r\n            /* eslint-disable-next-line functional/no-loop-statement */\r\n            for (index = lastIndex; index < bodies.length; index++) {\r\n                // eslint-disable-next-line functional/immutable-data\r\n                bodiesChunk.push(bodies[index]);\r\n                if (bodiesChunk.length === (batchSize || 1000)) {\r\n                    break;\r\n                }\r\n            }\r\n            if (bodiesChunk.length === 0) {\r\n                return Promise.resolve(response);\r\n            }\r\n            return batch(base)(bodiesChunk.map(body => {\r\n                return {\r\n                    action,\r\n                    body,\r\n                };\r\n            }), options).then(res => {\r\n                response.objectIDs = response.objectIDs.concat(res.objectIDs); // eslint-disable-line functional/immutable-data\r\n                response.taskIDs.push(res.taskID); // eslint-disable-line functional/immutable-data\r\n                index++;\r\n                return forEachBatch(index);\r\n            });\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(forEachBatch(), (chunkedBatchResponse, waitRequestOptions) => {\r\n            return Promise.all(chunkedBatchResponse.taskIDs.map(taskID => {\r\n                return waitTask(base)(taskID, waitRequestOptions);\r\n            }));\r\n        });\r\n    };\r\n};\n\nconst clearObjects = (base) => {\r\n    return (requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/clear', base.indexName),\r\n        }, requestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst clearRules = (base) => {\r\n    return (requestOptions) => {\r\n        const { forwardToReplicas, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/rules/clear', base.indexName),\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst clearSynonyms = (base) => {\r\n    return (requestOptions) => {\r\n        const { forwardToReplicas, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/synonyms/clear', base.indexName),\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst deleteBy = (base) => {\r\n    return (filters, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/deleteByQuery', base.indexName),\r\n            data: filters,\r\n        }, requestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst deleteIndex = (base) => {\r\n    return (requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Delete,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s', base.indexName),\r\n        }, requestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst deleteObject = (base) => {\r\n    return (objectID, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(deleteObjects(base)([objectID], requestOptions).then(response => {\r\n            return { taskID: response.taskIDs[0] };\r\n        }), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst deleteObjects = (base) => {\r\n    return (objectIDs, requestOptions) => {\r\n        const objects = objectIDs.map(objectID => {\r\n            return { objectID };\r\n        });\r\n        return chunkedBatch(base)(objects, BatchActionEnum.DeleteObject, requestOptions);\r\n    };\r\n};\n\nconst deleteRule = (base) => {\r\n    return (objectID, requestOptions) => {\r\n        const { forwardToReplicas, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Delete,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/rules/%s', base.indexName, objectID),\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst deleteSynonym = (base) => {\r\n    return (objectID, requestOptions) => {\r\n        const { forwardToReplicas, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Delete,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/synonyms/%s', base.indexName, objectID),\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst exists = (base) => {\r\n    return (requestOptions) => {\r\n        return getSettings(base)(requestOptions)\r\n            .then(() => true)\r\n            .catch(error => {\r\n            if (error.status !== 404) {\r\n                throw error;\r\n            }\r\n            return false;\r\n        });\r\n    };\r\n};\n\nconst findAnswers = (base) => {\r\n    return (query, queryLanguages, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/answers/%s/prediction', base.indexName),\r\n            data: {\r\n                query,\r\n                queryLanguages,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst findObject = (base) => {\r\n    return (callback, requestOptions) => {\r\n        const { query, paginate, ...options } = requestOptions || {};\r\n        // eslint-disable-next-line functional/no-let\r\n        let page = 0;\r\n        const forEachPage = () => {\r\n            return search(base)(query || '', { ...options, page }).then(result => {\r\n                // eslint-disable-next-line functional/no-loop-statement\r\n                for (const [position, hit] of Object.entries(result.hits)) {\r\n                    // eslint-disable-next-line promise/no-callback-in-promise\r\n                    if (callback(hit)) {\r\n                        return {\r\n                            object: hit,\r\n                            position: parseInt(position, 10),\r\n                            page,\r\n                        };\r\n                    }\r\n                }\r\n                page++;\r\n                // paginate if option was set and has next page\r\n                if (paginate === false || page >= result.nbPages) {\r\n                    throw createObjectNotFoundError();\r\n                }\r\n                return forEachPage();\r\n            });\r\n        };\r\n        return forEachPage();\r\n    };\r\n};\n\nconst getObject = (base) => {\r\n    return (objectID, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/%s', base.indexName, objectID),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getObjectPosition = () => {\r\n    return (searchResponse, objectID) => {\r\n        // eslint-disable-next-line functional/no-loop-statement\r\n        for (const [position, hit] of Object.entries(searchResponse.hits)) {\r\n            if (hit.objectID === objectID) {\r\n                return parseInt(position, 10);\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n};\n\nconst getObjects = (base) => {\r\n    return (objectIDs, requestOptions) => {\r\n        const { attributesToRetrieve, ...options } = requestOptions || {};\r\n        const requests = objectIDs.map(objectID => {\r\n            return {\r\n                indexName: base.indexName,\r\n                objectID,\r\n                ...(attributesToRetrieve ? { attributesToRetrieve } : {}),\r\n            };\r\n        });\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/indexes/*/objects',\r\n            data: {\r\n                requests,\r\n            },\r\n        }, options);\r\n    };\r\n};\n\nconst getRule = (base) => {\r\n    return (objectID, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/rules/%s', base.indexName, objectID),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getSettings = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/settings', base.indexName),\r\n            data: {\r\n                getVersion: 2,\r\n            },\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getSynonym = (base) => {\r\n    return (objectID, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)(`1/indexes/%s/synonyms/%s`, base.indexName, objectID),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getTask = (base) => {\r\n    return (taskID, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/task/%s', base.indexName, taskID.toString()),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst partialUpdateObject = (base) => {\r\n    return (object, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(partialUpdateObjects(base)([object], requestOptions).then(response => {\r\n            return {\r\n                objectID: response.objectIDs[0],\r\n                taskID: response.taskIDs[0],\r\n            };\r\n        }), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst partialUpdateObjects = (base) => {\r\n    return (objects, requestOptions) => {\r\n        const { createIfNotExists, ...options } = requestOptions || {};\r\n        const action = createIfNotExists\r\n            ? BatchActionEnum.PartialUpdateObject\r\n            : BatchActionEnum.PartialUpdateObjectNoCreate;\r\n        return chunkedBatch(base)(objects, action, options);\r\n    };\r\n};\n\nconst replaceAllObjects = (base) => {\r\n    return (objects, requestOptions) => {\r\n        const { safe, autoGenerateObjectIDIfNotExist, batchSize, ...options } = requestOptions || {};\r\n        const operation = (from, to, type, operationRequestOptions) => {\r\n            return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n                method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n                path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/operation', from),\r\n                data: {\r\n                    operation: type,\r\n                    destination: to,\r\n                },\r\n            }, operationRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n        };\r\n        const randomSuffix = Math.random()\r\n            .toString(36)\r\n            .substring(7);\r\n        const temporaryIndexName = `${base.indexName}_tmp_${randomSuffix}`;\r\n        const saveObjectsInTemporary = saveObjects({\r\n            appId: base.appId,\r\n            transporter: base.transporter,\r\n            indexName: temporaryIndexName,\r\n        });\r\n        // @ts-ignore\r\n        // eslint-disable-next-line prefer-const, functional/no-let, functional/prefer-readonly-type\r\n        let responses = [];\r\n        const copyWaitablePromise = operation(base.indexName, temporaryIndexName, 'copy', {\r\n            ...options,\r\n            scope: ['settings', 'synonyms', 'rules'],\r\n        });\r\n        // eslint-disable-next-line functional/immutable-data\r\n        responses.push(copyWaitablePromise);\r\n        const result = (safe\r\n            ? copyWaitablePromise.wait(options)\r\n            : copyWaitablePromise)\r\n            .then(() => {\r\n            const saveObjectsWaitablePromise = saveObjectsInTemporary(objects, {\r\n                ...options,\r\n                autoGenerateObjectIDIfNotExist,\r\n                batchSize,\r\n            });\r\n            // eslint-disable-next-line functional/immutable-data\r\n            responses.push(saveObjectsWaitablePromise);\r\n            return safe ? saveObjectsWaitablePromise.wait(options) : saveObjectsWaitablePromise;\r\n        })\r\n            .then(() => {\r\n            const moveWaitablePromise = operation(temporaryIndexName, base.indexName, 'move', options);\r\n            // eslint-disable-next-line functional/immutable-data\r\n            responses.push(moveWaitablePromise);\r\n            return safe ? moveWaitablePromise.wait(options) : moveWaitablePromise;\r\n        })\r\n            .then(() => Promise.all(responses))\r\n            .then(([copyResponse, saveObjectsResponse, moveResponse]) => {\r\n            return {\r\n                objectIDs: saveObjectsResponse.objectIDs,\r\n                taskIDs: [copyResponse.taskID, ...saveObjectsResponse.taskIDs, moveResponse.taskID],\r\n            };\r\n        })\r\n            .catch(error => {\r\n            // Clean up temporary index if there's an error\r\n            // eslint-disable-next-line promise/no-nesting\r\n            return deleteIndex({\r\n                appId: base.appId,\r\n                transporter: base.transporter,\r\n                indexName: temporaryIndexName,\r\n            })()\r\n                .catch(() => {\r\n                // Ignore delete errors\r\n            })\r\n                .then(() => {\r\n                throw error;\r\n            });\r\n        });\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(result, (_, waitRequestOptions) => {\r\n            return Promise.all(responses.map(response => response.wait(waitRequestOptions)));\r\n        });\r\n    };\r\n};\n\nconst replaceAllRules = (base) => {\r\n    return (rules, requestOptions) => {\r\n        return saveRules(base)(rules, {\r\n            ...requestOptions,\r\n            clearExistingRules: true,\r\n        });\r\n    };\r\n};\n\nconst replaceAllSynonyms = (base) => {\r\n    return (synonyms, requestOptions) => {\r\n        return saveSynonyms(base)(synonyms, {\r\n            ...requestOptions,\r\n            clearExistingSynonyms: true,\r\n        });\r\n    };\r\n};\n\nconst saveObject = (base) => {\r\n    return (object, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(saveObjects(base)([object], requestOptions).then(response => {\r\n            return {\r\n                objectID: response.objectIDs[0],\r\n                taskID: response.taskIDs[0],\r\n            };\r\n        }), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst saveObjects = (base) => {\r\n    return (objects, requestOptions) => {\r\n        const { autoGenerateObjectIDIfNotExist, ...options } = requestOptions || {};\r\n        const action = autoGenerateObjectIDIfNotExist\r\n            ? BatchActionEnum.AddObject\r\n            : BatchActionEnum.UpdateObject;\r\n        if (action === BatchActionEnum.UpdateObject) {\r\n            // eslint-disable-next-line functional/no-loop-statement\r\n            for (const object of objects) {\r\n                if (object.objectID === undefined) {\r\n                    return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(Promise.reject(createMissingObjectIDError()));\r\n                }\r\n            }\r\n        }\r\n        return chunkedBatch(base)(objects, action, options);\r\n    };\r\n};\n\nconst saveRule = (base) => {\r\n    return (rule, requestOptions) => {\r\n        return saveRules(base)([rule], requestOptions);\r\n    };\r\n};\n\nconst saveRules = (base) => {\r\n    return (rules, requestOptions) => {\r\n        const { forwardToReplicas, clearExistingRules, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        if (clearExistingRules) {\r\n            mappedRequestOptions.queryParameters.clearExistingRules = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/rules/batch', base.indexName),\r\n            data: rules,\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst saveSynonym = (base) => {\r\n    return (synonym, requestOptions) => {\r\n        return saveSynonyms(base)([synonym], requestOptions);\r\n    };\r\n};\n\nconst saveSynonyms = (base) => {\r\n    return (synonyms, requestOptions) => {\r\n        const { forwardToReplicas, clearExistingSynonyms, replaceExistingSynonyms, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        if (replaceExistingSynonyms || clearExistingSynonyms) {\r\n            mappedRequestOptions.queryParameters.replaceExistingSynonyms = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/synonyms/batch', base.indexName),\r\n            data: synonyms,\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst search = (base) => {\r\n    return (query, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/query', base.indexName),\r\n            data: {\r\n                query,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst searchForFacetValues = (base) => {\r\n    return (facetName, facetQuery, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/facets/%s/query', base.indexName, facetName),\r\n            data: {\r\n                facetQuery,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst searchRules = (base) => {\r\n    return (query, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/rules/search', base.indexName),\r\n            data: {\r\n                query,\r\n            },\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst searchSynonyms = (base) => {\r\n    return (query, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/synonyms/search', base.indexName),\r\n            data: {\r\n                query,\r\n            },\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst setSettings = (base) => {\r\n    return (settings, requestOptions) => {\r\n        const { forwardToReplicas, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Put,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/settings', base.indexName),\r\n            data: settings,\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst waitTask = (base) => {\r\n    return (taskID, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createRetryablePromise)(retry => {\r\n            return getTask(base)(taskID, requestOptions).then(response => {\r\n                return response.status !== 'published' ? retry() : undefined;\r\n            });\r\n        });\r\n    };\r\n};\n\nconst ApiKeyACLEnum = {\r\n    AddObject: 'addObject',\r\n    Analytics: 'analytics',\r\n    Browser: 'browse',\r\n    DeleteIndex: 'deleteIndex',\r\n    DeleteObject: 'deleteObject',\r\n    EditSettings: 'editSettings',\r\n    Inference: 'inference',\r\n    ListIndexes: 'listIndexes',\r\n    Logs: 'logs',\r\n    Personalization: 'personalization',\r\n    Recommendation: 'recommendation',\r\n    Search: 'search',\r\n    SeeUnretrievableAttributes: 'seeUnretrievableAttributes',\r\n    Settings: 'settings',\r\n    Usage: 'usage',\r\n};\n\nconst BatchActionEnum = {\r\n    AddObject: 'addObject',\r\n    UpdateObject: 'updateObject',\r\n    PartialUpdateObject: 'partialUpdateObject',\r\n    PartialUpdateObjectNoCreate: 'partialUpdateObjectNoCreate',\r\n    DeleteObject: 'deleteObject',\r\n    DeleteIndex: 'delete',\r\n    ClearIndex: 'clear',\r\n};\n\nconst ScopeEnum = {\r\n    Settings: 'settings',\r\n    Synonyms: 'synonyms',\r\n    Rules: 'rules',\r\n};\n\nconst StrategyEnum = {\r\n    None: 'none',\r\n    StopIfEnoughMatches: 'stopIfEnoughMatches',\r\n};\n\nconst SynonymEnum = {\r\n    Synonym: 'synonym',\r\n    OneWaySynonym: 'oneWaySynonym',\r\n    AltCorrection1: 'altCorrection1',\r\n    AltCorrection2: 'altCorrection2',\r\n    Placeholder: 'placeholder',\r\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvY2xpZW50LXNlYXJjaC9kaXN0L2NsaWVudC1zZWFyY2guZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTBJO0FBQ2pCO0FBQ2xFO0FBQ25COztBQUVwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQSxvQkFBb0I7QUFDcEI7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixrRUFBVSxxREFBcUQsNERBQVE7QUFDeEYsd0JBQXdCLHVFQUFpQjtBQUN6QztBQUNBLGNBQWMsUUFBUSxNQUFNLDJCQUEyQiwwREFBUSxPQUFPO0FBQ3RFLGNBQWMsUUFBUSxNQUFNLHVCQUF1QiwwREFBUSxRQUFRO0FBQ25FLGlCQUFpQiwrREFBTztBQUN4QixjQUFjLFFBQVEsTUFBTSxvQkFBb0I7QUFDaEQsY0FBYyxRQUFRLE1BQU0sb0JBQW9CO0FBQ2hELGNBQWMsUUFBUSxNQUFNLG9CQUFvQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixxREFBcUQ7QUFDdEU7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxrQkFBa0I7QUFDMUQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxXQUFXLGtFQUFVO0FBQ3JCOztBQUVBO0FBQ0E7QUFDQTtBQUNB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O0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTI0QyIsInNvdXJjZXMiOlsid2VicGFjazovL3NwZWMtbG9naWMtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvY2xpZW50LXNlYXJjaC9kaXN0L2NsaWVudC1zZWFyY2guZXNtLmpzP2QzZGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQXV0aCwgQXV0aE1vZGUsIHNodWZmbGUsIGFkZE1ldGhvZHMsIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZSwgY3JlYXRlUmV0cnlhYmxlUHJvbWlzZSwgZW5jb2RlIH0gZnJvbSAnQGFsZ29saWEvY2xpZW50LWNvbW1vbic7XG5pbXBvcnQgeyBjcmVhdGVUcmFuc3BvcnRlciwgQ2FsbEVudW0sIGNyZWF0ZU1hcHBlZFJlcXVlc3RPcHRpb25zLCBzZXJpYWxpemVRdWVyeVBhcmFtZXRlcnMgfSBmcm9tICdAYWxnb2xpYS90cmFuc3BvcnRlcic7XG5pbXBvcnQgeyBNZXRob2RFbnVtIH0gZnJvbSAnQGFsZ29saWEvcmVxdWVzdGVyLWNvbW1vbic7XG5pbXBvcnQgeyBjcmVhdGVIbWFjIH0gZnJvbSAnY3J5cHRvJztcblxuZnVuY3Rpb24gY3JlYXRlQnJvd3NhYmxlUHJvbWlzZShvcHRpb25zKSB7XHJcbiAgICBjb25zdCBicm93c2UgPSAoZGF0YSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zLnJlcXVlc3QoZGF0YSkudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBGaXJzdCB3ZSBzZW5kIHRvIHRoZSBkZXZlbG9wZXIgdGhlXHJcbiAgICAgICAgICAgICAqIGJhdGNoIHJldHJpZXZlZCBmcm9tIHRoZSBBUEkuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5iYXRjaCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmJhdGNoKHJlc3BvbnNlLmhpdHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBUaGVuLCB3ZSBhc2sgdG8gdGhlIGJyb3dzZSBjb25jcmV0ZSBpbXBsZW1lbnRhdGlvblxyXG4gICAgICAgICAgICAgKiBpZiB3ZSBzaG91bGQgc3RvcCBicm93c2luZy4gQXMgZXhhbXBsZSwgdGhlIGBicm93c2VPYmplY3RzYFxyXG4gICAgICAgICAgICAgKiBtZXRob2Qgd2lsbCBzdG9wIGlmIHRoZSBjdXJzb3IgaXMgbm90IHByZXNlbnQgb24gdGhlIHJlc3BvbnNlLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2hvdWxkU3RvcChyZXNwb25zZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEZpbmFsbHksIGlmIHRoZSByZXNwb25zZSBjb250YWlucyBhIGN1cnNvciwgd2UgYnJvd3NlIHRvIHRoZSBuZXh0XHJcbiAgICAgICAgICAgICAqIGJhdGNoIHVzaW5nIHRoYXQgc2FtZSBjdXJzb3IuIE90aGVyd2lzZSwgd2UganVzdCB1c2UgdGhlIHRyYWRpdGlvbmFsXHJcbiAgICAgICAgICAgICAqIGJyb3dzaW5nIHVzaW5nIHRoZSBwYWdlIGVsZW1lbnQuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuY3Vyc29yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYnJvd3NlKHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHJlc3BvbnNlLmN1cnNvcixcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBicm93c2Uoe1xyXG4gICAgICAgICAgICAgICAgcGFnZTogKGRhdGEucGFnZSB8fCAwKSArIDEsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBicm93c2Uoe30pO1xyXG59XG5cbmNvbnN0IGNyZWF0ZVNlYXJjaENsaWVudCA9IG9wdGlvbnMgPT4ge1xyXG4gICAgY29uc3QgYXBwSWQgPSBvcHRpb25zLmFwcElkO1xyXG4gICAgY29uc3QgYXV0aCA9IGNyZWF0ZUF1dGgob3B0aW9ucy5hdXRoTW9kZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5hdXRoTW9kZSA6IEF1dGhNb2RlLldpdGhpbkhlYWRlcnMsIGFwcElkLCBvcHRpb25zLmFwaUtleSk7XHJcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IGNyZWF0ZVRyYW5zcG9ydGVyKHtcclxuICAgICAgICBob3N0czogW1xyXG4gICAgICAgICAgICB7IHVybDogYCR7YXBwSWR9LWRzbi5hbGdvbGlhLm5ldGAsIGFjY2VwdDogQ2FsbEVudW0uUmVhZCB9LFxyXG4gICAgICAgICAgICB7IHVybDogYCR7YXBwSWR9LmFsZ29saWEubmV0YCwgYWNjZXB0OiBDYWxsRW51bS5Xcml0ZSB9LFxyXG4gICAgICAgIF0uY29uY2F0KHNodWZmbGUoW1xyXG4gICAgICAgICAgICB7IHVybDogYCR7YXBwSWR9LTEuYWxnb2xpYW5ldC5jb21gIH0sXHJcbiAgICAgICAgICAgIHsgdXJsOiBgJHthcHBJZH0tMi5hbGdvbGlhbmV0LmNvbWAgfSxcclxuICAgICAgICAgICAgeyB1cmw6IGAke2FwcElkfS0zLmFsZ29saWFuZXQuY29tYCB9LFxyXG4gICAgICAgIF0pKSxcclxuICAgICAgICAuLi5vcHRpb25zLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgLi4uYXV0aC5oZWFkZXJzKCksXHJcbiAgICAgICAgICAgIC4uLnsgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0sXHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuaGVhZGVycyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHF1ZXJ5UGFyYW1ldGVyczoge1xyXG4gICAgICAgICAgICAuLi5hdXRoLnF1ZXJ5UGFyYW1ldGVycygpLFxyXG4gICAgICAgICAgICAuLi5vcHRpb25zLnF1ZXJ5UGFyYW1ldGVycyxcclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBiYXNlID0ge1xyXG4gICAgICAgIHRyYW5zcG9ydGVyLFxyXG4gICAgICAgIGFwcElkLFxyXG4gICAgICAgIGFkZEFsZ29saWFBZ2VudChzZWdtZW50LCB2ZXJzaW9uKSB7XHJcbiAgICAgICAgICAgIHRyYW5zcG9ydGVyLnVzZXJBZ2VudC5hZGQoeyBzZWdtZW50LCB2ZXJzaW9uIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2xlYXJDYWNoZSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgICAgIHRyYW5zcG9ydGVyLnJlcXVlc3RzQ2FjaGUuY2xlYXIoKSxcclxuICAgICAgICAgICAgICAgIHRyYW5zcG9ydGVyLnJlc3BvbnNlc0NhY2hlLmNsZWFyKCksXHJcbiAgICAgICAgICAgIF0pLnRoZW4oKCkgPT4gdW5kZWZpbmVkKTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxuICAgIHJldHVybiBhZGRNZXRob2RzKGJhc2UsIG9wdGlvbnMubWV0aG9kcyk7XHJcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZU1pc3NpbmdPYmplY3RJREVycm9yKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiAnTWlzc2luZ09iamVjdElERXJyb3InLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdBbGwgb2JqZWN0cyBtdXN0IGhhdmUgYW4gdW5pcXVlIG9iamVjdElEICcgK1xyXG4gICAgICAgICAgICAnKGxpa2UgYSBwcmltYXJ5IGtleSkgdG8gYmUgdmFsaWQuICcgK1xyXG4gICAgICAgICAgICAnQWxnb2xpYSBpcyBhbHNvIGFibGUgdG8gZ2VuZXJhdGUgb2JqZWN0SURzICcgK1xyXG4gICAgICAgICAgICBcImF1dG9tYXRpY2FsbHkgYnV0ICppdCdzIG5vdCByZWNvbW1lbmRlZCouIFwiICtcclxuICAgICAgICAgICAgXCJUbyBkbyBpdCwgdXNlIHRoZSBgeydhdXRvR2VuZXJhdGVPYmplY3RJRElmTm90RXhpc3QnOiB0cnVlfWAgb3B0aW9uLlwiLFxyXG4gICAgfTtcclxufVxuXG5mdW5jdGlvbiBjcmVhdGVPYmplY3ROb3RGb3VuZEVycm9yKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiAnT2JqZWN0Tm90Rm91bmRFcnJvcicsXHJcbiAgICAgICAgbWVzc2FnZTogJ09iamVjdCBub3QgZm91bmQuJyxcclxuICAgIH07XHJcbn1cblxuZnVuY3Rpb24gY3JlYXRlVmFsaWRVbnRpbE5vdEZvdW5kRXJyb3IoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5hbWU6ICdWYWxpZFVudGlsTm90Rm91bmRFcnJvcicsXHJcbiAgICAgICAgbWVzc2FnZTogJ1ZhbGlkVW50aWwgbm90IGZvdW5kIGluIGdpdmVuIHNlY3VyZWQgYXBpIGtleS4nLFxyXG4gICAgfTtcclxufVxuXG5jb25zdCBhZGRBcGlLZXkgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChhY2wsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBxdWVyeVBhcmFtZXRlcnMsIC4uLm9wdGlvbnMgfSA9IHJlcXVlc3RPcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgIGFjbCxcclxuICAgICAgICAgICAgLi4uKHF1ZXJ5UGFyYW1ldGVycyAhPT0gdW5kZWZpbmVkID8geyBxdWVyeVBhcmFtZXRlcnMgfSA6IHt9KSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHdhaXQgPSAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlUmV0cnlhYmxlUHJvbWlzZShyZXRyeSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QXBpS2V5KGJhc2UpKHJlc3BvbnNlLmtleSwgd2FpdFJlcXVlc3RPcHRpb25zKS5jYXRjaCgoYXBpRXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXBpRXJyb3Iuc3RhdHVzICE9PSA0MDQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgYXBpRXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXRyeSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2tleXMnLFxyXG4gICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgIH0sIG9wdGlvbnMpLCB3YWl0KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGFzc2lnblVzZXJJRCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHVzZXJJRCwgY2x1c3Rlck5hbWUsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbWFwcGVkUmVxdWVzdE9wdGlvbnMgPSBjcmVhdGVNYXBwZWRSZXF1ZXN0T3B0aW9ucyhyZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICBtYXBwZWRSZXF1ZXN0T3B0aW9ucy5xdWVyeVBhcmFtZXRlcnNbJ1gtQWxnb2xpYS1Vc2VyLUlEJ10gPSB1c2VySUQ7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogJzEvY2x1c3RlcnMvbWFwcGluZycsXHJcbiAgICAgICAgICAgIGRhdGE6IHsgY2x1c3RlcjogY2x1c3Rlck5hbWUgfSxcclxuICAgICAgICB9LCBtYXBwZWRSZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBhc3NpZ25Vc2VySURzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAodXNlcklEcywgY2x1c3Rlck5hbWUsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogJzEvY2x1c3RlcnMvbWFwcGluZy9iYXRjaCcsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHVzZXJzOiB1c2VySURzLFxyXG4gICAgICAgICAgICAgICAgY2x1c3RlcjogY2x1c3Rlck5hbWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgY2xlYXJEaWN0aW9uYXJ5RW50cmllcyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKGRpY3Rpb25hcnksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnLzEvZGljdGlvbmFyaWVzLyVzL2JhdGNoJywgZGljdGlvbmFyeSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGNsZWFyRXhpc3RpbmdEaWN0aW9uYXJ5RW50cmllczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RzOiB7IGFjdGlvbjogJ2FkZEVudHJ5JywgYm9keTogW10gfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyksIChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB3YWl0QXBwVGFzayhiYXNlKShyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucykpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgY29weUluZGV4ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoZnJvbSwgdG8sIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FpdCA9IChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbml0SW5kZXgoYmFzZSkoZnJvbSwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kczogeyB3YWl0VGFzayB9LFxyXG4gICAgICAgICAgICB9KS53YWl0VGFzayhyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvb3BlcmF0aW9uJywgZnJvbSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ2NvcHknLFxyXG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb246IHRvLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgd2FpdCk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBjb3B5UnVsZXMgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChmcm9tLCB0bywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY29weUluZGV4KGJhc2UpKGZyb20sIHRvLCB7XHJcbiAgICAgICAgICAgIC4uLnJlcXVlc3RPcHRpb25zLFxyXG4gICAgICAgICAgICBzY29wZTogW1Njb3BlRW51bS5SdWxlc10sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBjb3B5U2V0dGluZ3MgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChmcm9tLCB0bywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY29weUluZGV4KGJhc2UpKGZyb20sIHRvLCB7XHJcbiAgICAgICAgICAgIC4uLnJlcXVlc3RPcHRpb25zLFxyXG4gICAgICAgICAgICBzY29wZTogW1Njb3BlRW51bS5TZXR0aW5nc10sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBjb3B5U3lub255bXMgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChmcm9tLCB0bywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY29weUluZGV4KGJhc2UpKGZyb20sIHRvLCB7XHJcbiAgICAgICAgICAgIC4uLnJlcXVlc3RPcHRpb25zLFxyXG4gICAgICAgICAgICBzY29wZTogW1Njb3BlRW51bS5TeW5vbnltc10sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBjdXN0b21SZXF1ZXN0ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBpZiAocmVxdWVzdC5tZXRob2QgPT09IE1ldGhvZEVudW0uR2V0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQocmVxdWVzdCwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci53cml0ZShyZXF1ZXN0LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBkZWxldGVBcGlLZXkgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChhcGlLZXksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FpdCA9IChfLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVJldHJ5YWJsZVByb21pc2UocmV0cnkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEFwaUtleShiYXNlKShhcGlLZXksIHdhaXRSZXF1ZXN0T3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihyZXRyeSlcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGFwaUVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFwaUVycm9yLnN0YXR1cyAhPT0gNDA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGFwaUVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5EZWxldGUsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9rZXlzLyVzJywgYXBpS2V5KSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyksIHdhaXQpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZGVsZXRlRGljdGlvbmFyeUVudHJpZXMgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChkaWN0aW9uYXJ5LCBvYmplY3RJRHMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdHMgPSBvYmplY3RJRHMubWFwKG9iamVjdElEID0+ICh7XHJcbiAgICAgICAgICAgIGFjdGlvbjogJ2RlbGV0ZUVudHJ5JyxcclxuICAgICAgICAgICAgYm9keTogeyBvYmplY3RJRCB9LFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcvMS9kaWN0aW9uYXJpZXMvJXMvYmF0Y2gnLCBkaWN0aW9uYXJ5KSxcclxuICAgICAgICAgICAgZGF0YTogeyBjbGVhckV4aXN0aW5nRGljdGlvbmFyeUVudHJpZXM6IGZhbHNlLCByZXF1ZXN0cyB9LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgKHJlc3BvbnNlLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHdhaXRBcHBUYXNrKGJhc2UpKHJlc3BvbnNlLnRhc2tJRCwgd2FpdFJlcXVlc3RPcHRpb25zKSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZW5lcmF0ZVNlY3VyZWRBcGlLZXkgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gKHBhcmVudEFwaUtleSwgcmVzdHJpY3Rpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0gc2VyaWFsaXplUXVlcnlQYXJhbWV0ZXJzKHJlc3RyaWN0aW9ucyk7XHJcbiAgICAgICAgY29uc3Qgc2VjdXJlZEtleSA9IGNyZWF0ZUhtYWMoJ3NoYTI1NicsIHBhcmVudEFwaUtleSlcclxuICAgICAgICAgICAgLnVwZGF0ZShxdWVyeVBhcmFtZXRlcnMpXHJcbiAgICAgICAgICAgIC5kaWdlc3QoJ2hleCcpO1xyXG4gICAgICAgIHJldHVybiBCdWZmZXIuZnJvbShzZWN1cmVkS2V5ICsgcXVlcnlQYXJhbWV0ZXJzKS50b1N0cmluZygnYmFzZTY0Jyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXRBcGlLZXkgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChhcGlLZXksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5HZXQsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9rZXlzLyVzJywgYXBpS2V5KSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXRBcHBUYXNrID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAodGFza0lELCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvdGFzay8lcycsIHRhc2tJRC50b1N0cmluZygpKSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXREaWN0aW9uYXJ5U2V0dGluZ3MgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChyZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiAnLzEvZGljdGlvbmFyaWVzLyovc2V0dGluZ3MnLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGdldExvZ3MgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChyZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiAnMS9sb2dzJyxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXRTZWN1cmVkQXBpS2V5UmVtYWluaW5nVmFsaWRpdHkgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gKHNlY3VyZWRBcGlLZXkpID0+IHtcclxuICAgICAgICBjb25zdCBkZWNvZGVkU3RyaW5nID0gQnVmZmVyLmZyb20oc2VjdXJlZEFwaUtleSwgJ2Jhc2U2NCcpLnRvU3RyaW5nKCdhc2NpaScpO1xyXG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gL3ZhbGlkVW50aWw9KFxcZCspLztcclxuICAgICAgICBjb25zdCBtYXRjaCA9IGRlY29kZWRTdHJpbmcubWF0Y2gocmVnZXgpO1xyXG4gICAgICAgIGlmIChtYXRjaCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVWYWxpZFVudGlsTm90Rm91bmRFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKSAtIE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGdldFRvcFVzZXJJRHMgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChyZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiAnMS9jbHVzdGVycy9tYXBwaW5nL3RvcCcsXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0VXNlcklEID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAodXNlcklELCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvY2x1c3RlcnMvbWFwcGluZy8lcycsIHVzZXJJRCksXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgaGFzUGVuZGluZ01hcHBpbmdzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCB7IHJldHJpZXZlTWFwcGluZ3MsIC4uLm9wdGlvbnMgfSA9IHJlcXVlc3RPcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIGlmIChyZXRyaWV2ZU1hcHBpbmdzID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgICAgIG9wdGlvbnMuZ2V0Q2x1c3RlcnMgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLkdldCxcclxuICAgICAgICAgICAgcGF0aDogJzEvY2x1c3RlcnMvbWFwcGluZy9wZW5kaW5nJyxcclxuICAgICAgICB9LCBvcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGluaXRJbmRleCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKGluZGV4TmFtZSwgb3B0aW9ucyA9IHt9KSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc2VhcmNoSW5kZXggPSB7XHJcbiAgICAgICAgICAgIHRyYW5zcG9ydGVyOiBiYXNlLnRyYW5zcG9ydGVyLFxyXG4gICAgICAgICAgICBhcHBJZDogYmFzZS5hcHBJZCxcclxuICAgICAgICAgICAgaW5kZXhOYW1lLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGFkZE1ldGhvZHMoc2VhcmNoSW5kZXgsIG9wdGlvbnMubWV0aG9kcyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBsaXN0QXBpS2V5cyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5HZXQsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2tleXMnLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGxpc3RDbHVzdGVycyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5HZXQsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2NsdXN0ZXJzJyxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBsaXN0SW5kaWNlcyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5HZXQsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2luZGV4ZXMnLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGxpc3RVc2VySURzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLkdldCxcclxuICAgICAgICAgICAgcGF0aDogJzEvY2x1c3RlcnMvbWFwcGluZycsXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgbW92ZUluZGV4ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoZnJvbSwgdG8sIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FpdCA9IChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbml0SW5kZXgoYmFzZSkoZnJvbSwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kczogeyB3YWl0VGFzayB9LFxyXG4gICAgICAgICAgICB9KS53YWl0VGFzayhyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvb3BlcmF0aW9uJywgZnJvbSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ21vdmUnLFxyXG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb246IHRvLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgd2FpdCk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBtdWx0aXBsZUJhdGNoID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdHMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FpdCA9IChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChPYmplY3Qua2V5cyhyZXNwb25zZS50YXNrSUQpLm1hcChpbmRleE5hbWUgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluaXRJbmRleChiYXNlKShpbmRleE5hbWUsIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2RzOiB7IHdhaXRUYXNrIH0sXHJcbiAgICAgICAgICAgICAgICB9KS53YWl0VGFzayhyZXNwb25zZS50YXNrSURbaW5kZXhOYW1lXSwgd2FpdFJlcXVlc3RPcHRpb25zKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2luZGV4ZXMvKi9iYXRjaCcsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RzLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgd2FpdCk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBtdWx0aXBsZUdldE9iamVjdHMgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChyZXF1ZXN0cywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2luZGV4ZXMvKi9vYmplY3RzJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdHMsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgbXVsdGlwbGVRdWVyaWVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocXVlcmllcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0cyA9IHF1ZXJpZXMubWFwKHF1ZXJ5ID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIC4uLnF1ZXJ5LFxyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBzZXJpYWxpemVRdWVyeVBhcmFtZXRlcnMocXVlcnkucGFyYW1zIHx8IHt9KSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2luZGV4ZXMvKi9xdWVyaWVzJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdHMsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNhY2hlYWJsZTogdHJ1ZSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBtdWx0aXBsZVNlYXJjaEZvckZhY2V0VmFsdWVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocXVlcmllcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocXVlcmllcy5tYXAocXVlcnkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB7IGZhY2V0TmFtZSwgZmFjZXRRdWVyeSwgLi4ucGFyYW1zIH0gPSBxdWVyeS5wYXJhbXM7XHJcbiAgICAgICAgICAgIHJldHVybiBpbml0SW5kZXgoYmFzZSkocXVlcnkuaW5kZXhOYW1lLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2RzOiB7IHNlYXJjaEZvckZhY2V0VmFsdWVzIH0sXHJcbiAgICAgICAgICAgIH0pLnNlYXJjaEZvckZhY2V0VmFsdWVzKGZhY2V0TmFtZSwgZmFjZXRRdWVyeSwge1xyXG4gICAgICAgICAgICAgICAgLi4ucmVxdWVzdE9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHJlbW92ZVVzZXJJRCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHVzZXJJRCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCBtYXBwZWRSZXF1ZXN0T3B0aW9ucyA9IGNyZWF0ZU1hcHBlZFJlcXVlc3RPcHRpb25zKHJlcXVlc3RPcHRpb25zKTtcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgIG1hcHBlZFJlcXVlc3RPcHRpb25zLnF1ZXJ5UGFyYW1ldGVyc1snWC1BbGdvbGlhLVVzZXItSUQnXSA9IHVzZXJJRDtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5EZWxldGUsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2NsdXN0ZXJzL21hcHBpbmcnLFxyXG4gICAgICAgIH0sIG1hcHBlZFJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHJlcGxhY2VEaWN0aW9uYXJ5RW50cmllcyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKGRpY3Rpb25hcnksIGVudHJpZXMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdHMgPSBlbnRyaWVzLm1hcChlbnRyeSA9PiAoe1xyXG4gICAgICAgICAgICBhY3Rpb246ICdhZGRFbnRyeScsXHJcbiAgICAgICAgICAgIGJvZHk6IGVudHJ5LFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcvMS9kaWN0aW9uYXJpZXMvJXMvYmF0Y2gnLCBkaWN0aW9uYXJ5KSxcclxuICAgICAgICAgICAgZGF0YTogeyBjbGVhckV4aXN0aW5nRGljdGlvbmFyeUVudHJpZXM6IHRydWUsIHJlcXVlc3RzIH0sXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdEFwcFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHJlc3RvcmVBcGlLZXkgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChhcGlLZXksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FpdCA9IChfLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVJldHJ5YWJsZVByb21pc2UocmV0cnkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEFwaUtleShiYXNlKShhcGlLZXksIHdhaXRSZXF1ZXN0T3B0aW9ucykuY2F0Y2goKGFwaUVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFwaUVycm9yLnN0YXR1cyAhPT0gNDA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGFwaUVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0cnkoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEva2V5cy8lcy9yZXN0b3JlJywgYXBpS2V5KSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyksIHdhaXQpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3Qgc2F2ZURpY3Rpb25hcnlFbnRyaWVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoZGljdGlvbmFyeSwgZW50cmllcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0cyA9IGVudHJpZXMubWFwKGVudHJ5ID0+ICh7XHJcbiAgICAgICAgICAgIGFjdGlvbjogJ2FkZEVudHJ5JyxcclxuICAgICAgICAgICAgYm9keTogZW50cnksXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJy8xL2RpY3Rpb25hcmllcy8lcy9iYXRjaCcsIGRpY3Rpb25hcnkpLFxyXG4gICAgICAgICAgICBkYXRhOiB7IGNsZWFyRXhpc3RpbmdEaWN0aW9uYXJ5RW50cmllczogZmFsc2UsIHJlcXVlc3RzIH0sXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdEFwcFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNlYXJjaERpY3Rpb25hcnlFbnRyaWVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoZGljdGlvbmFyeSwgcXVlcnksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJy8xL2RpY3Rpb25hcmllcy8lcy9zZWFyY2gnLCBkaWN0aW9uYXJ5KSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcXVlcnksXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNhY2hlYWJsZTogdHJ1ZSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBzZWFyY2hVc2VySURzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocXVlcnksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiAnMS9jbHVzdGVycy9tYXBwaW5nL3NlYXJjaCcsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNldERpY3Rpb25hcnlTZXR0aW5ncyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHNldHRpbmdzLCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5QdXQsXHJcbiAgICAgICAgICAgIHBhdGg6ICcvMS9kaWN0aW9uYXJpZXMvKi9zZXR0aW5ncycsXHJcbiAgICAgICAgICAgIGRhdGE6IHNldHRpbmdzLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgKHJlc3BvbnNlLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHdhaXRBcHBUYXNrKGJhc2UpKHJlc3BvbnNlLnRhc2tJRCwgd2FpdFJlcXVlc3RPcHRpb25zKSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCB1cGRhdGVBcGlLZXkgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChhcGlLZXksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlZEZpZWxkcyA9IE9iamVjdC5hc3NpZ24oe30sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgICAgICBjb25zdCB7IHF1ZXJ5UGFyYW1ldGVycywgLi4ub3B0aW9ucyB9ID0gcmVxdWVzdE9wdGlvbnMgfHwge307XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHF1ZXJ5UGFyYW1ldGVycyA/IHsgcXVlcnlQYXJhbWV0ZXJzIH0gOiB7fTtcclxuICAgICAgICBjb25zdCBhcGlLZXlGaWVsZHMgPSBbXHJcbiAgICAgICAgICAgICdhY2wnLFxyXG4gICAgICAgICAgICAnaW5kZXhlcycsXHJcbiAgICAgICAgICAgICdyZWZlcmVycycsXHJcbiAgICAgICAgICAgICdyZXN0cmljdFNvdXJjZXMnLFxyXG4gICAgICAgICAgICAncXVlcnlQYXJhbWV0ZXJzJyxcclxuICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJyxcclxuICAgICAgICAgICAgJ21heFF1ZXJpZXNQZXJJUFBlckhvdXInLFxyXG4gICAgICAgICAgICAnbWF4SGl0c1BlclF1ZXJ5JyxcclxuICAgICAgICBdO1xyXG4gICAgICAgIC8vIENoZWNrIHRoYXQgYWxsIHRoZSBmaWVsZHMgcmV0cmlldmVkIHRocm91Z2ggZ2V0QXBpS2V5IGFyZSB0aGUgc2FtZSBhcyB0aGUgb25lcyB3ZSB3YW50ZWQgdG8gdXBkYXRlXHJcbiAgICAgICAgY29uc3QgaGFzQ2hhbmdlZCA9IChnZXRBcGlLZXlSZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModXBkYXRlZEZpZWxkcylcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKHVwZGF0ZWRGaWVsZCkgPT4gYXBpS2V5RmllbGRzLmluZGV4T2YodXBkYXRlZEZpZWxkKSAhPT0gLTEpXHJcbiAgICAgICAgICAgICAgICAuZXZlcnkodXBkYXRlZEZpZWxkID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBmaWVsZCBpcyBhbiBhcnJheSwgd2UgbmVlZCB0byBjaGVjayB0aGF0IHRoZXkgYXJlIHRoZSBzYW1lIGxlbmd0aCBhbmQgdGhhdCBhbGwgdGhlIHZhbHVlcyBhcmUgdGhlIHNhbWVcclxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGdldEFwaUtleVJlc3BvbnNlW3VwZGF0ZWRGaWVsZF0pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheSh1cGRhdGVkRmllbGRzW3VwZGF0ZWRGaWVsZF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2V0QXBpS2V5UmVzcG9uc2VBcnJheSA9IGdldEFwaUtleVJlc3BvbnNlW3VwZGF0ZWRGaWVsZF07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChnZXRBcGlLZXlSZXNwb25zZUFycmF5Lmxlbmd0aCA9PT0gdXBkYXRlZEZpZWxkc1t1cGRhdGVkRmllbGRdLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRBcGlLZXlSZXNwb25zZUFycmF5LmV2ZXJ5KCh2YWx1ZSwgaW5kZXgpID0+IHZhbHVlID09PSB1cGRhdGVkRmllbGRzW3VwZGF0ZWRGaWVsZF1baW5kZXhdKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QXBpS2V5UmVzcG9uc2VbdXBkYXRlZEZpZWxkXSA9PT0gdXBkYXRlZEZpZWxkc1t1cGRhdGVkRmllbGRdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHdhaXQgPSAoXywgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiBjcmVhdGVSZXRyeWFibGVQcm9taXNlKHJldHJ5ID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGdldEFwaUtleShiYXNlKShhcGlLZXksIHdhaXRSZXF1ZXN0T3B0aW9ucykudGhlbihnZXRBcGlLZXlSZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFzQ2hhbmdlZChnZXRBcGlLZXlSZXNwb25zZSkgPyBQcm9taXNlLnJlc29sdmUoKSA6IHJldHJ5KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5QdXQsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9rZXlzLyVzJywgYXBpS2V5KSxcclxuICAgICAgICAgICAgZGF0YSxcclxuICAgICAgICB9LCBvcHRpb25zKSwgd2FpdCk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCB3YWl0QXBwVGFzayA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHRhc2tJRCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlUmV0cnlhYmxlUHJvbWlzZShyZXRyeSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBnZXRBcHBUYXNrKGJhc2UpKHRhc2tJRCwgcmVxdWVzdE9wdGlvbnMpLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyAhPT0gJ3B1Ymxpc2hlZCcgPyByZXRyeSgpIDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGJhdGNoID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdHMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FpdCA9IChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB3YWl0VGFzayhiYXNlKShyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvYmF0Y2gnLCBiYXNlLmluZGV4TmFtZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RzLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgd2FpdCk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBicm93c2VPYmplY3RzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlQnJvd3NhYmxlUHJvbWlzZSh7XHJcbiAgICAgICAgICAgIHNob3VsZFN0b3A6IHJlc3BvbnNlID0+IHJlc3BvbnNlLmN1cnNvciA9PT0gdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAuLi5yZXF1ZXN0T3B0aW9ucyxcclxuICAgICAgICAgICAgcmVxdWVzdDogKGRhdGEpID0+IGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL2Jyb3dzZScsIGJhc2UuaW5kZXhOYW1lKSxcclxuICAgICAgICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSxcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGJyb3dzZVJ1bGVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoaXRzUGVyUGFnZTogMTAwMCxcclxuICAgICAgICAgICAgLi4ucmVxdWVzdE9wdGlvbnMsXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlQnJvd3NhYmxlUHJvbWlzZSh7XHJcbiAgICAgICAgICAgIHNob3VsZFN0b3A6IHJlc3BvbnNlID0+IHJlc3BvbnNlLmhpdHMubGVuZ3RoIDwgb3B0aW9ucy5oaXRzUGVyUGFnZSxcclxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICAgICAgcmVxdWVzdChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VhcmNoUnVsZXMoYmFzZSkoJycsIHsgLi4ub3B0aW9ucywgLi4uZGF0YSB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc3BvbnNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaXRzOiByZXNwb25zZS5oaXRzLm1hcChydWxlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhLG5vLXBhcmFtLXJlYXNzaWduXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgcnVsZS5faGlnaGxpZ2h0UmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ1bGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGJyb3dzZVN5bm9ueW1zID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoaXRzUGVyUGFnZTogMTAwMCxcclxuICAgICAgICAgICAgLi4ucmVxdWVzdE9wdGlvbnMsXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlQnJvd3NhYmxlUHJvbWlzZSh7XHJcbiAgICAgICAgICAgIHNob3VsZFN0b3A6IHJlc3BvbnNlID0+IHJlc3BvbnNlLmhpdHMubGVuZ3RoIDwgb3B0aW9ucy5oaXRzUGVyUGFnZSxcclxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICAgICAgcmVxdWVzdChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VhcmNoU3lub255bXMoYmFzZSkoJycsIHsgLi4ub3B0aW9ucywgLi4uZGF0YSB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc3BvbnNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaXRzOiByZXNwb25zZS5oaXRzLm1hcChzeW5vbnltID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhLG5vLXBhcmFtLXJlYXNzaWduXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc3lub255bS5faGlnaGxpZ2h0UmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN5bm9ueW07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGNodW5rZWRCYXRjaCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKGJvZGllcywgYWN0aW9uLCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgYmF0Y2hTaXplLCAuLi5vcHRpb25zIH0gPSByZXF1ZXN0T3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IHtcclxuICAgICAgICAgICAgdGFza0lEczogW10sXHJcbiAgICAgICAgICAgIG9iamVjdElEczogW10sXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBmb3JFYWNoQmF0Y2ggPSAobGFzdEluZGV4ID0gMCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9wcmVmZXItcmVhZG9ubHktdHlwZVxyXG4gICAgICAgICAgICBjb25zdCBib2RpZXNDaHVuayA9IFtdO1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9uby1sZXRcclxuICAgICAgICAgICAgbGV0IGluZGV4O1xyXG4gICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9uby1sb29wLXN0YXRlbWVudCAqL1xyXG4gICAgICAgICAgICBmb3IgKGluZGV4ID0gbGFzdEluZGV4OyBpbmRleCA8IGJvZGllcy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgICAgICAgICBib2RpZXNDaHVuay5wdXNoKGJvZGllc1tpbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJvZGllc0NodW5rLmxlbmd0aCA9PT0gKGJhdGNoU2l6ZSB8fCAxMDAwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChib2RpZXNDaHVuay5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBiYXRjaChiYXNlKShib2RpZXNDaHVuay5tYXAoYm9keSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBib2R5LFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSksIG9wdGlvbnMpLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLm9iamVjdElEcyA9IHJlc3BvbnNlLm9iamVjdElEcy5jb25jYXQocmVzLm9iamVjdElEcyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UudGFza0lEcy5wdXNoKHJlcy50YXNrSUQpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9yRWFjaEJhdGNoKGluZGV4KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGZvckVhY2hCYXRjaCgpLCAoY2h1bmtlZEJhdGNoUmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoY2h1bmtlZEJhdGNoUmVzcG9uc2UudGFza0lEcy5tYXAodGFza0lEID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB3YWl0VGFzayhiYXNlKSh0YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGNsZWFyT2JqZWN0cyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL2NsZWFyJywgYmFzZS5pbmRleE5hbWUpLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgKHJlc3BvbnNlLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHdhaXRUYXNrKGJhc2UpKHJlc3BvbnNlLnRhc2tJRCwgd2FpdFJlcXVlc3RPcHRpb25zKSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBjbGVhclJ1bGVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCB7IGZvcndhcmRUb1JlcGxpY2FzLCAuLi5vcHRpb25zIH0gPSByZXF1ZXN0T3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBjb25zdCBtYXBwZWRSZXF1ZXN0T3B0aW9ucyA9IGNyZWF0ZU1hcHBlZFJlcXVlc3RPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgICAgIGlmIChmb3J3YXJkVG9SZXBsaWNhcykge1xyXG4gICAgICAgICAgICBtYXBwZWRSZXF1ZXN0T3B0aW9ucy5xdWVyeVBhcmFtZXRlcnMuZm9yd2FyZFRvUmVwbGljYXMgPSAxOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL3J1bGVzL2NsZWFyJywgYmFzZS5pbmRleE5hbWUpLFxyXG4gICAgICAgIH0sIG1hcHBlZFJlcXVlc3RPcHRpb25zKSwgKHJlc3BvbnNlLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHdhaXRUYXNrKGJhc2UpKHJlc3BvbnNlLnRhc2tJRCwgd2FpdFJlcXVlc3RPcHRpb25zKSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBjbGVhclN5bm9ueW1zID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCB7IGZvcndhcmRUb1JlcGxpY2FzLCAuLi5vcHRpb25zIH0gPSByZXF1ZXN0T3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBjb25zdCBtYXBwZWRSZXF1ZXN0T3B0aW9ucyA9IGNyZWF0ZU1hcHBlZFJlcXVlc3RPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgICAgIGlmIChmb3J3YXJkVG9SZXBsaWNhcykge1xyXG4gICAgICAgICAgICBtYXBwZWRSZXF1ZXN0T3B0aW9ucy5xdWVyeVBhcmFtZXRlcnMuZm9yd2FyZFRvUmVwbGljYXMgPSAxOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL3N5bm9ueW1zL2NsZWFyJywgYmFzZS5pbmRleE5hbWUpLFxyXG4gICAgICAgIH0sIG1hcHBlZFJlcXVlc3RPcHRpb25zKSwgKHJlc3BvbnNlLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHdhaXRUYXNrKGJhc2UpKHJlc3BvbnNlLnRhc2tJRCwgd2FpdFJlcXVlc3RPcHRpb25zKSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBkZWxldGVCeSA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKGZpbHRlcnMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL2RlbGV0ZUJ5UXVlcnknLCBiYXNlLmluZGV4TmFtZSksXHJcbiAgICAgICAgICAgIGRhdGE6IGZpbHRlcnMsXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGRlbGV0ZUluZGV4ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uRGVsZXRlLFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvaW5kZXhlcy8lcycsIGJhc2UuaW5kZXhOYW1lKSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyksIChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB3YWl0VGFzayhiYXNlKShyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucykpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZGVsZXRlT2JqZWN0ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAob2JqZWN0SUQsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShkZWxldGVPYmplY3RzKGJhc2UpKFtvYmplY3RJRF0sIHJlcXVlc3RPcHRpb25zKS50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdGFza0lEOiByZXNwb25zZS50YXNrSURzWzBdIH07XHJcbiAgICAgICAgfSksIChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB3YWl0VGFzayhiYXNlKShyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucykpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZGVsZXRlT2JqZWN0cyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKG9iamVjdElEcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCBvYmplY3RzID0gb2JqZWN0SURzLm1hcChvYmplY3RJRCA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IG9iamVjdElEIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGNodW5rZWRCYXRjaChiYXNlKShvYmplY3RzLCBCYXRjaEFjdGlvbkVudW0uRGVsZXRlT2JqZWN0LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBkZWxldGVSdWxlID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAob2JqZWN0SUQsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBmb3J3YXJkVG9SZXBsaWNhcywgLi4ub3B0aW9ucyB9ID0gcmVxdWVzdE9wdGlvbnMgfHwge307XHJcbiAgICAgICAgY29uc3QgbWFwcGVkUmVxdWVzdE9wdGlvbnMgPSBjcmVhdGVNYXBwZWRSZXF1ZXN0T3B0aW9ucyhvcHRpb25zKTtcclxuICAgICAgICBpZiAoZm9yd2FyZFRvUmVwbGljYXMpIHtcclxuICAgICAgICAgICAgbWFwcGVkUmVxdWVzdE9wdGlvbnMucXVlcnlQYXJhbWV0ZXJzLmZvcndhcmRUb1JlcGxpY2FzID0gMTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5EZWxldGUsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL3J1bGVzLyVzJywgYmFzZS5pbmRleE5hbWUsIG9iamVjdElEKSxcclxuICAgICAgICB9LCBtYXBwZWRSZXF1ZXN0T3B0aW9ucyksIChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB3YWl0VGFzayhiYXNlKShyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucykpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZGVsZXRlU3lub255bSA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKG9iamVjdElELCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgZm9yd2FyZFRvUmVwbGljYXMsIC4uLm9wdGlvbnMgfSA9IHJlcXVlc3RPcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IG1hcHBlZFJlcXVlc3RPcHRpb25zID0gY3JlYXRlTWFwcGVkUmVxdWVzdE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKGZvcndhcmRUb1JlcGxpY2FzKSB7XHJcbiAgICAgICAgICAgIG1hcHBlZFJlcXVlc3RPcHRpb25zLnF1ZXJ5UGFyYW1ldGVycy5mb3J3YXJkVG9SZXBsaWNhcyA9IDE7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uRGVsZXRlLFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvaW5kZXhlcy8lcy9zeW5vbnltcy8lcycsIGJhc2UuaW5kZXhOYW1lLCBvYmplY3RJRCksXHJcbiAgICAgICAgfSwgbWFwcGVkUmVxdWVzdE9wdGlvbnMpLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGV4aXN0cyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGdldFNldHRpbmdzKGJhc2UpKHJlcXVlc3RPcHRpb25zKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB0cnVlKVxyXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3Iuc3RhdHVzICE9PSA0MDQpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGZpbmRBbnN3ZXJzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocXVlcnksIHF1ZXJ5TGFuZ3VhZ2VzLCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2Fuc3dlcnMvJXMvcHJlZGljdGlvbicsIGJhc2UuaW5kZXhOYW1lKSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcXVlcnksXHJcbiAgICAgICAgICAgICAgICBxdWVyeUxhbmd1YWdlcyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2FjaGVhYmxlOiB0cnVlLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGZpbmRPYmplY3QgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChjYWxsYmFjaywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCB7IHF1ZXJ5LCBwYWdpbmF0ZSwgLi4ub3B0aW9ucyB9ID0gcmVxdWVzdE9wdGlvbnMgfHwge307XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvbm8tbGV0XHJcbiAgICAgICAgbGV0IHBhZ2UgPSAwO1xyXG4gICAgICAgIGNvbnN0IGZvckVhY2hQYWdlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VhcmNoKGJhc2UpKHF1ZXJ5IHx8ICcnLCB7IC4uLm9wdGlvbnMsIHBhZ2UgfSkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvbm8tbG9vcC1zdGF0ZW1lbnRcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW3Bvc2l0aW9uLCBoaXRdIG9mIE9iamVjdC5lbnRyaWVzKHJlc3VsdC5oaXRzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcm9taXNlL25vLWNhbGxiYWNrLWluLXByb21pc2VcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2soaGl0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0OiBoaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcGFyc2VJbnQocG9zaXRpb24sIDEwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcGFnZSsrO1xyXG4gICAgICAgICAgICAgICAgLy8gcGFnaW5hdGUgaWYgb3B0aW9uIHdhcyBzZXQgYW5kIGhhcyBuZXh0IHBhZ2VcclxuICAgICAgICAgICAgICAgIGlmIChwYWdpbmF0ZSA9PT0gZmFsc2UgfHwgcGFnZSA+PSByZXN1bHQubmJQYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZU9iamVjdE5vdEZvdW5kRXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmb3JFYWNoUGFnZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBmb3JFYWNoUGFnZSgpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0T2JqZWN0ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAob2JqZWN0SUQsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5HZXQsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzLyVzJywgYmFzZS5pbmRleE5hbWUsIG9iamVjdElEKSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXRPYmplY3RQb3NpdGlvbiA9ICgpID0+IHtcclxuICAgIHJldHVybiAoc2VhcmNoUmVzcG9uc2UsIG9iamVjdElEKSA9PiB7XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvbm8tbG9vcC1zdGF0ZW1lbnRcclxuICAgICAgICBmb3IgKGNvbnN0IFtwb3NpdGlvbiwgaGl0XSBvZiBPYmplY3QuZW50cmllcyhzZWFyY2hSZXNwb25zZS5oaXRzKSkge1xyXG4gICAgICAgICAgICBpZiAoaGl0Lm9iamVjdElEID09PSBvYmplY3RJRCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHBvc2l0aW9uLCAxMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0T2JqZWN0cyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKG9iamVjdElEcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCB7IGF0dHJpYnV0ZXNUb1JldHJpZXZlLCAuLi5vcHRpb25zIH0gPSByZXF1ZXN0T3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBjb25zdCByZXF1ZXN0cyA9IG9iamVjdElEcy5tYXAob2JqZWN0SUQgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgaW5kZXhOYW1lOiBiYXNlLmluZGV4TmFtZSxcclxuICAgICAgICAgICAgICAgIG9iamVjdElELFxyXG4gICAgICAgICAgICAgICAgLi4uKGF0dHJpYnV0ZXNUb1JldHJpZXZlID8geyBhdHRyaWJ1dGVzVG9SZXRyaWV2ZSB9IDoge30pLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogJzEvaW5kZXhlcy8qL29iamVjdHMnLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0cyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LCBvcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGdldFJ1bGUgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChvYmplY3RJRCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLkdldCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvcnVsZXMvJXMnLCBiYXNlLmluZGV4TmFtZSwgb2JqZWN0SUQpLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGdldFNldHRpbmdzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLkdldCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvc2V0dGluZ3MnLCBiYXNlLmluZGV4TmFtZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGdldFZlcnNpb246IDIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0U3lub255bSA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKG9iamVjdElELCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoYDEvaW5kZXhlcy8lcy9zeW5vbnltcy8lc2AsIGJhc2UuaW5kZXhOYW1lLCBvYmplY3RJRCksXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0VGFzayA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHRhc2tJRCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLkdldCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvdGFzay8lcycsIGJhc2UuaW5kZXhOYW1lLCB0YXNrSUQudG9TdHJpbmcoKSksXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgcGFydGlhbFVwZGF0ZU9iamVjdCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKG9iamVjdCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKHBhcnRpYWxVcGRhdGVPYmplY3RzKGJhc2UpKFtvYmplY3RdLCByZXF1ZXN0T3B0aW9ucykudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3RJRDogcmVzcG9uc2Uub2JqZWN0SURzWzBdLFxyXG4gICAgICAgICAgICAgICAgdGFza0lEOiByZXNwb25zZS50YXNrSURzWzBdLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHBhcnRpYWxVcGRhdGVPYmplY3RzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAob2JqZWN0cywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCB7IGNyZWF0ZUlmTm90RXhpc3RzLCAuLi5vcHRpb25zIH0gPSByZXF1ZXN0T3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBjb25zdCBhY3Rpb24gPSBjcmVhdGVJZk5vdEV4aXN0c1xyXG4gICAgICAgICAgICA/IEJhdGNoQWN0aW9uRW51bS5QYXJ0aWFsVXBkYXRlT2JqZWN0XHJcbiAgICAgICAgICAgIDogQmF0Y2hBY3Rpb25FbnVtLlBhcnRpYWxVcGRhdGVPYmplY3ROb0NyZWF0ZTtcclxuICAgICAgICByZXR1cm4gY2h1bmtlZEJhdGNoKGJhc2UpKG9iamVjdHMsIGFjdGlvbiwgb3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCByZXBsYWNlQWxsT2JqZWN0cyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKG9iamVjdHMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBzYWZlLCBhdXRvR2VuZXJhdGVPYmplY3RJRElmTm90RXhpc3QsIGJhdGNoU2l6ZSwgLi4ub3B0aW9ucyB9ID0gcmVxdWVzdE9wdGlvbnMgfHwge307XHJcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uID0gKGZyb20sIHRvLCB0eXBlLCBvcGVyYXRpb25SZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvaW5kZXhlcy8lcy9vcGVyYXRpb24nLCBmcm9tKSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb246IHR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb246IHRvLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSwgb3BlcmF0aW9uUmVxdWVzdE9wdGlvbnMpLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHJhbmRvbVN1ZmZpeCA9IE1hdGgucmFuZG9tKClcclxuICAgICAgICAgICAgLnRvU3RyaW5nKDM2KVxyXG4gICAgICAgICAgICAuc3Vic3RyaW5nKDcpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBvcmFyeUluZGV4TmFtZSA9IGAke2Jhc2UuaW5kZXhOYW1lfV90bXBfJHtyYW5kb21TdWZmaXh9YDtcclxuICAgICAgICBjb25zdCBzYXZlT2JqZWN0c0luVGVtcG9yYXJ5ID0gc2F2ZU9iamVjdHMoe1xyXG4gICAgICAgICAgICBhcHBJZDogYmFzZS5hcHBJZCxcclxuICAgICAgICAgICAgdHJhbnNwb3J0ZXI6IGJhc2UudHJhbnNwb3J0ZXIsXHJcbiAgICAgICAgICAgIGluZGV4TmFtZTogdGVtcG9yYXJ5SW5kZXhOYW1lLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0LCBmdW5jdGlvbmFsL25vLWxldCwgZnVuY3Rpb25hbC9wcmVmZXItcmVhZG9ubHktdHlwZVxyXG4gICAgICAgIGxldCByZXNwb25zZXMgPSBbXTtcclxuICAgICAgICBjb25zdCBjb3B5V2FpdGFibGVQcm9taXNlID0gb3BlcmF0aW9uKGJhc2UuaW5kZXhOYW1lLCB0ZW1wb3JhcnlJbmRleE5hbWUsICdjb3B5Jywge1xyXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxyXG4gICAgICAgICAgICBzY29wZTogWydzZXR0aW5ncycsICdzeW5vbnltcycsICdydWxlcyddLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgcmVzcG9uc2VzLnB1c2goY29weVdhaXRhYmxlUHJvbWlzZSk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gKHNhZmVcclxuICAgICAgICAgICAgPyBjb3B5V2FpdGFibGVQcm9taXNlLndhaXQob3B0aW9ucylcclxuICAgICAgICAgICAgOiBjb3B5V2FpdGFibGVQcm9taXNlKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNhdmVPYmplY3RzV2FpdGFibGVQcm9taXNlID0gc2F2ZU9iamVjdHNJblRlbXBvcmFyeShvYmplY3RzLCB7XHJcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxyXG4gICAgICAgICAgICAgICAgYXV0b0dlbmVyYXRlT2JqZWN0SURJZk5vdEV4aXN0LFxyXG4gICAgICAgICAgICAgICAgYmF0Y2hTaXplLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICAgICAgcmVzcG9uc2VzLnB1c2goc2F2ZU9iamVjdHNXYWl0YWJsZVByb21pc2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2FmZSA/IHNhdmVPYmplY3RzV2FpdGFibGVQcm9taXNlLndhaXQob3B0aW9ucykgOiBzYXZlT2JqZWN0c1dhaXRhYmxlUHJvbWlzZTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vdmVXYWl0YWJsZVByb21pc2UgPSBvcGVyYXRpb24odGVtcG9yYXJ5SW5kZXhOYW1lLCBiYXNlLmluZGV4TmFtZSwgJ21vdmUnLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICAgICAgcmVzcG9uc2VzLnB1c2gobW92ZVdhaXRhYmxlUHJvbWlzZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBzYWZlID8gbW92ZVdhaXRhYmxlUHJvbWlzZS53YWl0KG9wdGlvbnMpIDogbW92ZVdhaXRhYmxlUHJvbWlzZTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiBQcm9taXNlLmFsbChyZXNwb25zZXMpKVxyXG4gICAgICAgICAgICAudGhlbigoW2NvcHlSZXNwb25zZSwgc2F2ZU9iamVjdHNSZXNwb25zZSwgbW92ZVJlc3BvbnNlXSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0SURzOiBzYXZlT2JqZWN0c1Jlc3BvbnNlLm9iamVjdElEcyxcclxuICAgICAgICAgICAgICAgIHRhc2tJRHM6IFtjb3B5UmVzcG9uc2UudGFza0lELCAuLi5zYXZlT2JqZWN0c1Jlc3BvbnNlLnRhc2tJRHMsIG1vdmVSZXNwb25zZS50YXNrSURdLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgIC8vIENsZWFuIHVwIHRlbXBvcmFyeSBpbmRleCBpZiB0aGVyZSdzIGFuIGVycm9yXHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcm9taXNlL25vLW5lc3RpbmdcclxuICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZUluZGV4KHtcclxuICAgICAgICAgICAgICAgIGFwcElkOiBiYXNlLmFwcElkLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNwb3J0ZXI6IGJhc2UudHJhbnNwb3J0ZXIsXHJcbiAgICAgICAgICAgICAgICBpbmRleE5hbWU6IHRlbXBvcmFyeUluZGV4TmFtZSxcclxuICAgICAgICAgICAgfSkoKVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIElnbm9yZSBkZWxldGUgZXJyb3JzXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShyZXN1bHQsIChfLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHJlc3BvbnNlcy5tYXAocmVzcG9uc2UgPT4gcmVzcG9uc2Uud2FpdCh3YWl0UmVxdWVzdE9wdGlvbnMpKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCByZXBsYWNlQWxsUnVsZXMgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChydWxlcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gc2F2ZVJ1bGVzKGJhc2UpKHJ1bGVzLCB7XHJcbiAgICAgICAgICAgIC4uLnJlcXVlc3RPcHRpb25zLFxyXG4gICAgICAgICAgICBjbGVhckV4aXN0aW5nUnVsZXM6IHRydWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCByZXBsYWNlQWxsU3lub255bXMgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChzeW5vbnltcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gc2F2ZVN5bm9ueW1zKGJhc2UpKHN5bm9ueW1zLCB7XHJcbiAgICAgICAgICAgIC4uLnJlcXVlc3RPcHRpb25zLFxyXG4gICAgICAgICAgICBjbGVhckV4aXN0aW5nU3lub255bXM6IHRydWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBzYXZlT2JqZWN0ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAob2JqZWN0LCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2Uoc2F2ZU9iamVjdHMoYmFzZSkoW29iamVjdF0sIHJlcXVlc3RPcHRpb25zKS50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdElEOiByZXNwb25zZS5vYmplY3RJRHNbMF0sXHJcbiAgICAgICAgICAgICAgICB0YXNrSUQ6IHJlc3BvbnNlLnRhc2tJRHNbMF0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSksIChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB3YWl0VGFzayhiYXNlKShyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucykpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3Qgc2F2ZU9iamVjdHMgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChvYmplY3RzLCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgYXV0b0dlbmVyYXRlT2JqZWN0SURJZk5vdEV4aXN0LCAuLi5vcHRpb25zIH0gPSByZXF1ZXN0T3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBjb25zdCBhY3Rpb24gPSBhdXRvR2VuZXJhdGVPYmplY3RJRElmTm90RXhpc3RcclxuICAgICAgICAgICAgPyBCYXRjaEFjdGlvbkVudW0uQWRkT2JqZWN0XHJcbiAgICAgICAgICAgIDogQmF0Y2hBY3Rpb25FbnVtLlVwZGF0ZU9iamVjdDtcclxuICAgICAgICBpZiAoYWN0aW9uID09PSBCYXRjaEFjdGlvbkVudW0uVXBkYXRlT2JqZWN0KSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL25vLWxvb3Atc3RhdGVtZW50XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb2JqZWN0IG9mIG9iamVjdHMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3Qub2JqZWN0SUQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoUHJvbWlzZS5yZWplY3QoY3JlYXRlTWlzc2luZ09iamVjdElERXJyb3IoKSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjaHVua2VkQmF0Y2goYmFzZSkob2JqZWN0cywgYWN0aW9uLCBvcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNhdmVSdWxlID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocnVsZSwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gc2F2ZVJ1bGVzKGJhc2UpKFtydWxlXSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3Qgc2F2ZVJ1bGVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocnVsZXMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBmb3J3YXJkVG9SZXBsaWNhcywgY2xlYXJFeGlzdGluZ1J1bGVzLCAuLi5vcHRpb25zIH0gPSByZXF1ZXN0T3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBjb25zdCBtYXBwZWRSZXF1ZXN0T3B0aW9ucyA9IGNyZWF0ZU1hcHBlZFJlcXVlc3RPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgICAgIGlmIChmb3J3YXJkVG9SZXBsaWNhcykge1xyXG4gICAgICAgICAgICBtYXBwZWRSZXF1ZXN0T3B0aW9ucy5xdWVyeVBhcmFtZXRlcnMuZm9yd2FyZFRvUmVwbGljYXMgPSAxOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNsZWFyRXhpc3RpbmdSdWxlcykge1xyXG4gICAgICAgICAgICBtYXBwZWRSZXF1ZXN0T3B0aW9ucy5xdWVyeVBhcmFtZXRlcnMuY2xlYXJFeGlzdGluZ1J1bGVzID0gMTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvaW5kZXhlcy8lcy9ydWxlcy9iYXRjaCcsIGJhc2UuaW5kZXhOYW1lKSxcclxuICAgICAgICAgICAgZGF0YTogcnVsZXMsXHJcbiAgICAgICAgfSwgbWFwcGVkUmVxdWVzdE9wdGlvbnMpLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNhdmVTeW5vbnltID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoc3lub255bSwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gc2F2ZVN5bm9ueW1zKGJhc2UpKFtzeW5vbnltXSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3Qgc2F2ZVN5bm9ueW1zID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoc3lub255bXMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBmb3J3YXJkVG9SZXBsaWNhcywgY2xlYXJFeGlzdGluZ1N5bm9ueW1zLCByZXBsYWNlRXhpc3RpbmdTeW5vbnltcywgLi4ub3B0aW9ucyB9ID0gcmVxdWVzdE9wdGlvbnMgfHwge307XHJcbiAgICAgICAgY29uc3QgbWFwcGVkUmVxdWVzdE9wdGlvbnMgPSBjcmVhdGVNYXBwZWRSZXF1ZXN0T3B0aW9ucyhvcHRpb25zKTtcclxuICAgICAgICBpZiAoZm9yd2FyZFRvUmVwbGljYXMpIHtcclxuICAgICAgICAgICAgbWFwcGVkUmVxdWVzdE9wdGlvbnMucXVlcnlQYXJhbWV0ZXJzLmZvcndhcmRUb1JlcGxpY2FzID0gMTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXBsYWNlRXhpc3RpbmdTeW5vbnltcyB8fCBjbGVhckV4aXN0aW5nU3lub255bXMpIHtcclxuICAgICAgICAgICAgbWFwcGVkUmVxdWVzdE9wdGlvbnMucXVlcnlQYXJhbWV0ZXJzLnJlcGxhY2VFeGlzdGluZ1N5bm9ueW1zID0gMTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvaW5kZXhlcy8lcy9zeW5vbnltcy9iYXRjaCcsIGJhc2UuaW5kZXhOYW1lKSxcclxuICAgICAgICAgICAgZGF0YTogc3lub255bXMsXHJcbiAgICAgICAgfSwgbWFwcGVkUmVxdWVzdE9wdGlvbnMpLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNlYXJjaCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHF1ZXJ5LCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvcXVlcnknLCBiYXNlLmluZGV4TmFtZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjYWNoZWFibGU6IHRydWUsXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3Qgc2VhcmNoRm9yRmFjZXRWYWx1ZXMgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChmYWNldE5hbWUsIGZhY2V0UXVlcnksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvaW5kZXhlcy8lcy9mYWNldHMvJXMvcXVlcnknLCBiYXNlLmluZGV4TmFtZSwgZmFjZXROYW1lKSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgZmFjZXRRdWVyeSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2FjaGVhYmxlOiB0cnVlLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNlYXJjaFJ1bGVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocXVlcnksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvaW5kZXhlcy8lcy9ydWxlcy9zZWFyY2gnLCBiYXNlLmluZGV4TmFtZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNlYXJjaFN5bm9ueW1zID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocXVlcnksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvaW5kZXhlcy8lcy9zeW5vbnltcy9zZWFyY2gnLCBiYXNlLmluZGV4TmFtZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNldFNldHRpbmdzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoc2V0dGluZ3MsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBmb3J3YXJkVG9SZXBsaWNhcywgLi4ub3B0aW9ucyB9ID0gcmVxdWVzdE9wdGlvbnMgfHwge307XHJcbiAgICAgICAgY29uc3QgbWFwcGVkUmVxdWVzdE9wdGlvbnMgPSBjcmVhdGVNYXBwZWRSZXF1ZXN0T3B0aW9ucyhvcHRpb25zKTtcclxuICAgICAgICBpZiAoZm9yd2FyZFRvUmVwbGljYXMpIHtcclxuICAgICAgICAgICAgbWFwcGVkUmVxdWVzdE9wdGlvbnMucXVlcnlQYXJhbWV0ZXJzLmZvcndhcmRUb1JlcGxpY2FzID0gMTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5QdXQsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL3NldHRpbmdzJywgYmFzZS5pbmRleE5hbWUpLFxyXG4gICAgICAgICAgICBkYXRhOiBzZXR0aW5ncyxcclxuICAgICAgICB9LCBtYXBwZWRSZXF1ZXN0T3B0aW9ucyksIChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB3YWl0VGFzayhiYXNlKShyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucykpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3Qgd2FpdFRhc2sgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuICh0YXNrSUQsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVJldHJ5YWJsZVByb21pc2UocmV0cnkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2V0VGFzayhiYXNlKSh0YXNrSUQsIHJlcXVlc3RPcHRpb25zKS50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMgIT09ICdwdWJsaXNoZWQnID8gcmV0cnkoKSA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBBcGlLZXlBQ0xFbnVtID0ge1xyXG4gICAgQWRkT2JqZWN0OiAnYWRkT2JqZWN0JyxcclxuICAgIEFuYWx5dGljczogJ2FuYWx5dGljcycsXHJcbiAgICBCcm93c2VyOiAnYnJvd3NlJyxcclxuICAgIERlbGV0ZUluZGV4OiAnZGVsZXRlSW5kZXgnLFxyXG4gICAgRGVsZXRlT2JqZWN0OiAnZGVsZXRlT2JqZWN0JyxcclxuICAgIEVkaXRTZXR0aW5nczogJ2VkaXRTZXR0aW5ncycsXHJcbiAgICBJbmZlcmVuY2U6ICdpbmZlcmVuY2UnLFxyXG4gICAgTGlzdEluZGV4ZXM6ICdsaXN0SW5kZXhlcycsXHJcbiAgICBMb2dzOiAnbG9ncycsXHJcbiAgICBQZXJzb25hbGl6YXRpb246ICdwZXJzb25hbGl6YXRpb24nLFxyXG4gICAgUmVjb21tZW5kYXRpb246ICdyZWNvbW1lbmRhdGlvbicsXHJcbiAgICBTZWFyY2g6ICdzZWFyY2gnLFxyXG4gICAgU2VlVW5yZXRyaWV2YWJsZUF0dHJpYnV0ZXM6ICdzZWVVbnJldHJpZXZhYmxlQXR0cmlidXRlcycsXHJcbiAgICBTZXR0aW5nczogJ3NldHRpbmdzJyxcclxuICAgIFVzYWdlOiAndXNhZ2UnLFxyXG59O1xuXG5jb25zdCBCYXRjaEFjdGlvbkVudW0gPSB7XHJcbiAgICBBZGRPYmplY3Q6ICdhZGRPYmplY3QnLFxyXG4gICAgVXBkYXRlT2JqZWN0OiAndXBkYXRlT2JqZWN0JyxcclxuICAgIFBhcnRpYWxVcGRhdGVPYmplY3Q6ICdwYXJ0aWFsVXBkYXRlT2JqZWN0JyxcclxuICAgIFBhcnRpYWxVcGRhdGVPYmplY3ROb0NyZWF0ZTogJ3BhcnRpYWxVcGRhdGVPYmplY3ROb0NyZWF0ZScsXHJcbiAgICBEZWxldGVPYmplY3Q6ICdkZWxldGVPYmplY3QnLFxyXG4gICAgRGVsZXRlSW5kZXg6ICdkZWxldGUnLFxyXG4gICAgQ2xlYXJJbmRleDogJ2NsZWFyJyxcclxufTtcblxuY29uc3QgU2NvcGVFbnVtID0ge1xyXG4gICAgU2V0dGluZ3M6ICdzZXR0aW5ncycsXHJcbiAgICBTeW5vbnltczogJ3N5bm9ueW1zJyxcclxuICAgIFJ1bGVzOiAncnVsZXMnLFxyXG59O1xuXG5jb25zdCBTdHJhdGVneUVudW0gPSB7XHJcbiAgICBOb25lOiAnbm9uZScsXHJcbiAgICBTdG9wSWZFbm91Z2hNYXRjaGVzOiAnc3RvcElmRW5vdWdoTWF0Y2hlcycsXHJcbn07XG5cbmNvbnN0IFN5bm9ueW1FbnVtID0ge1xyXG4gICAgU3lub255bTogJ3N5bm9ueW0nLFxyXG4gICAgT25lV2F5U3lub255bTogJ29uZVdheVN5bm9ueW0nLFxyXG4gICAgQWx0Q29ycmVjdGlvbjE6ICdhbHRDb3JyZWN0aW9uMScsXHJcbiAgICBBbHRDb3JyZWN0aW9uMjogJ2FsdENvcnJlY3Rpb24yJyxcclxuICAgIFBsYWNlaG9sZGVyOiAncGxhY2Vob2xkZXInLFxyXG59O1xuXG5leHBvcnQgeyBBcGlLZXlBQ0xFbnVtLCBCYXRjaEFjdGlvbkVudW0sIFNjb3BlRW51bSwgU3RyYXRlZ3lFbnVtLCBTeW5vbnltRW51bSwgYWRkQXBpS2V5LCBhc3NpZ25Vc2VySUQsIGFzc2lnblVzZXJJRHMsIGJhdGNoLCBicm93c2VPYmplY3RzLCBicm93c2VSdWxlcywgYnJvd3NlU3lub255bXMsIGNodW5rZWRCYXRjaCwgY2xlYXJEaWN0aW9uYXJ5RW50cmllcywgY2xlYXJPYmplY3RzLCBjbGVhclJ1bGVzLCBjbGVhclN5bm9ueW1zLCBjb3B5SW5kZXgsIGNvcHlSdWxlcywgY29weVNldHRpbmdzLCBjb3B5U3lub255bXMsIGNyZWF0ZUJyb3dzYWJsZVByb21pc2UsIGNyZWF0ZU1pc3NpbmdPYmplY3RJREVycm9yLCBjcmVhdGVPYmplY3ROb3RGb3VuZEVycm9yLCBjcmVhdGVTZWFyY2hDbGllbnQsIGNyZWF0ZVZhbGlkVW50aWxOb3RGb3VuZEVycm9yLCBjdXN0b21SZXF1ZXN0LCBkZWxldGVBcGlLZXksIGRlbGV0ZUJ5LCBkZWxldGVEaWN0aW9uYXJ5RW50cmllcywgZGVsZXRlSW5kZXgsIGRlbGV0ZU9iamVjdCwgZGVsZXRlT2JqZWN0cywgZGVsZXRlUnVsZSwgZGVsZXRlU3lub255bSwgZXhpc3RzLCBmaW5kQW5zd2VycywgZmluZE9iamVjdCwgZ2VuZXJhdGVTZWN1cmVkQXBpS2V5LCBnZXRBcGlLZXksIGdldEFwcFRhc2ssIGdldERpY3Rpb25hcnlTZXR0aW5ncywgZ2V0TG9ncywgZ2V0T2JqZWN0LCBnZXRPYmplY3RQb3NpdGlvbiwgZ2V0T2JqZWN0cywgZ2V0UnVsZSwgZ2V0U2VjdXJlZEFwaUtleVJlbWFpbmluZ1ZhbGlkaXR5LCBnZXRTZXR0aW5ncywgZ2V0U3lub255bSwgZ2V0VGFzaywgZ2V0VG9wVXNlcklEcywgZ2V0VXNlcklELCBoYXNQZW5kaW5nTWFwcGluZ3MsIGluaXRJbmRleCwgbGlzdEFwaUtleXMsIGxpc3RDbHVzdGVycywgbGlzdEluZGljZXMsIGxpc3RVc2VySURzLCBtb3ZlSW5kZXgsIG11bHRpcGxlQmF0Y2gsIG11bHRpcGxlR2V0T2JqZWN0cywgbXVsdGlwbGVRdWVyaWVzLCBtdWx0aXBsZVNlYXJjaEZvckZhY2V0VmFsdWVzLCBwYXJ0aWFsVXBkYXRlT2JqZWN0LCBwYXJ0aWFsVXBkYXRlT2JqZWN0cywgcmVtb3ZlVXNlcklELCByZXBsYWNlQWxsT2JqZWN0cywgcmVwbGFjZUFsbFJ1bGVzLCByZXBsYWNlQWxsU3lub255bXMsIHJlcGxhY2VEaWN0aW9uYXJ5RW50cmllcywgcmVzdG9yZUFwaUtleSwgc2F2ZURpY3Rpb25hcnlFbnRyaWVzLCBzYXZlT2JqZWN0LCBzYXZlT2JqZWN0cywgc2F2ZVJ1bGUsIHNhdmVSdWxlcywgc2F2ZVN5bm9ueW0sIHNhdmVTeW5vbnltcywgc2VhcmNoLCBzZWFyY2hEaWN0aW9uYXJ5RW50cmllcywgc2VhcmNoRm9yRmFjZXRWYWx1ZXMsIHNlYXJjaFJ1bGVzLCBzZWFyY2hTeW5vbnltcywgc2VhcmNoVXNlcklEcywgc2V0RGljdGlvbmFyeVNldHRpbmdzLCBzZXRTZXR0aW5ncywgdXBkYXRlQXBpS2V5LCB3YWl0QXBwVGFzaywgd2FpdFRhc2sgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/client-search/dist/client-search.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/events/events.js":
/*!************************************************!*\
  !*** ./node_modules/@algolia/events/events.js ***!
  \************************************************/
/***/ ((module) => {

eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\n// EventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvZXZlbnRzL2V2ZW50cy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEIsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsU0FBUztBQUN6QjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsSUFBSTtBQUNKLHFCQUFxQixRQUFRO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3BlYy1sb2dpYy1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AYWxnb2xpYS9ldmVudHMvZXZlbnRzLmpzP2M1ZGMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgdGhpcy5fZXZlbnRzID0gdGhpcy5fZXZlbnRzIHx8IHt9O1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xufVxubW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuLy8gRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG5FdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbihuKSB7XG4gIGlmICghaXNOdW1iZXIobikgfHwgbiA8IDAgfHwgaXNOYU4obikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCduIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBlciwgaGFuZGxlciwgbGVuLCBhcmdzLCBpLCBsaXN0ZW5lcnM7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgdGhpcy5fZXZlbnRzID0ge307XG5cbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuICBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xuICAgIGlmICghdGhpcy5fZXZlbnRzLmVycm9yIHx8XG4gICAgICAgIChpc09iamVjdCh0aGlzLl9ldmVudHMuZXJyb3IpICYmICF0aGlzLl9ldmVudHMuZXJyb3IubGVuZ3RoKSkge1xuICAgICAgZXIgPSBhcmd1bWVudHNbMV07XG4gICAgICBpZiAoZXIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEF0IGxlYXN0IGdpdmUgc29tZSBraW5kIG9mIGNvbnRleHQgdG8gdGhlIHVzZXJcbiAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkIFwiZXJyb3JcIiBldmVudC4gKCcgKyBlciArICcpJyk7XG4gICAgICAgIGVyci5jb250ZXh0ID0gZXI7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBoYW5kbGVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc1VuZGVmaW5lZChoYW5kbGVyKSlcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIC8vIGZhc3QgY2FzZXNcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xuICAgICAgICBicmVhaztcbiAgICAgIC8vIHNsb3dlclxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICAgIGhhbmRsZXIuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGhhbmRsZXIpKSB7XG4gICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgbGlzdGVuZXJzID0gaGFuZGxlci5zbGljZSgpO1xuICAgIGxlbiA9IGxpc3RlbmVycy5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKVxuICAgICAgbGlzdGVuZXJzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIG07XG5cbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXG4gIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG4gIC8vIGFkZGluZyBpdCB0byB0aGUgbGlzdGVuZXJzLCBmaXJzdCBlbWl0IFwibmV3TGlzdGVuZXJcIi5cbiAgaWYgKHRoaXMuX2V2ZW50cy5uZXdMaXN0ZW5lcilcbiAgICB0aGlzLmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSxcbiAgICAgICAgICAgICAgaXNGdW5jdGlvbihsaXN0ZW5lci5saXN0ZW5lcikgP1xuICAgICAgICAgICAgICBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjtcbiAgZWxzZSBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSlcbiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdLnB1c2gobGlzdGVuZXIpO1xuICBlbHNlXG4gICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gW3RoaXMuX2V2ZW50c1t0eXBlXSwgbGlzdGVuZXJdO1xuXG4gIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG4gIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pICYmICF0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkKSB7XG4gICAgaWYgKCFpc1VuZGVmaW5lZCh0aGlzLl9tYXhMaXN0ZW5lcnMpKSB7XG4gICAgICBtID0gdGhpcy5fbWF4TGlzdGVuZXJzO1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gICAgfVxuXG4gICAgaWYgKG0gJiYgbSA+IDAgJiYgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCA+IG0pIHtcbiAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQgPSB0cnVlO1xuICAgICAgY29uc29sZS5lcnJvcignKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgJyArXG4gICAgICAgICAgICAgICAgICAgICdsZWFrIGRldGVjdGVkLiAlZCBsaXN0ZW5lcnMgYWRkZWQuICcgK1xuICAgICAgICAgICAgICAgICAgICAnVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQuJyxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCk7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUudHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gbm90IHN1cHBvcnRlZCBpbiBJRSAxMFxuICAgICAgICBjb25zb2xlLnRyYWNlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIHZhciBmaXJlZCA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIGcoKSB7XG4gICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBnKTtcblxuICAgIGlmICghZmlyZWQpIHtcbiAgICAgIGZpcmVkID0gdHJ1ZTtcbiAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG5cbiAgZy5saXN0ZW5lciA9IGxpc3RlbmVyO1xuICB0aGlzLm9uKHR5cGUsIGcpO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gZW1pdHMgYSAncmVtb3ZlTGlzdGVuZXInIGV2ZW50IGlmZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWRcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgbGlzdCwgcG9zaXRpb24sIGxlbmd0aCwgaTtcblxuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICByZXR1cm4gdGhpcztcblxuICBsaXN0ID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuICBsZW5ndGggPSBsaXN0Lmxlbmd0aDtcbiAgcG9zaXRpb24gPSAtMTtcblxuICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHxcbiAgICAgIChpc0Z1bmN0aW9uKGxpc3QubGlzdGVuZXIpICYmIGxpc3QubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilcbiAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0ZW5lcik7XG5cbiAgfSBlbHNlIGlmIChpc09iamVjdChsaXN0KSkge1xuICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tID4gMDspIHtcbiAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fFxuICAgICAgICAgIChsaXN0W2ldLmxpc3RlbmVyICYmIGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICByZXR1cm4gdGhpcztcblxuICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgbGlzdC5sZW5ndGggPSAwO1xuICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGlzdC5zcGxpY2UocG9zaXRpb24sIDEpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIGtleSwgbGlzdGVuZXJzO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHJldHVybiB0aGlzO1xuXG4gIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgaWYgKCF0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIGVsc2UgaWYgKHRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICBmb3IgKGtleSBpbiB0aGlzLl9ldmVudHMpIHtcbiAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICB9XG4gICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXJzKSkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzKTtcbiAgfSBlbHNlIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAvLyBMSUZPIG9yZGVyXG4gICAgd2hpbGUgKGxpc3RlbmVycy5sZW5ndGgpXG4gICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyc1tsaXN0ZW5lcnMubGVuZ3RoIC0gMV0pO1xuICB9XG4gIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIHJldDtcbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICByZXQgPSBbXTtcbiAgZWxzZSBpZiAoaXNGdW5jdGlvbih0aGlzLl9ldmVudHNbdHlwZV0pKVxuICAgIHJldCA9IFt0aGlzLl9ldmVudHNbdHlwZV1dO1xuICBlbHNlXG4gICAgcmV0ID0gdGhpcy5fZXZlbnRzW3R5cGVdLnNsaWNlKCk7XG4gIHJldHVybiByZXQ7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbih0eXBlKSB7XG4gIGlmICh0aGlzLl9ldmVudHMpIHtcbiAgICB2YXIgZXZsaXN0ZW5lciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICAgIGlmIChpc0Z1bmN0aW9uKGV2bGlzdGVuZXIpKVxuICAgICAgcmV0dXJuIDE7XG4gICAgZWxzZSBpZiAoZXZsaXN0ZW5lcilcbiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcbiAgfVxuICByZXR1cm4gMDtcbn07XG5cbkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xufTtcblxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xufVxuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/events/events.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/logger-common/dist/logger-common.esm.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@algolia/logger-common/dist/logger-common.esm.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogLevelEnum: () => (/* binding */ LogLevelEnum),\n/* harmony export */   createNullLogger: () => (/* binding */ createNullLogger)\n/* harmony export */ });\nfunction createNullLogger() {\r\n    return {\r\n        debug(_message, _args) {\r\n            return Promise.resolve();\r\n        },\r\n        info(_message, _args) {\r\n            return Promise.resolve();\r\n        },\r\n        error(_message, _args) {\r\n            return Promise.resolve();\r\n        },\r\n    };\r\n}\n\nconst LogLevelEnum = {\r\n    Debug: 1,\r\n    Info: 2,\r\n    Error: 3,\r\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvbG9nZ2VyLWNvbW1vbi9kaXN0L2xvZ2dlci1jb21tb24uZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFMEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcGVjLWxvZ2ljLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0BhbGdvbGlhL2xvZ2dlci1jb21tb24vZGlzdC9sb2dnZXItY29tbW9uLmVzbS5qcz85MjhkIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGNyZWF0ZU51bGxMb2dnZXIoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGRlYnVnKF9tZXNzYWdlLCBfYXJncykge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbmZvKF9tZXNzYWdlLCBfYXJncykge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlcnJvcihfbWVzc2FnZSwgX2FyZ3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG59XG5cbmNvbnN0IExvZ0xldmVsRW51bSA9IHtcclxuICAgIERlYnVnOiAxLFxyXG4gICAgSW5mbzogMixcclxuICAgIEVycm9yOiAzLFxyXG59O1xuXG5leHBvcnQgeyBMb2dMZXZlbEVudW0sIGNyZWF0ZU51bGxMb2dnZXIgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/logger-common/dist/logger-common.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/recommend/dist/recommend.cjs.js":
/*!***************************************************************!*\
  !*** ./node_modules/@algolia/recommend/dist/recommend.cjs.js ***!
  \***************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar cacheCommon = __webpack_require__(/*! @algolia/cache-common */ \"(ssr)/./node_modules/@algolia/cache-common/dist/cache-common.esm.js\");\nvar cacheInMemory = __webpack_require__(/*! @algolia/cache-in-memory */ \"(ssr)/./node_modules/@algolia/cache-in-memory/dist/cache-in-memory.esm.js\");\nvar clientCommon = __webpack_require__(/*! @algolia/client-common */ \"(ssr)/./node_modules/@algolia/client-common/dist/client-common.esm.js\");\nvar loggerCommon = __webpack_require__(/*! @algolia/logger-common */ \"(ssr)/./node_modules/@algolia/logger-common/dist/logger-common.esm.js\");\nvar requesterNodeHttp = __webpack_require__(/*! @algolia/requester-node-http */ \"(ssr)/./node_modules/@algolia/requester-node-http/dist/requester-node-http.esm.js\");\nvar transporter = __webpack_require__(/*! @algolia/transporter */ \"(ssr)/./node_modules/@algolia/transporter/dist/transporter.esm.js\");\nvar requesterCommon = __webpack_require__(/*! @algolia/requester-common */ \"(ssr)/./node_modules/@algolia/requester-common/dist/requester-common.esm.js\");\n\nconst createRecommendClient = options => {\r\n    const appId = options.appId;\r\n    const auth = clientCommon.createAuth(options.authMode !== undefined ? options.authMode : clientCommon.AuthMode.WithinHeaders, appId, options.apiKey);\r\n    const transporter$1 = transporter.createTransporter({\r\n        hosts: [\r\n            { url: `${appId}-dsn.algolia.net`, accept: transporter.CallEnum.Read },\r\n            { url: `${appId}.algolia.net`, accept: transporter.CallEnum.Write },\r\n        ].concat(clientCommon.shuffle([\r\n            { url: `${appId}-1.algolianet.com` },\r\n            { url: `${appId}-2.algolianet.com` },\r\n            { url: `${appId}-3.algolianet.com` },\r\n        ])),\r\n        ...options,\r\n        headers: {\r\n            ...auth.headers(),\r\n            ...{ 'content-type': 'application/x-www-form-urlencoded' },\r\n            ...options.headers,\r\n        },\r\n        queryParameters: {\r\n            ...auth.queryParameters(),\r\n            ...options.queryParameters,\r\n        },\r\n    });\r\n    const base = {\r\n        transporter: transporter$1,\r\n        appId,\r\n        addAlgoliaAgent(segment, version) {\r\n            transporter$1.userAgent.add({ segment, version });\r\n        },\r\n        clearCache() {\r\n            return Promise.all([\r\n                transporter$1.requestsCache.clear(),\r\n                transporter$1.responsesCache.clear(),\r\n            ]).then(() => undefined);\r\n        },\r\n    };\r\n    return clientCommon.addMethods(base, options.methods);\r\n};\n\nconst getRecommendations = base => {\r\n    return (queries, requestOptions) => {\r\n        const requests = queries.map(query => ({\r\n            ...query,\r\n            // The `threshold` param is required by the endpoint to make it easier\r\n            // to provide a default value later, so we default it in the client\r\n            // so that users don't have to provide a value.\r\n            threshold: query.threshold || 0,\r\n        }));\r\n        return base.transporter.read({\r\n            method: requesterCommon.MethodEnum.Post,\r\n            path: '1/indexes/*/recommendations',\r\n            data: {\r\n                requests,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getFrequentlyBoughtTogether = base => {\r\n    return (queries, requestOptions) => {\r\n        return getRecommendations(base)(queries.map(query => ({\r\n            ...query,\r\n            fallbackParameters: {},\r\n            model: 'bought-together',\r\n        })), requestOptions);\r\n    };\r\n};\n\nconst getRelatedProducts = base => {\r\n    return (queries, requestOptions) => {\r\n        return getRecommendations(base)(queries.map(query => ({\r\n            ...query,\r\n            model: 'related-products',\r\n        })), requestOptions);\r\n    };\r\n};\n\nconst getTrendingFacets = base => {\r\n    return (queries, requestOptions) => {\r\n        const requests = queries.map(query => ({\r\n            ...query,\r\n            model: 'trending-facets',\r\n            // The `threshold` param is required by the endpoint to make it easier\r\n            // to provide a default value later, so we default it in the client\r\n            // so that users don't have to provide a value.\r\n            threshold: query.threshold || 0,\r\n        }));\r\n        return base.transporter.read({\r\n            method: requesterCommon.MethodEnum.Post,\r\n            path: '1/indexes/*/recommendations',\r\n            data: {\r\n                requests,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getTrendingItems = base => {\r\n    return (queries, requestOptions) => {\r\n        const requests = queries.map(query => ({\r\n            ...query,\r\n            model: 'trending-items',\r\n            // The `threshold` param is required by the endpoint to make it easier\r\n            // to provide a default value later, so we default it in the client\r\n            // so that users don't have to provide a value.\r\n            threshold: query.threshold || 0,\r\n        }));\r\n        return base.transporter.read({\r\n            method: requesterCommon.MethodEnum.Post,\r\n            path: '1/indexes/*/recommendations',\r\n            data: {\r\n                requests,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getLookingSimilar = base => {\r\n    return (queries, requestOptions) => {\r\n        return getRecommendations(base)(queries.map(query => ({\r\n            ...query,\r\n            model: 'looking-similar',\r\n        })), requestOptions);\r\n    };\r\n};\n\nconst getRecommendedForYou = base => {\r\n    return (queries, requestOptions) => {\r\n        const requests = queries.map(query => ({\r\n            ...query,\r\n            model: 'recommended-for-you',\r\n            threshold: query.threshold || 0,\r\n        }));\r\n        return base.transporter.read({\r\n            method: requesterCommon.MethodEnum.Post,\r\n            path: '1/indexes/*/recommendations',\r\n            data: {\r\n                requests,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nfunction recommend(appId, apiKey, options) {\r\n    const commonOptions = {\r\n        appId,\r\n        apiKey,\r\n        timeouts: {\r\n            connect: 2,\r\n            read: 5,\r\n            write: 30,\r\n        },\r\n        requester: requesterNodeHttp.createNodeHttpRequester(),\r\n        logger: loggerCommon.createNullLogger(),\r\n        responsesCache: cacheCommon.createNullCache(),\r\n        requestsCache: cacheCommon.createNullCache(),\r\n        hostsCache: cacheInMemory.createInMemoryCache(),\r\n        userAgent: transporter.createUserAgent(clientCommon.version)\r\n            .add({ segment: 'Recommend', version: clientCommon.version })\r\n            .add({ segment: 'Node.js', version: process.versions.node }),\r\n    };\r\n    return createRecommendClient({\r\n        ...commonOptions,\r\n        ...options,\r\n        methods: {\r\n            destroy: clientCommon.destroy,\r\n            getFrequentlyBoughtTogether,\r\n            getRecommendations,\r\n            getRelatedProducts,\r\n            getTrendingFacets,\r\n            getTrendingItems,\r\n            getLookingSimilar,\r\n            getRecommendedForYou,\r\n        },\r\n    });\r\n}\r\n/* eslint-disable functional/immutable-data */\r\nrecommend.version = clientCommon.version;\r\nrecommend.getFrequentlyBoughtTogether = getFrequentlyBoughtTogether;\r\nrecommend.getRecommendations = getRecommendations;\r\nrecommend.getRelatedProducts = getRelatedProducts;\r\nrecommend.getTrendingFacets = getTrendingFacets;\r\nrecommend.getTrendingItems = getTrendingItems;\r\nrecommend.getLookingSimilar = getLookingSimilar;\r\nrecommend.getRecommendedForYou = getRecommendedForYou;\n\nmodule.exports = recommend;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvcmVjb21tZW5kL2Rpc3QvcmVjb21tZW5kLmNqcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixrQkFBa0IsbUJBQU8sQ0FBQyxrR0FBdUI7QUFDakQsb0JBQW9CLG1CQUFPLENBQUMsMkdBQTBCO0FBQ3RELG1CQUFtQixtQkFBTyxDQUFDLHFHQUF3QjtBQUNuRCxtQkFBbUIsbUJBQU8sQ0FBQyxxR0FBd0I7QUFDbkQsd0JBQXdCLG1CQUFPLENBQUMsdUhBQThCO0FBQzlELGtCQUFrQixtQkFBTyxDQUFDLCtGQUFzQjtBQUNoRCxzQkFBc0IsbUJBQU8sQ0FBQyw4R0FBMkI7O0FBRXpEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLFFBQVEsTUFBTSxzREFBc0Q7QUFDbEYsY0FBYyxRQUFRLE1BQU0sbURBQW1EO0FBQy9FO0FBQ0EsY0FBYyxRQUFRLE1BQU0sb0JBQW9CO0FBQ2hELGNBQWMsUUFBUSxNQUFNLG9CQUFvQjtBQUNoRCxjQUFjLFFBQVEsTUFBTSxvQkFBb0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIscURBQXFEO0FBQ3RFO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsa0JBQWtCO0FBQzVELFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIscURBQXFEO0FBQ3hFLG1CQUFtQixvREFBb0Q7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3BlYy1sb2dpYy1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AYWxnb2xpYS9yZWNvbW1lbmQvZGlzdC9yZWNvbW1lbmQuY2pzLmpzP2JkYmYiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2FjaGVDb21tb24gPSByZXF1aXJlKCdAYWxnb2xpYS9jYWNoZS1jb21tb24nKTtcbnZhciBjYWNoZUluTWVtb3J5ID0gcmVxdWlyZSgnQGFsZ29saWEvY2FjaGUtaW4tbWVtb3J5Jyk7XG52YXIgY2xpZW50Q29tbW9uID0gcmVxdWlyZSgnQGFsZ29saWEvY2xpZW50LWNvbW1vbicpO1xudmFyIGxvZ2dlckNvbW1vbiA9IHJlcXVpcmUoJ0BhbGdvbGlhL2xvZ2dlci1jb21tb24nKTtcbnZhciByZXF1ZXN0ZXJOb2RlSHR0cCA9IHJlcXVpcmUoJ0BhbGdvbGlhL3JlcXVlc3Rlci1ub2RlLWh0dHAnKTtcbnZhciB0cmFuc3BvcnRlciA9IHJlcXVpcmUoJ0BhbGdvbGlhL3RyYW5zcG9ydGVyJyk7XG52YXIgcmVxdWVzdGVyQ29tbW9uID0gcmVxdWlyZSgnQGFsZ29saWEvcmVxdWVzdGVyLWNvbW1vbicpO1xuXG5jb25zdCBjcmVhdGVSZWNvbW1lbmRDbGllbnQgPSBvcHRpb25zID0+IHtcclxuICAgIGNvbnN0IGFwcElkID0gb3B0aW9ucy5hcHBJZDtcclxuICAgIGNvbnN0IGF1dGggPSBjbGllbnRDb21tb24uY3JlYXRlQXV0aChvcHRpb25zLmF1dGhNb2RlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmF1dGhNb2RlIDogY2xpZW50Q29tbW9uLkF1dGhNb2RlLldpdGhpbkhlYWRlcnMsIGFwcElkLCBvcHRpb25zLmFwaUtleSk7XHJcbiAgICBjb25zdCB0cmFuc3BvcnRlciQxID0gdHJhbnNwb3J0ZXIuY3JlYXRlVHJhbnNwb3J0ZXIoe1xyXG4gICAgICAgIGhvc3RzOiBbXHJcbiAgICAgICAgICAgIHsgdXJsOiBgJHthcHBJZH0tZHNuLmFsZ29saWEubmV0YCwgYWNjZXB0OiB0cmFuc3BvcnRlci5DYWxsRW51bS5SZWFkIH0sXHJcbiAgICAgICAgICAgIHsgdXJsOiBgJHthcHBJZH0uYWxnb2xpYS5uZXRgLCBhY2NlcHQ6IHRyYW5zcG9ydGVyLkNhbGxFbnVtLldyaXRlIH0sXHJcbiAgICAgICAgXS5jb25jYXQoY2xpZW50Q29tbW9uLnNodWZmbGUoW1xyXG4gICAgICAgICAgICB7IHVybDogYCR7YXBwSWR9LTEuYWxnb2xpYW5ldC5jb21gIH0sXHJcbiAgICAgICAgICAgIHsgdXJsOiBgJHthcHBJZH0tMi5hbGdvbGlhbmV0LmNvbWAgfSxcclxuICAgICAgICAgICAgeyB1cmw6IGAke2FwcElkfS0zLmFsZ29saWFuZXQuY29tYCB9LFxyXG4gICAgICAgIF0pKSxcclxuICAgICAgICAuLi5vcHRpb25zLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgLi4uYXV0aC5oZWFkZXJzKCksXHJcbiAgICAgICAgICAgIC4uLnsgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0sXHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuaGVhZGVycyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHF1ZXJ5UGFyYW1ldGVyczoge1xyXG4gICAgICAgICAgICAuLi5hdXRoLnF1ZXJ5UGFyYW1ldGVycygpLFxyXG4gICAgICAgICAgICAuLi5vcHRpb25zLnF1ZXJ5UGFyYW1ldGVycyxcclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBiYXNlID0ge1xyXG4gICAgICAgIHRyYW5zcG9ydGVyOiB0cmFuc3BvcnRlciQxLFxyXG4gICAgICAgIGFwcElkLFxyXG4gICAgICAgIGFkZEFsZ29saWFBZ2VudChzZWdtZW50LCB2ZXJzaW9uKSB7XHJcbiAgICAgICAgICAgIHRyYW5zcG9ydGVyJDEudXNlckFnZW50LmFkZCh7IHNlZ21lbnQsIHZlcnNpb24gfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjbGVhckNhY2hlKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgICAgICAgICAgdHJhbnNwb3J0ZXIkMS5yZXF1ZXN0c0NhY2hlLmNsZWFyKCksXHJcbiAgICAgICAgICAgICAgICB0cmFuc3BvcnRlciQxLnJlc3BvbnNlc0NhY2hlLmNsZWFyKCksXHJcbiAgICAgICAgICAgIF0pLnRoZW4oKCkgPT4gdW5kZWZpbmVkKTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxuICAgIHJldHVybiBjbGllbnRDb21tb24uYWRkTWV0aG9kcyhiYXNlLCBvcHRpb25zLm1ldGhvZHMpO1xyXG59O1xuXG5jb25zdCBnZXRSZWNvbW1lbmRhdGlvbnMgPSBiYXNlID0+IHtcclxuICAgIHJldHVybiAocXVlcmllcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0cyA9IHF1ZXJpZXMubWFwKHF1ZXJ5ID0+ICh7XHJcbiAgICAgICAgICAgIC4uLnF1ZXJ5LFxyXG4gICAgICAgICAgICAvLyBUaGUgYHRocmVzaG9sZGAgcGFyYW0gaXMgcmVxdWlyZWQgYnkgdGhlIGVuZHBvaW50IHRvIG1ha2UgaXQgZWFzaWVyXHJcbiAgICAgICAgICAgIC8vIHRvIHByb3ZpZGUgYSBkZWZhdWx0IHZhbHVlIGxhdGVyLCBzbyB3ZSBkZWZhdWx0IGl0IGluIHRoZSBjbGllbnRcclxuICAgICAgICAgICAgLy8gc28gdGhhdCB1c2VycyBkb24ndCBoYXZlIHRvIHByb3ZpZGUgYSB2YWx1ZS5cclxuICAgICAgICAgICAgdGhyZXNob2xkOiBxdWVyeS50aHJlc2hvbGQgfHwgMCxcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogcmVxdWVzdGVyQ29tbW9uLk1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogJzEvaW5kZXhlcy8qL3JlY29tbWVuZGF0aW9ucycsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RzLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjYWNoZWFibGU6IHRydWUsXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0RnJlcXVlbnRseUJvdWdodFRvZ2V0aGVyID0gYmFzZSA9PiB7XHJcbiAgICByZXR1cm4gKHF1ZXJpZXMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGdldFJlY29tbWVuZGF0aW9ucyhiYXNlKShxdWVyaWVzLm1hcChxdWVyeSA9PiAoe1xyXG4gICAgICAgICAgICAuLi5xdWVyeSxcclxuICAgICAgICAgICAgZmFsbGJhY2tQYXJhbWV0ZXJzOiB7fSxcclxuICAgICAgICAgICAgbW9kZWw6ICdib3VnaHQtdG9nZXRoZXInLFxyXG4gICAgICAgIH0pKSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0UmVsYXRlZFByb2R1Y3RzID0gYmFzZSA9PiB7XHJcbiAgICByZXR1cm4gKHF1ZXJpZXMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGdldFJlY29tbWVuZGF0aW9ucyhiYXNlKShxdWVyaWVzLm1hcChxdWVyeSA9PiAoe1xyXG4gICAgICAgICAgICAuLi5xdWVyeSxcclxuICAgICAgICAgICAgbW9kZWw6ICdyZWxhdGVkLXByb2R1Y3RzJyxcclxuICAgICAgICB9KSksIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGdldFRyZW5kaW5nRmFjZXRzID0gYmFzZSA9PiB7XHJcbiAgICByZXR1cm4gKHF1ZXJpZXMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdHMgPSBxdWVyaWVzLm1hcChxdWVyeSA9PiAoe1xyXG4gICAgICAgICAgICAuLi5xdWVyeSxcclxuICAgICAgICAgICAgbW9kZWw6ICd0cmVuZGluZy1mYWNldHMnLFxyXG4gICAgICAgICAgICAvLyBUaGUgYHRocmVzaG9sZGAgcGFyYW0gaXMgcmVxdWlyZWQgYnkgdGhlIGVuZHBvaW50IHRvIG1ha2UgaXQgZWFzaWVyXHJcbiAgICAgICAgICAgIC8vIHRvIHByb3ZpZGUgYSBkZWZhdWx0IHZhbHVlIGxhdGVyLCBzbyB3ZSBkZWZhdWx0IGl0IGluIHRoZSBjbGllbnRcclxuICAgICAgICAgICAgLy8gc28gdGhhdCB1c2VycyBkb24ndCBoYXZlIHRvIHByb3ZpZGUgYSB2YWx1ZS5cclxuICAgICAgICAgICAgdGhyZXNob2xkOiBxdWVyeS50aHJlc2hvbGQgfHwgMCxcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogcmVxdWVzdGVyQ29tbW9uLk1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogJzEvaW5kZXhlcy8qL3JlY29tbWVuZGF0aW9ucycsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RzLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjYWNoZWFibGU6IHRydWUsXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0VHJlbmRpbmdJdGVtcyA9IGJhc2UgPT4ge1xyXG4gICAgcmV0dXJuIChxdWVyaWVzLCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RzID0gcXVlcmllcy5tYXAocXVlcnkgPT4gKHtcclxuICAgICAgICAgICAgLi4ucXVlcnksXHJcbiAgICAgICAgICAgIG1vZGVsOiAndHJlbmRpbmctaXRlbXMnLFxyXG4gICAgICAgICAgICAvLyBUaGUgYHRocmVzaG9sZGAgcGFyYW0gaXMgcmVxdWlyZWQgYnkgdGhlIGVuZHBvaW50IHRvIG1ha2UgaXQgZWFzaWVyXHJcbiAgICAgICAgICAgIC8vIHRvIHByb3ZpZGUgYSBkZWZhdWx0IHZhbHVlIGxhdGVyLCBzbyB3ZSBkZWZhdWx0IGl0IGluIHRoZSBjbGllbnRcclxuICAgICAgICAgICAgLy8gc28gdGhhdCB1c2VycyBkb24ndCBoYXZlIHRvIHByb3ZpZGUgYSB2YWx1ZS5cclxuICAgICAgICAgICAgdGhyZXNob2xkOiBxdWVyeS50aHJlc2hvbGQgfHwgMCxcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogcmVxdWVzdGVyQ29tbW9uLk1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogJzEvaW5kZXhlcy8qL3JlY29tbWVuZGF0aW9ucycsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RzLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjYWNoZWFibGU6IHRydWUsXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0TG9va2luZ1NpbWlsYXIgPSBiYXNlID0+IHtcclxuICAgIHJldHVybiAocXVlcmllcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gZ2V0UmVjb21tZW5kYXRpb25zKGJhc2UpKHF1ZXJpZXMubWFwKHF1ZXJ5ID0+ICh7XHJcbiAgICAgICAgICAgIC4uLnF1ZXJ5LFxyXG4gICAgICAgICAgICBtb2RlbDogJ2xvb2tpbmctc2ltaWxhcicsXHJcbiAgICAgICAgfSkpLCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXRSZWNvbW1lbmRlZEZvcllvdSA9IGJhc2UgPT4ge1xyXG4gICAgcmV0dXJuIChxdWVyaWVzLCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RzID0gcXVlcmllcy5tYXAocXVlcnkgPT4gKHtcclxuICAgICAgICAgICAgLi4ucXVlcnksXHJcbiAgICAgICAgICAgIG1vZGVsOiAncmVjb21tZW5kZWQtZm9yLXlvdScsXHJcbiAgICAgICAgICAgIHRocmVzaG9sZDogcXVlcnkudGhyZXNob2xkIHx8IDAsXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IHJlcXVlc3RlckNvbW1vbi5NZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2luZGV4ZXMvKi9yZWNvbW1lbmRhdGlvbnMnLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0cyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2FjaGVhYmxlOiB0cnVlLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmZ1bmN0aW9uIHJlY29tbWVuZChhcHBJZCwgYXBpS2V5LCBvcHRpb25zKSB7XHJcbiAgICBjb25zdCBjb21tb25PcHRpb25zID0ge1xyXG4gICAgICAgIGFwcElkLFxyXG4gICAgICAgIGFwaUtleSxcclxuICAgICAgICB0aW1lb3V0czoge1xyXG4gICAgICAgICAgICBjb25uZWN0OiAyLFxyXG4gICAgICAgICAgICByZWFkOiA1LFxyXG4gICAgICAgICAgICB3cml0ZTogMzAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXF1ZXN0ZXI6IHJlcXVlc3Rlck5vZGVIdHRwLmNyZWF0ZU5vZGVIdHRwUmVxdWVzdGVyKCksXHJcbiAgICAgICAgbG9nZ2VyOiBsb2dnZXJDb21tb24uY3JlYXRlTnVsbExvZ2dlcigpLFxyXG4gICAgICAgIHJlc3BvbnNlc0NhY2hlOiBjYWNoZUNvbW1vbi5jcmVhdGVOdWxsQ2FjaGUoKSxcclxuICAgICAgICByZXF1ZXN0c0NhY2hlOiBjYWNoZUNvbW1vbi5jcmVhdGVOdWxsQ2FjaGUoKSxcclxuICAgICAgICBob3N0c0NhY2hlOiBjYWNoZUluTWVtb3J5LmNyZWF0ZUluTWVtb3J5Q2FjaGUoKSxcclxuICAgICAgICB1c2VyQWdlbnQ6IHRyYW5zcG9ydGVyLmNyZWF0ZVVzZXJBZ2VudChjbGllbnRDb21tb24udmVyc2lvbilcclxuICAgICAgICAgICAgLmFkZCh7IHNlZ21lbnQ6ICdSZWNvbW1lbmQnLCB2ZXJzaW9uOiBjbGllbnRDb21tb24udmVyc2lvbiB9KVxyXG4gICAgICAgICAgICAuYWRkKHsgc2VnbWVudDogJ05vZGUuanMnLCB2ZXJzaW9uOiBwcm9jZXNzLnZlcnNpb25zLm5vZGUgfSksXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGNyZWF0ZVJlY29tbWVuZENsaWVudCh7XHJcbiAgICAgICAgLi4uY29tbW9uT3B0aW9ucyxcclxuICAgICAgICAuLi5vcHRpb25zLFxyXG4gICAgICAgIG1ldGhvZHM6IHtcclxuICAgICAgICAgICAgZGVzdHJveTogY2xpZW50Q29tbW9uLmRlc3Ryb3ksXHJcbiAgICAgICAgICAgIGdldEZyZXF1ZW50bHlCb3VnaHRUb2dldGhlcixcclxuICAgICAgICAgICAgZ2V0UmVjb21tZW5kYXRpb25zLFxyXG4gICAgICAgICAgICBnZXRSZWxhdGVkUHJvZHVjdHMsXHJcbiAgICAgICAgICAgIGdldFRyZW5kaW5nRmFjZXRzLFxyXG4gICAgICAgICAgICBnZXRUcmVuZGluZ0l0ZW1zLFxyXG4gICAgICAgICAgICBnZXRMb29raW5nU2ltaWxhcixcclxuICAgICAgICAgICAgZ2V0UmVjb21tZW5kZWRGb3JZb3UsXHJcbiAgICAgICAgfSxcclxuICAgIH0pO1xyXG59XHJcbi8qIGVzbGludC1kaXNhYmxlIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGEgKi9cclxucmVjb21tZW5kLnZlcnNpb24gPSBjbGllbnRDb21tb24udmVyc2lvbjtcclxucmVjb21tZW5kLmdldEZyZXF1ZW50bHlCb3VnaHRUb2dldGhlciA9IGdldEZyZXF1ZW50bHlCb3VnaHRUb2dldGhlcjtcclxucmVjb21tZW5kLmdldFJlY29tbWVuZGF0aW9ucyA9IGdldFJlY29tbWVuZGF0aW9ucztcclxucmVjb21tZW5kLmdldFJlbGF0ZWRQcm9kdWN0cyA9IGdldFJlbGF0ZWRQcm9kdWN0cztcclxucmVjb21tZW5kLmdldFRyZW5kaW5nRmFjZXRzID0gZ2V0VHJlbmRpbmdGYWNldHM7XHJcbnJlY29tbWVuZC5nZXRUcmVuZGluZ0l0ZW1zID0gZ2V0VHJlbmRpbmdJdGVtcztcclxucmVjb21tZW5kLmdldExvb2tpbmdTaW1pbGFyID0gZ2V0TG9va2luZ1NpbWlsYXI7XHJcbnJlY29tbWVuZC5nZXRSZWNvbW1lbmRlZEZvcllvdSA9IGdldFJlY29tbWVuZGVkRm9yWW91O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlY29tbWVuZDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/recommend/dist/recommend.cjs.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/recommend/index.js":
/*!**************************************************!*\
  !*** ./node_modules/@algolia/recommend/index.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/* eslint-disable functional/immutable-data, import/no-commonjs */\nconst recommend = __webpack_require__(/*! ./dist/recommend.cjs.js */ \"(ssr)/./node_modules/@algolia/recommend/dist/recommend.cjs.js\");\n\n/**\n * The Common JS build is the default entry point for the Node environment. Keep in\n * in mind, that for the browser environment, we hint the bundler to use the UMD\n * build instead as specified on the key `browser` of our `package.json` file.\n */\nmodule.exports = recommend;\n\n/**\n * In addition, we also set explicitly the default export below making\n * this Common JS module in compliance with es6 modules specification.\n */\nmodule.exports[\"default\"] = recommend;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvcmVjb21tZW5kL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0Esa0JBQWtCLG1CQUFPLENBQUMsOEZBQXlCOztBQUVuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBc0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcGVjLWxvZ2ljLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0BhbGdvbGlhL3JlY29tbWVuZC9pbmRleC5qcz85MWQ4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGEsIGltcG9ydC9uby1jb21tb25qcyAqL1xuY29uc3QgcmVjb21tZW5kID0gcmVxdWlyZSgnLi9kaXN0L3JlY29tbWVuZC5janMuanMnKTtcblxuLyoqXG4gKiBUaGUgQ29tbW9uIEpTIGJ1aWxkIGlzIHRoZSBkZWZhdWx0IGVudHJ5IHBvaW50IGZvciB0aGUgTm9kZSBlbnZpcm9ubWVudC4gS2VlcCBpblxuICogaW4gbWluZCwgdGhhdCBmb3IgdGhlIGJyb3dzZXIgZW52aXJvbm1lbnQsIHdlIGhpbnQgdGhlIGJ1bmRsZXIgdG8gdXNlIHRoZSBVTURcbiAqIGJ1aWxkIGluc3RlYWQgYXMgc3BlY2lmaWVkIG9uIHRoZSBrZXkgYGJyb3dzZXJgIG9mIG91ciBgcGFja2FnZS5qc29uYCBmaWxlLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IHJlY29tbWVuZDtcblxuLyoqXG4gKiBJbiBhZGRpdGlvbiwgd2UgYWxzbyBzZXQgZXhwbGljaXRseSB0aGUgZGVmYXVsdCBleHBvcnQgYmVsb3cgbWFraW5nXG4gKiB0aGlzIENvbW1vbiBKUyBtb2R1bGUgaW4gY29tcGxpYW5jZSB3aXRoIGVzNiBtb2R1bGVzIHNwZWNpZmljYXRpb24uXG4gKi9cbm1vZHVsZS5leHBvcnRzLmRlZmF1bHQgPSByZWNvbW1lbmQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/recommend/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/requester-common/dist/requester-common.esm.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@algolia/requester-common/dist/requester-common.esm.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MethodEnum: () => (/* binding */ MethodEnum)\n/* harmony export */ });\nconst MethodEnum = {\r\n    Delete: 'DELETE',\r\n    Get: 'GET',\r\n    Post: 'POST',\r\n    Put: 'PUT',\r\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvcmVxdWVzdGVyLWNvbW1vbi9kaXN0L3JlcXVlc3Rlci1jb21tb24uZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRXNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3BlYy1sb2dpYy1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AYWxnb2xpYS9yZXF1ZXN0ZXItY29tbW9uL2Rpc3QvcmVxdWVzdGVyLWNvbW1vbi5lc20uanM/N2I0YiJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBNZXRob2RFbnVtID0ge1xyXG4gICAgRGVsZXRlOiAnREVMRVRFJyxcclxuICAgIEdldDogJ0dFVCcsXHJcbiAgICBQb3N0OiAnUE9TVCcsXHJcbiAgICBQdXQ6ICdQVVQnLFxyXG59O1xuXG5leHBvcnQgeyBNZXRob2RFbnVtIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/requester-common/dist/requester-common.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/requester-node-http/dist/requester-node-http.esm.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@algolia/requester-node-http/dist/requester-node-http.esm.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createNodeHttpRequester: () => (/* binding */ createNodeHttpRequester)\n/* harmony export */ });\n/* harmony import */ var http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! http */ \"http\");\n/* harmony import */ var http__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(http__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! https */ \"https\");\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(https__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! url */ \"url\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(url__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\n\n\n/* eslint functional/prefer-readonly-type: 0 */\r\nconst agentOptions = { keepAlive: true };\r\nconst defaultHttpAgent = new http__WEBPACK_IMPORTED_MODULE_0__.Agent(agentOptions);\r\nconst defaultHttpsAgent = new https__WEBPACK_IMPORTED_MODULE_1__.Agent(agentOptions);\r\nfunction createNodeHttpRequester({ agent: userGlobalAgent, httpAgent: userHttpAgent, httpsAgent: userHttpsAgent, requesterOptions = {}, } = {}) {\r\n    const httpAgent = userHttpAgent || userGlobalAgent || defaultHttpAgent;\r\n    const httpsAgent = userHttpsAgent || userGlobalAgent || defaultHttpsAgent;\r\n    return {\r\n        send(request) {\r\n            return new Promise(resolve => {\r\n                const url = (0,url__WEBPACK_IMPORTED_MODULE_2__.parse)(request.url);\r\n                const path = url.query === null ? url.pathname : `${url.pathname}?${url.query}`;\r\n                const options = {\r\n                    ...requesterOptions,\r\n                    agent: url.protocol === 'https:' ? httpsAgent : httpAgent,\r\n                    hostname: url.hostname,\r\n                    path,\r\n                    method: request.method,\r\n                    headers: {\r\n                        ...(requesterOptions && requesterOptions.headers ? requesterOptions.headers : {}),\r\n                        ...request.headers,\r\n                    },\r\n                    ...(url.port !== undefined ? { port: url.port || '' } : {}),\r\n                };\r\n                const req = (url.protocol === 'https:' ? https__WEBPACK_IMPORTED_MODULE_1__ : http__WEBPACK_IMPORTED_MODULE_0__).request(options, response => {\r\n                    // eslint-disable-next-line functional/no-let\r\n                    let contentBuffers = [];\r\n                    response.on('data', chunk => {\r\n                        contentBuffers = contentBuffers.concat(chunk);\r\n                    });\r\n                    response.on('end', () => {\r\n                        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n                        clearTimeout(connectTimeout);\r\n                        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n                        clearTimeout(responseTimeout);\r\n                        resolve({\r\n                            status: response.statusCode || 0,\r\n                            content: Buffer.concat(contentBuffers).toString(),\r\n                            isTimedOut: false,\r\n                        });\r\n                    });\r\n                });\r\n                const createTimeout = (timeout, content) => {\r\n                    return setTimeout(() => {\r\n                        req.abort();\r\n                        resolve({\r\n                            status: 0,\r\n                            content,\r\n                            isTimedOut: true,\r\n                        });\r\n                    }, timeout * 1000);\r\n                };\r\n                const connectTimeout = createTimeout(request.connectTimeout, 'Connection timeout');\r\n                // eslint-disable-next-line functional/no-let\r\n                let responseTimeout;\r\n                req.on('error', error => {\r\n                    clearTimeout(connectTimeout);\r\n                    clearTimeout(responseTimeout);\r\n                    resolve({ status: 0, content: error.message, isTimedOut: false });\r\n                });\r\n                req.once('response', () => {\r\n                    clearTimeout(connectTimeout);\r\n                    responseTimeout = createTimeout(request.responseTimeout, 'Socket timeout');\r\n                });\r\n                if (request.data !== undefined) {\r\n                    req.write(request.data);\r\n                }\r\n                req.end();\r\n            });\r\n        },\r\n        destroy() {\r\n            httpAgent.destroy();\r\n            httpsAgent.destroy();\r\n            return Promise.resolve();\r\n        },\r\n    };\r\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvcmVxdWVzdGVyLW5vZGUtaHR0cC9kaXN0L3JlcXVlc3Rlci1ub2RlLWh0dHAuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBNkI7QUFDQTtBQUNFO0FBQ1U7QUFDYjs7QUFFNUI7QUFDQSx1QkFBdUI7QUFDdkIsNkJBQTZCLHVDQUFLO0FBQ2xDLDhCQUE4Qix3Q0FBTztBQUNyQyxtQ0FBbUMsbUdBQW1HLElBQUksSUFBSTtBQUM5STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDBDQUFLO0FBQ2pDLG9FQUFvRSxhQUFhLEdBQUcsVUFBVTtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdHQUF3RztBQUN4RztBQUNBLHFCQUFxQjtBQUNyQixtREFBbUQsdUJBQXVCLElBQUk7QUFDOUU7QUFDQSx5REFBeUQsa0NBQUssR0FBRyxpQ0FBSTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsc0RBQXNEO0FBQ3BGLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRW1DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3BlYy1sb2dpYy1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AYWxnb2xpYS9yZXF1ZXN0ZXItbm9kZS1odHRwL2Rpc3QvcmVxdWVzdGVyLW5vZGUtaHR0cC5lc20uanM/NmUyYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBodHRwIGZyb20gJ2h0dHAnO1xuaW1wb3J0IHsgQWdlbnQgfSBmcm9tICdodHRwJztcbmltcG9ydCAqIGFzIGh0dHBzIGZyb20gJ2h0dHBzJztcbmltcG9ydCB7IEFnZW50IGFzIEFnZW50JDEgfSBmcm9tICdodHRwcyc7XG5pbXBvcnQgeyBwYXJzZSB9IGZyb20gJ3VybCc7XG5cbi8qIGVzbGludCBmdW5jdGlvbmFsL3ByZWZlci1yZWFkb25seS10eXBlOiAwICovXHJcbmNvbnN0IGFnZW50T3B0aW9ucyA9IHsga2VlcEFsaXZlOiB0cnVlIH07XHJcbmNvbnN0IGRlZmF1bHRIdHRwQWdlbnQgPSBuZXcgQWdlbnQoYWdlbnRPcHRpb25zKTtcclxuY29uc3QgZGVmYXVsdEh0dHBzQWdlbnQgPSBuZXcgQWdlbnQkMShhZ2VudE9wdGlvbnMpO1xyXG5mdW5jdGlvbiBjcmVhdGVOb2RlSHR0cFJlcXVlc3Rlcih7IGFnZW50OiB1c2VyR2xvYmFsQWdlbnQsIGh0dHBBZ2VudDogdXNlckh0dHBBZ2VudCwgaHR0cHNBZ2VudDogdXNlckh0dHBzQWdlbnQsIHJlcXVlc3Rlck9wdGlvbnMgPSB7fSwgfSA9IHt9KSB7XHJcbiAgICBjb25zdCBodHRwQWdlbnQgPSB1c2VySHR0cEFnZW50IHx8IHVzZXJHbG9iYWxBZ2VudCB8fCBkZWZhdWx0SHR0cEFnZW50O1xyXG4gICAgY29uc3QgaHR0cHNBZ2VudCA9IHVzZXJIdHRwc0FnZW50IHx8IHVzZXJHbG9iYWxBZ2VudCB8fCBkZWZhdWx0SHR0cHNBZ2VudDtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgc2VuZChyZXF1ZXN0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IHBhcnNlKHJlcXVlc3QudXJsKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGggPSB1cmwucXVlcnkgPT09IG51bGwgPyB1cmwucGF0aG5hbWUgOiBgJHt1cmwucGF0aG5hbWV9PyR7dXJsLnF1ZXJ5fWA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLnJlcXVlc3Rlck9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgYWdlbnQ6IHVybC5wcm90b2NvbCA9PT0gJ2h0dHBzOicgPyBodHRwc0FnZW50IDogaHR0cEFnZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGhvc3RuYW1lOiB1cmwuaG9zdG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aCxcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IHJlcXVlc3QubWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uKHJlcXVlc3Rlck9wdGlvbnMgJiYgcmVxdWVzdGVyT3B0aW9ucy5oZWFkZXJzID8gcmVxdWVzdGVyT3B0aW9ucy5oZWFkZXJzIDoge30pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5yZXF1ZXN0LmhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAuLi4odXJsLnBvcnQgIT09IHVuZGVmaW5lZCA/IHsgcG9ydDogdXJsLnBvcnQgfHwgJycgfSA6IHt9KSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXEgPSAodXJsLnByb3RvY29sID09PSAnaHR0cHM6JyA/IGh0dHBzIDogaHR0cCkucmVxdWVzdChvcHRpb25zLCByZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvbm8tbGV0XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnRlbnRCdWZmZXJzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uub24oJ2RhdGEnLCBjaHVuayA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRCdWZmZXJzID0gY29udGVudEJ1ZmZlcnMuY29uY2F0KGNodW5rKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5vbignZW5kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChjb25uZWN0VGltZW91dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHJlc3BvbnNlVGltZW91dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXNDb2RlIHx8IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBCdWZmZXIuY29uY2F0KGNvbnRlbnRCdWZmZXJzKS50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNUaW1lZE91dDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjcmVhdGVUaW1lb3V0ID0gKHRpbWVvdXQsIGNvbnRlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5hYm9ydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1RpbWVkT3V0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9LCB0aW1lb3V0ICogMTAwMCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdFRpbWVvdXQgPSBjcmVhdGVUaW1lb3V0KHJlcXVlc3QuY29ubmVjdFRpbWVvdXQsICdDb25uZWN0aW9uIHRpbWVvdXQnKTtcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL25vLWxldFxyXG4gICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlVGltZW91dDtcclxuICAgICAgICAgICAgICAgIHJlcS5vbignZXJyb3InLCBlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNvbm5lY3RUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQocmVzcG9uc2VUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgc3RhdHVzOiAwLCBjb250ZW50OiBlcnJvci5tZXNzYWdlLCBpc1RpbWVkT3V0OiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmVxLm9uY2UoJ3Jlc3BvbnNlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChjb25uZWN0VGltZW91dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VUaW1lb3V0ID0gY3JlYXRlVGltZW91dChyZXF1ZXN0LnJlc3BvbnNlVGltZW91dCwgJ1NvY2tldCB0aW1lb3V0Jyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LmRhdGEgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcS53cml0ZShyZXF1ZXN0LmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVxLmVuZCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgICAgIGh0dHBBZ2VudC5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIGh0dHBzQWdlbnQuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbn1cblxuZXhwb3J0IHsgY3JlYXRlTm9kZUh0dHBSZXF1ZXN0ZXIgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/requester-node-http/dist/requester-node-http.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@algolia/transporter/dist/transporter.esm.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@algolia/transporter/dist/transporter.esm.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CallEnum: () => (/* binding */ CallEnum),\n/* harmony export */   HostStatusEnum: () => (/* binding */ HostStatusEnum),\n/* harmony export */   createApiError: () => (/* binding */ createApiError),\n/* harmony export */   createDeserializationError: () => (/* binding */ createDeserializationError),\n/* harmony export */   createMappedRequestOptions: () => (/* binding */ createMappedRequestOptions),\n/* harmony export */   createRetryError: () => (/* binding */ createRetryError),\n/* harmony export */   createStatefulHost: () => (/* binding */ createStatefulHost),\n/* harmony export */   createStatelessHost: () => (/* binding */ createStatelessHost),\n/* harmony export */   createTransporter: () => (/* binding */ createTransporter),\n/* harmony export */   createUserAgent: () => (/* binding */ createUserAgent),\n/* harmony export */   deserializeFailure: () => (/* binding */ deserializeFailure),\n/* harmony export */   deserializeSuccess: () => (/* binding */ deserializeSuccess),\n/* harmony export */   isStatefulHostTimeouted: () => (/* binding */ isStatefulHostTimeouted),\n/* harmony export */   isStatefulHostUp: () => (/* binding */ isStatefulHostUp),\n/* harmony export */   serializeData: () => (/* binding */ serializeData),\n/* harmony export */   serializeHeaders: () => (/* binding */ serializeHeaders),\n/* harmony export */   serializeQueryParameters: () => (/* binding */ serializeQueryParameters),\n/* harmony export */   serializeUrl: () => (/* binding */ serializeUrl),\n/* harmony export */   stackFrameWithoutCredentials: () => (/* binding */ stackFrameWithoutCredentials),\n/* harmony export */   stackTraceWithoutCredentials: () => (/* binding */ stackTraceWithoutCredentials)\n/* harmony export */ });\n/* harmony import */ var _algolia_requester_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @algolia/requester-common */ \"(ssr)/./node_modules/@algolia/requester-common/dist/requester-common.esm.js\");\n\n\nfunction createMappedRequestOptions(requestOptions, timeout) {\r\n    const options = requestOptions || {};\r\n    const data = options.data || {};\r\n    Object.keys(options).forEach(key => {\r\n        if (['timeout', 'headers', 'queryParameters', 'data', 'cacheable'].indexOf(key) === -1) {\r\n            data[key] = options[key]; // eslint-disable-line functional/immutable-data\r\n        }\r\n    });\r\n    return {\r\n        data: Object.entries(data).length > 0 ? data : undefined,\r\n        timeout: options.timeout || timeout,\r\n        headers: options.headers || {},\r\n        queryParameters: options.queryParameters || {},\r\n        cacheable: options.cacheable,\r\n    };\r\n}\n\nconst CallEnum = {\r\n    /**\r\n     * If the host is read only.\r\n     */\r\n    Read: 1,\r\n    /**\r\n     * If the host is write only.\r\n     */\r\n    Write: 2,\r\n    /**\r\n     * If the host is both read and write.\r\n     */\r\n    Any: 3,\r\n};\n\nconst HostStatusEnum = {\r\n    Up: 1,\r\n    Down: 2,\r\n    Timeouted: 3,\r\n};\n\n// By default, API Clients at Algolia have expiration delay\r\n// of 5 mins. In the JavaScript client, we have 2 mins.\r\nconst EXPIRATION_DELAY = 2 * 60 * 1000;\r\nfunction createStatefulHost(host, status = HostStatusEnum.Up) {\r\n    return {\r\n        ...host,\r\n        status,\r\n        lastUpdate: Date.now(),\r\n    };\r\n}\r\nfunction isStatefulHostUp(host) {\r\n    return host.status === HostStatusEnum.Up || Date.now() - host.lastUpdate > EXPIRATION_DELAY;\r\n}\r\nfunction isStatefulHostTimeouted(host) {\r\n    return (host.status === HostStatusEnum.Timeouted && Date.now() - host.lastUpdate <= EXPIRATION_DELAY);\r\n}\n\nfunction createStatelessHost(options) {\r\n    if (typeof options === 'string') {\r\n        return {\r\n            protocol: 'https',\r\n            url: options,\r\n            accept: CallEnum.Any,\r\n        };\r\n    }\r\n    return {\r\n        protocol: options.protocol || 'https',\r\n        url: options.url,\r\n        accept: options.accept || CallEnum.Any,\r\n    };\r\n}\n\nfunction createRetryableOptions(hostsCache, statelessHosts) {\r\n    return Promise.all(statelessHosts.map(statelessHost => {\r\n        return hostsCache.get(statelessHost, () => {\r\n            return Promise.resolve(createStatefulHost(statelessHost));\r\n        });\r\n    })).then(statefulHosts => {\r\n        const hostsUp = statefulHosts.filter(host => isStatefulHostUp(host));\r\n        const hostsTimeouted = statefulHosts.filter(host => isStatefulHostTimeouted(host));\r\n        /**\r\n         * Note, we put the hosts that previously timeouted on the end of the list.\r\n         */\r\n        const hostsAvailable = [...hostsUp, ...hostsTimeouted];\r\n        const statelessHostsAvailable = hostsAvailable.length > 0\r\n            ? hostsAvailable.map(host => createStatelessHost(host))\r\n            : statelessHosts;\r\n        return {\r\n            getTimeout(timeoutsCount, baseTimeout) {\r\n                /**\r\n                 * Imagine that you have 4 hosts, if timeouts will increase\r\n                 * on the following way: 1 (timeouted) > 4 (timeouted) > 5 (200)\r\n                 *\r\n                 * Note that, the very next request, we start from the previous timeout\r\n                 *\r\n                 *  5 (timeouted) > 6 (timeouted) > 7 ...\r\n                 *\r\n                 * This strategy may need to be reviewed, but is the strategy on the our\r\n                 * current v3 version.\r\n                 */\r\n                const timeoutMultiplier = hostsTimeouted.length === 0 && timeoutsCount === 0\r\n                    ? 1\r\n                    : hostsTimeouted.length + 3 + timeoutsCount;\r\n                return timeoutMultiplier * baseTimeout;\r\n            },\r\n            statelessHosts: statelessHostsAvailable,\r\n        };\r\n    });\r\n}\n\nconst isNetworkError = ({ isTimedOut, status }) => {\r\n    return !isTimedOut && ~~status === 0;\r\n};\r\nconst isRetryable = (response) => {\r\n    const status = response.status;\r\n    const isTimedOut = response.isTimedOut;\r\n    return (isTimedOut || isNetworkError(response) || (~~(status / 100) !== 2 && ~~(status / 100) !== 4));\r\n};\r\nconst isSuccess = ({ status }) => {\r\n    return ~~(status / 100) === 2;\r\n};\r\nconst retryDecision = (response, outcomes) => {\r\n    if (isRetryable(response)) {\r\n        return outcomes.onRetry(response);\r\n    }\r\n    if (isSuccess(response)) {\r\n        return outcomes.onSuccess(response);\r\n    }\r\n    return outcomes.onFail(response);\r\n};\n\nfunction retryableRequest(transporter, statelessHosts, request, requestOptions) {\r\n    const stackTrace = []; // eslint-disable-line functional/prefer-readonly-type\r\n    /**\r\n     * First we prepare the payload that do not depend from hosts.\r\n     */\r\n    const data = serializeData(request, requestOptions);\r\n    const headers = serializeHeaders(transporter, requestOptions);\r\n    const method = request.method;\r\n    // On `GET`, the data is proxied to query parameters.\r\n    const dataQueryParameters = request.method !== _algolia_requester_common__WEBPACK_IMPORTED_MODULE_0__.MethodEnum.Get\r\n        ? {}\r\n        : {\r\n            ...request.data,\r\n            ...requestOptions.data,\r\n        };\r\n    const queryParameters = {\r\n        'x-algolia-agent': transporter.userAgent.value,\r\n        ...transporter.queryParameters,\r\n        ...dataQueryParameters,\r\n        ...requestOptions.queryParameters,\r\n    };\r\n    let timeoutsCount = 0; // eslint-disable-line functional/no-let\r\n    const retry = (hosts, // eslint-disable-line functional/prefer-readonly-type\r\n    getTimeout) => {\r\n        /**\r\n         * We iterate on each host, until there is no host left.\r\n         */\r\n        const host = hosts.pop(); // eslint-disable-line functional/immutable-data\r\n        if (host === undefined) {\r\n            throw createRetryError(stackTraceWithoutCredentials(stackTrace));\r\n        }\r\n        const payload = {\r\n            data,\r\n            headers,\r\n            method,\r\n            url: serializeUrl(host, request.path, queryParameters),\r\n            connectTimeout: getTimeout(timeoutsCount, transporter.timeouts.connect),\r\n            responseTimeout: getTimeout(timeoutsCount, requestOptions.timeout),\r\n        };\r\n        /**\r\n         * The stackFrame is pushed to the stackTrace so we\r\n         * can have information about onRetry and onFailure\r\n         * decisions.\r\n         */\r\n        const pushToStackTrace = (response) => {\r\n            const stackFrame = {\r\n                request: payload,\r\n                response,\r\n                host,\r\n                triesLeft: hosts.length,\r\n            };\r\n            // eslint-disable-next-line functional/immutable-data\r\n            stackTrace.push(stackFrame);\r\n            return stackFrame;\r\n        };\r\n        const decisions = {\r\n            onSuccess: response => deserializeSuccess(response),\r\n            onRetry(response) {\r\n                const stackFrame = pushToStackTrace(response);\r\n                /**\r\n                 * If response is a timeout, we increaset the number of\r\n                 * timeouts so we can increase the timeout later.\r\n                 */\r\n                if (response.isTimedOut) {\r\n                    timeoutsCount++;\r\n                }\r\n                return Promise.all([\r\n                    /**\r\n                     * Failures are individually send the logger, allowing\r\n                     * the end user to debug / store stack frames even\r\n                     * when a retry error does not happen.\r\n                     */\r\n                    transporter.logger.info('Retryable failure', stackFrameWithoutCredentials(stackFrame)),\r\n                    /**\r\n                     * We also store the state of the host in failure cases. If the host, is\r\n                     * down it will remain down for the next 2 minutes. In a timeout situation,\r\n                     * this host will be added end of the list of hosts on the next request.\r\n                     */\r\n                    transporter.hostsCache.set(host, createStatefulHost(host, response.isTimedOut ? HostStatusEnum.Timeouted : HostStatusEnum.Down)),\r\n                ]).then(() => retry(hosts, getTimeout));\r\n            },\r\n            onFail(response) {\r\n                pushToStackTrace(response);\r\n                throw deserializeFailure(response, stackTraceWithoutCredentials(stackTrace));\r\n            },\r\n        };\r\n        return transporter.requester.send(payload).then(response => {\r\n            return retryDecision(response, decisions);\r\n        });\r\n    };\r\n    /**\r\n     * Finally, for each retryable host perform request until we got a non\r\n     * retryable response. Some notes here:\r\n     *\r\n     * 1. The reverse here is applied so we can apply a `pop` later on => more performant.\r\n     * 2. We also get from the retryable options a timeout multiplier that is tailored\r\n     * for the current context.\r\n     */\r\n    return createRetryableOptions(transporter.hostsCache, statelessHosts).then(options => {\r\n        return retry([...options.statelessHosts].reverse(), options.getTimeout);\r\n    });\r\n}\n\nfunction createTransporter(options) {\r\n    const { hostsCache, logger, requester, requestsCache, responsesCache, timeouts, userAgent, hosts, queryParameters, headers, } = options;\r\n    const transporter = {\r\n        hostsCache,\r\n        logger,\r\n        requester,\r\n        requestsCache,\r\n        responsesCache,\r\n        timeouts,\r\n        userAgent,\r\n        headers,\r\n        queryParameters,\r\n        hosts: hosts.map(host => createStatelessHost(host)),\r\n        read(request, requestOptions) {\r\n            /**\r\n             * First, we compute the user request options. Now, keep in mind,\r\n             * that using request options the user is able to modified the intire\r\n             * payload of the request. Such as headers, query parameters, and others.\r\n             */\r\n            const mappedRequestOptions = createMappedRequestOptions(requestOptions, transporter.timeouts.read);\r\n            const createRetryableRequest = () => {\r\n                /**\r\n                 * Then, we prepare a function factory that contains the construction of\r\n                 * the retryable request. At this point, we may *not* perform the actual\r\n                 * request. But we want to have the function factory ready.\r\n                 */\r\n                return retryableRequest(transporter, transporter.hosts.filter(host => (host.accept & CallEnum.Read) !== 0), request, mappedRequestOptions);\r\n            };\r\n            /**\r\n             * Once we have the function factory ready, we need to determine of the\r\n             * request is \"cacheable\" - should be cached. Note that, once again,\r\n             * the user can force this option.\r\n             */\r\n            const cacheable = mappedRequestOptions.cacheable !== undefined\r\n                ? mappedRequestOptions.cacheable\r\n                : request.cacheable;\r\n            /**\r\n             * If is not \"cacheable\", we immediatly trigger the retryable request, no\r\n             * need to check cache implementations.\r\n             */\r\n            if (cacheable !== true) {\r\n                return createRetryableRequest();\r\n            }\r\n            /**\r\n             * If the request is \"cacheable\", we need to first compute the key to ask\r\n             * the cache implementations if this request is on progress or if the\r\n             * response already exists on the cache.\r\n             */\r\n            const key = {\r\n                request,\r\n                mappedRequestOptions,\r\n                transporter: {\r\n                    queryParameters: transporter.queryParameters,\r\n                    headers: transporter.headers,\r\n                },\r\n            };\r\n            /**\r\n             * With the computed key, we first ask the responses cache\r\n             * implemention if this request was been resolved before.\r\n             */\r\n            return transporter.responsesCache.get(key, () => {\r\n                /**\r\n                 * If the request has never resolved before, we actually ask if there\r\n                 * is a current request with the same key on progress.\r\n                 */\r\n                return transporter.requestsCache.get(key, () => {\r\n                    return (transporter.requestsCache\r\n                        /**\r\n                         * Finally, if there is no request in progress with the same key,\r\n                         * this `createRetryableRequest()` will actually trigger the\r\n                         * retryable request.\r\n                         */\r\n                        .set(key, createRetryableRequest())\r\n                        .then(response => Promise.all([transporter.requestsCache.delete(key), response]), err => Promise.all([transporter.requestsCache.delete(key), Promise.reject(err)]))\r\n                        .then(([_, response]) => response));\r\n                });\r\n            }, {\r\n                /**\r\n                 * Of course, once we get this response back from the server, we\r\n                 * tell response cache to actually store the received response\r\n                 * to be used later.\r\n                 */\r\n                miss: response => transporter.responsesCache.set(key, response),\r\n            });\r\n        },\r\n        write(request, requestOptions) {\r\n            /**\r\n             * On write requests, no cache mechanisms are applied, and we\r\n             * proxy the request immediately to the requester.\r\n             */\r\n            return retryableRequest(transporter, transporter.hosts.filter(host => (host.accept & CallEnum.Write) !== 0), request, createMappedRequestOptions(requestOptions, transporter.timeouts.write));\r\n        },\r\n    };\r\n    return transporter;\r\n}\n\nfunction createUserAgent(version) {\r\n    const userAgent = {\r\n        value: `Algolia for JavaScript (${version})`,\r\n        add(options) {\r\n            const addedUserAgent = `; ${options.segment}${options.version !== undefined ? ` (${options.version})` : ''}`;\r\n            if (userAgent.value.indexOf(addedUserAgent) === -1) {\r\n                // eslint-disable-next-line functional/immutable-data\r\n                userAgent.value = `${userAgent.value}${addedUserAgent}`;\r\n            }\r\n            return userAgent;\r\n        },\r\n    };\r\n    return userAgent;\r\n}\n\nfunction deserializeSuccess(response) {\r\n    // eslint-disable-next-line functional/no-try-statement\r\n    try {\r\n        return JSON.parse(response.content);\r\n    }\r\n    catch (e) {\r\n        throw createDeserializationError(e.message, response);\r\n    }\r\n}\r\nfunction deserializeFailure({ content, status }, stackFrame) {\r\n    // eslint-disable-next-line functional/no-let\r\n    let message = content;\r\n    // eslint-disable-next-line functional/no-try-statement\r\n    try {\r\n        message = JSON.parse(content).message;\r\n    }\r\n    catch (e) {\r\n        // ..\r\n    }\r\n    return createApiError(message, status, stackFrame);\r\n}\n\n// eslint-disable-next-line functional/prefer-readonly-type\r\nfunction encode(format, ...args) {\r\n    // eslint-disable-next-line functional/no-let\r\n    let i = 0;\r\n    return format.replace(/%s/g, () => encodeURIComponent(args[i++]));\r\n}\n\nfunction serializeUrl(host, path, queryParameters) {\r\n    const queryParametersAsString = serializeQueryParameters(queryParameters);\r\n    // eslint-disable-next-line functional/no-let\r\n    let url = `${host.protocol}://${host.url}/${path.charAt(0) === '/' ? path.substr(1) : path}`;\r\n    if (queryParametersAsString.length) {\r\n        url += `?${queryParametersAsString}`;\r\n    }\r\n    return url;\r\n}\r\nfunction serializeQueryParameters(parameters) {\r\n    const isObjectOrArray = (value) => Object.prototype.toString.call(value) === '[object Object]' ||\r\n        Object.prototype.toString.call(value) === '[object Array]';\r\n    return Object.keys(parameters)\r\n        .map(key => encode('%s=%s', key, isObjectOrArray(parameters[key]) ? JSON.stringify(parameters[key]) : parameters[key]))\r\n        .join('&');\r\n}\r\nfunction serializeData(request, requestOptions) {\r\n    if (request.method === _algolia_requester_common__WEBPACK_IMPORTED_MODULE_0__.MethodEnum.Get ||\r\n        (request.data === undefined && requestOptions.data === undefined)) {\r\n        return undefined;\r\n    }\r\n    const data = Array.isArray(request.data)\r\n        ? request.data\r\n        : { ...request.data, ...requestOptions.data };\r\n    return JSON.stringify(data);\r\n}\r\nfunction serializeHeaders(transporter, requestOptions) {\r\n    const headers = {\r\n        ...transporter.headers,\r\n        ...requestOptions.headers,\r\n    };\r\n    const serializedHeaders = {};\r\n    Object.keys(headers).forEach(header => {\r\n        const value = headers[header];\r\n        // @ts-ignore\r\n        // eslint-disable-next-line functional/immutable-data\r\n        serializedHeaders[header.toLowerCase()] = value;\r\n    });\r\n    return serializedHeaders;\r\n}\n\nfunction stackTraceWithoutCredentials(stackTrace) {\r\n    return stackTrace.map(stackFrame => stackFrameWithoutCredentials(stackFrame));\r\n}\r\nfunction stackFrameWithoutCredentials(stackFrame) {\r\n    const modifiedHeaders = stackFrame.request.headers['x-algolia-api-key']\r\n        ? { 'x-algolia-api-key': '*****' }\r\n        : {};\r\n    return {\r\n        ...stackFrame,\r\n        request: {\r\n            ...stackFrame.request,\r\n            headers: {\r\n                ...stackFrame.request.headers,\r\n                ...modifiedHeaders,\r\n            },\r\n        },\r\n    };\r\n}\n\nfunction createApiError(message, status, transporterStackTrace) {\r\n    return {\r\n        name: 'ApiError',\r\n        message,\r\n        status,\r\n        transporterStackTrace,\r\n    };\r\n}\n\nfunction createDeserializationError(message, response) {\r\n    return {\r\n        name: 'DeserializationError',\r\n        message,\r\n        response,\r\n    };\r\n}\n\nfunction createRetryError(transporterStackTrace) {\r\n    return {\r\n        name: 'RetryError',\r\n        message: 'Unreachable hosts - your application id may be incorrect. If the error persists, please reach out to the Algolia Support team: https://alg.li/support .',\r\n        transporterStackTrace,\r\n    };\r\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFsZ29saWEvdHJhbnNwb3J0ZXIvZGlzdC90cmFuc3BvcnRlci5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXVEOztBQUV2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QyxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUEsMEJBQTBCLG9CQUFvQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixRQUFRO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsaUVBQVU7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBLFlBQVksc0hBQXNIO0FBQ2xJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMENBQTBDLFFBQVE7QUFDbEQ7QUFDQSxzQ0FBc0MsRUFBRSxnQkFBZ0IsRUFBRSxxQ0FBcUMsZ0JBQWdCLFFBQVE7QUFDdkg7QUFDQTtBQUNBLHFDQUFxQyxnQkFBZ0IsRUFBRSxlQUFlO0FBQ3RFO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixpQkFBaUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGNBQWMsS0FBSyxTQUFTLEdBQUcsK0NBQStDO0FBQy9GO0FBQ0EsbUJBQW1CLHdCQUF3QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlFQUFVO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFbWEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcGVjLWxvZ2ljLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0BhbGdvbGlhL3RyYW5zcG9ydGVyL2Rpc3QvdHJhbnNwb3J0ZXIuZXNtLmpzPzdmMmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWV0aG9kRW51bSB9IGZyb20gJ0BhbGdvbGlhL3JlcXVlc3Rlci1jb21tb24nO1xuXG5mdW5jdGlvbiBjcmVhdGVNYXBwZWRSZXF1ZXN0T3B0aW9ucyhyZXF1ZXN0T3B0aW9ucywgdGltZW91dCkge1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IHJlcXVlc3RPcHRpb25zIHx8IHt9O1xyXG4gICAgY29uc3QgZGF0YSA9IG9wdGlvbnMuZGF0YSB8fCB7fTtcclxuICAgIE9iamVjdC5rZXlzKG9wdGlvbnMpLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICBpZiAoWyd0aW1lb3V0JywgJ2hlYWRlcnMnLCAncXVlcnlQYXJhbWV0ZXJzJywgJ2RhdGEnLCAnY2FjaGVhYmxlJ10uaW5kZXhPZihrZXkpID09PSAtMSkge1xyXG4gICAgICAgICAgICBkYXRhW2tleV0gPSBvcHRpb25zW2tleV07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBkYXRhOiBPYmplY3QuZW50cmllcyhkYXRhKS5sZW5ndGggPiAwID8gZGF0YSA6IHVuZGVmaW5lZCxcclxuICAgICAgICB0aW1lb3V0OiBvcHRpb25zLnRpbWVvdXQgfHwgdGltZW91dCxcclxuICAgICAgICBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnMgfHwge30sXHJcbiAgICAgICAgcXVlcnlQYXJhbWV0ZXJzOiBvcHRpb25zLnF1ZXJ5UGFyYW1ldGVycyB8fCB7fSxcclxuICAgICAgICBjYWNoZWFibGU6IG9wdGlvbnMuY2FjaGVhYmxlLFxyXG4gICAgfTtcclxufVxuXG5jb25zdCBDYWxsRW51bSA9IHtcclxuICAgIC8qKlxyXG4gICAgICogSWYgdGhlIGhvc3QgaXMgcmVhZCBvbmx5LlxyXG4gICAgICovXHJcbiAgICBSZWFkOiAxLFxyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB0aGUgaG9zdCBpcyB3cml0ZSBvbmx5LlxyXG4gICAgICovXHJcbiAgICBXcml0ZTogMixcclxuICAgIC8qKlxyXG4gICAgICogSWYgdGhlIGhvc3QgaXMgYm90aCByZWFkIGFuZCB3cml0ZS5cclxuICAgICAqL1xyXG4gICAgQW55OiAzLFxyXG59O1xuXG5jb25zdCBIb3N0U3RhdHVzRW51bSA9IHtcclxuICAgIFVwOiAxLFxyXG4gICAgRG93bjogMixcclxuICAgIFRpbWVvdXRlZDogMyxcclxufTtcblxuLy8gQnkgZGVmYXVsdCwgQVBJIENsaWVudHMgYXQgQWxnb2xpYSBoYXZlIGV4cGlyYXRpb24gZGVsYXlcclxuLy8gb2YgNSBtaW5zLiBJbiB0aGUgSmF2YVNjcmlwdCBjbGllbnQsIHdlIGhhdmUgMiBtaW5zLlxyXG5jb25zdCBFWFBJUkFUSU9OX0RFTEFZID0gMiAqIDYwICogMTAwMDtcclxuZnVuY3Rpb24gY3JlYXRlU3RhdGVmdWxIb3N0KGhvc3QsIHN0YXR1cyA9IEhvc3RTdGF0dXNFbnVtLlVwKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIC4uLmhvc3QsXHJcbiAgICAgICAgc3RhdHVzLFxyXG4gICAgICAgIGxhc3RVcGRhdGU6IERhdGUubm93KCksXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGlzU3RhdGVmdWxIb3N0VXAoaG9zdCkge1xyXG4gICAgcmV0dXJuIGhvc3Quc3RhdHVzID09PSBIb3N0U3RhdHVzRW51bS5VcCB8fCBEYXRlLm5vdygpIC0gaG9zdC5sYXN0VXBkYXRlID4gRVhQSVJBVElPTl9ERUxBWTtcclxufVxyXG5mdW5jdGlvbiBpc1N0YXRlZnVsSG9zdFRpbWVvdXRlZChob3N0KSB7XHJcbiAgICByZXR1cm4gKGhvc3Quc3RhdHVzID09PSBIb3N0U3RhdHVzRW51bS5UaW1lb3V0ZWQgJiYgRGF0ZS5ub3coKSAtIGhvc3QubGFzdFVwZGF0ZSA8PSBFWFBJUkFUSU9OX0RFTEFZKTtcclxufVxuXG5mdW5jdGlvbiBjcmVhdGVTdGF0ZWxlc3NIb3N0KG9wdGlvbnMpIHtcclxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBwcm90b2NvbDogJ2h0dHBzJyxcclxuICAgICAgICAgICAgdXJsOiBvcHRpb25zLFxyXG4gICAgICAgICAgICBhY2NlcHQ6IENhbGxFbnVtLkFueSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBwcm90b2NvbDogb3B0aW9ucy5wcm90b2NvbCB8fCAnaHR0cHMnLFxyXG4gICAgICAgIHVybDogb3B0aW9ucy51cmwsXHJcbiAgICAgICAgYWNjZXB0OiBvcHRpb25zLmFjY2VwdCB8fCBDYWxsRW51bS5BbnksXHJcbiAgICB9O1xyXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVJldHJ5YWJsZU9wdGlvbnMoaG9zdHNDYWNoZSwgc3RhdGVsZXNzSG9zdHMpIHtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChzdGF0ZWxlc3NIb3N0cy5tYXAoc3RhdGVsZXNzSG9zdCA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGhvc3RzQ2FjaGUuZ2V0KHN0YXRlbGVzc0hvc3QsICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjcmVhdGVTdGF0ZWZ1bEhvc3Qoc3RhdGVsZXNzSG9zdCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSkpLnRoZW4oc3RhdGVmdWxIb3N0cyA9PiB7XHJcbiAgICAgICAgY29uc3QgaG9zdHNVcCA9IHN0YXRlZnVsSG9zdHMuZmlsdGVyKGhvc3QgPT4gaXNTdGF0ZWZ1bEhvc3RVcChob3N0KSk7XHJcbiAgICAgICAgY29uc3QgaG9zdHNUaW1lb3V0ZWQgPSBzdGF0ZWZ1bEhvc3RzLmZpbHRlcihob3N0ID0+IGlzU3RhdGVmdWxIb3N0VGltZW91dGVkKGhvc3QpKTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBOb3RlLCB3ZSBwdXQgdGhlIGhvc3RzIHRoYXQgcHJldmlvdXNseSB0aW1lb3V0ZWQgb24gdGhlIGVuZCBvZiB0aGUgbGlzdC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdCBob3N0c0F2YWlsYWJsZSA9IFsuLi5ob3N0c1VwLCAuLi5ob3N0c1RpbWVvdXRlZF07XHJcbiAgICAgICAgY29uc3Qgc3RhdGVsZXNzSG9zdHNBdmFpbGFibGUgPSBob3N0c0F2YWlsYWJsZS5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgID8gaG9zdHNBdmFpbGFibGUubWFwKGhvc3QgPT4gY3JlYXRlU3RhdGVsZXNzSG9zdChob3N0KSlcclxuICAgICAgICAgICAgOiBzdGF0ZWxlc3NIb3N0cztcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBnZXRUaW1lb3V0KHRpbWVvdXRzQ291bnQsIGJhc2VUaW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAqIEltYWdpbmUgdGhhdCB5b3UgaGF2ZSA0IGhvc3RzLCBpZiB0aW1lb3V0cyB3aWxsIGluY3JlYXNlXHJcbiAgICAgICAgICAgICAgICAgKiBvbiB0aGUgZm9sbG93aW5nIHdheTogMSAodGltZW91dGVkKSA+IDQgKHRpbWVvdXRlZCkgPiA1ICgyMDApXHJcbiAgICAgICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgICAgICogTm90ZSB0aGF0LCB0aGUgdmVyeSBuZXh0IHJlcXVlc3QsIHdlIHN0YXJ0IGZyb20gdGhlIHByZXZpb3VzIHRpbWVvdXRcclxuICAgICAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAgICAgKiAgNSAodGltZW91dGVkKSA+IDYgKHRpbWVvdXRlZCkgPiA3IC4uLlxyXG4gICAgICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICAgICAqIFRoaXMgc3RyYXRlZ3kgbWF5IG5lZWQgdG8gYmUgcmV2aWV3ZWQsIGJ1dCBpcyB0aGUgc3RyYXRlZ3kgb24gdGhlIG91clxyXG4gICAgICAgICAgICAgICAgICogY3VycmVudCB2MyB2ZXJzaW9uLlxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lb3V0TXVsdGlwbGllciA9IGhvc3RzVGltZW91dGVkLmxlbmd0aCA9PT0gMCAmJiB0aW1lb3V0c0NvdW50ID09PSAwXHJcbiAgICAgICAgICAgICAgICAgICAgPyAxXHJcbiAgICAgICAgICAgICAgICAgICAgOiBob3N0c1RpbWVvdXRlZC5sZW5ndGggKyAzICsgdGltZW91dHNDb3VudDtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aW1lb3V0TXVsdGlwbGllciAqIGJhc2VUaW1lb3V0O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdGF0ZWxlc3NIb3N0czogc3RhdGVsZXNzSG9zdHNBdmFpbGFibGUsXHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG59XG5cbmNvbnN0IGlzTmV0d29ya0Vycm9yID0gKHsgaXNUaW1lZE91dCwgc3RhdHVzIH0pID0+IHtcclxuICAgIHJldHVybiAhaXNUaW1lZE91dCAmJiB+fnN0YXR1cyA9PT0gMDtcclxufTtcclxuY29uc3QgaXNSZXRyeWFibGUgPSAocmVzcG9uc2UpID0+IHtcclxuICAgIGNvbnN0IHN0YXR1cyA9IHJlc3BvbnNlLnN0YXR1cztcclxuICAgIGNvbnN0IGlzVGltZWRPdXQgPSByZXNwb25zZS5pc1RpbWVkT3V0O1xyXG4gICAgcmV0dXJuIChpc1RpbWVkT3V0IHx8IGlzTmV0d29ya0Vycm9yKHJlc3BvbnNlKSB8fCAofn4oc3RhdHVzIC8gMTAwKSAhPT0gMiAmJiB+fihzdGF0dXMgLyAxMDApICE9PSA0KSk7XHJcbn07XHJcbmNvbnN0IGlzU3VjY2VzcyA9ICh7IHN0YXR1cyB9KSA9PiB7XHJcbiAgICByZXR1cm4gfn4oc3RhdHVzIC8gMTAwKSA9PT0gMjtcclxufTtcclxuY29uc3QgcmV0cnlEZWNpc2lvbiA9IChyZXNwb25zZSwgb3V0Y29tZXMpID0+IHtcclxuICAgIGlmIChpc1JldHJ5YWJsZShyZXNwb25zZSkpIHtcclxuICAgICAgICByZXR1cm4gb3V0Y29tZXMub25SZXRyeShyZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgICBpZiAoaXNTdWNjZXNzKHJlc3BvbnNlKSkge1xyXG4gICAgICAgIHJldHVybiBvdXRjb21lcy5vblN1Y2Nlc3MocmVzcG9uc2UpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dGNvbWVzLm9uRmFpbChyZXNwb25zZSk7XHJcbn07XG5cbmZ1bmN0aW9uIHJldHJ5YWJsZVJlcXVlc3QodHJhbnNwb3J0ZXIsIHN0YXRlbGVzc0hvc3RzLCByZXF1ZXN0LCByZXF1ZXN0T3B0aW9ucykge1xyXG4gICAgY29uc3Qgc3RhY2tUcmFjZSA9IFtdOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGZ1bmN0aW9uYWwvcHJlZmVyLXJlYWRvbmx5LXR5cGVcclxuICAgIC8qKlxyXG4gICAgICogRmlyc3Qgd2UgcHJlcGFyZSB0aGUgcGF5bG9hZCB0aGF0IGRvIG5vdCBkZXBlbmQgZnJvbSBob3N0cy5cclxuICAgICAqL1xyXG4gICAgY29uc3QgZGF0YSA9IHNlcmlhbGl6ZURhdGEocmVxdWVzdCwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgY29uc3QgaGVhZGVycyA9IHNlcmlhbGl6ZUhlYWRlcnModHJhbnNwb3J0ZXIsIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIGNvbnN0IG1ldGhvZCA9IHJlcXVlc3QubWV0aG9kO1xyXG4gICAgLy8gT24gYEdFVGAsIHRoZSBkYXRhIGlzIHByb3hpZWQgdG8gcXVlcnkgcGFyYW1ldGVycy5cclxuICAgIGNvbnN0IGRhdGFRdWVyeVBhcmFtZXRlcnMgPSByZXF1ZXN0Lm1ldGhvZCAhPT0gTWV0aG9kRW51bS5HZXRcclxuICAgICAgICA/IHt9XHJcbiAgICAgICAgOiB7XHJcbiAgICAgICAgICAgIC4uLnJlcXVlc3QuZGF0YSxcclxuICAgICAgICAgICAgLi4ucmVxdWVzdE9wdGlvbnMuZGF0YSxcclxuICAgICAgICB9O1xyXG4gICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge1xyXG4gICAgICAgICd4LWFsZ29saWEtYWdlbnQnOiB0cmFuc3BvcnRlci51c2VyQWdlbnQudmFsdWUsXHJcbiAgICAgICAgLi4udHJhbnNwb3J0ZXIucXVlcnlQYXJhbWV0ZXJzLFxyXG4gICAgICAgIC4uLmRhdGFRdWVyeVBhcmFtZXRlcnMsXHJcbiAgICAgICAgLi4ucmVxdWVzdE9wdGlvbnMucXVlcnlQYXJhbWV0ZXJzLFxyXG4gICAgfTtcclxuICAgIGxldCB0aW1lb3V0c0NvdW50ID0gMDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBmdW5jdGlvbmFsL25vLWxldFxyXG4gICAgY29uc3QgcmV0cnkgPSAoaG9zdHMsIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9wcmVmZXItcmVhZG9ubHktdHlwZVxyXG4gICAgZ2V0VGltZW91dCkgPT4ge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFdlIGl0ZXJhdGUgb24gZWFjaCBob3N0LCB1bnRpbCB0aGVyZSBpcyBubyBob3N0IGxlZnQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3QgaG9zdCA9IGhvc3RzLnBvcCgpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICBpZiAoaG9zdCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZVJldHJ5RXJyb3Ioc3RhY2tUcmFjZVdpdGhvdXRDcmVkZW50aWFscyhzdGFja1RyYWNlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSB7XHJcbiAgICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgICAgIGhlYWRlcnMsXHJcbiAgICAgICAgICAgIG1ldGhvZCxcclxuICAgICAgICAgICAgdXJsOiBzZXJpYWxpemVVcmwoaG9zdCwgcmVxdWVzdC5wYXRoLCBxdWVyeVBhcmFtZXRlcnMpLFxyXG4gICAgICAgICAgICBjb25uZWN0VGltZW91dDogZ2V0VGltZW91dCh0aW1lb3V0c0NvdW50LCB0cmFuc3BvcnRlci50aW1lb3V0cy5jb25uZWN0KSxcclxuICAgICAgICAgICAgcmVzcG9uc2VUaW1lb3V0OiBnZXRUaW1lb3V0KHRpbWVvdXRzQ291bnQsIHJlcXVlc3RPcHRpb25zLnRpbWVvdXQpLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIHN0YWNrRnJhbWUgaXMgcHVzaGVkIHRvIHRoZSBzdGFja1RyYWNlIHNvIHdlXHJcbiAgICAgICAgICogY2FuIGhhdmUgaW5mb3JtYXRpb24gYWJvdXQgb25SZXRyeSBhbmQgb25GYWlsdXJlXHJcbiAgICAgICAgICogZGVjaXNpb25zLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0IHB1c2hUb1N0YWNrVHJhY2UgPSAocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc3RhY2tGcmFtZSA9IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3Q6IHBheWxvYWQsXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZSxcclxuICAgICAgICAgICAgICAgIGhvc3QsXHJcbiAgICAgICAgICAgICAgICB0cmllc0xlZnQ6IGhvc3RzLmxlbmd0aCxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICAgICAgc3RhY2tUcmFjZS5wdXNoKHN0YWNrRnJhbWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gc3RhY2tGcmFtZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IGRlY2lzaW9ucyA9IHtcclxuICAgICAgICAgICAgb25TdWNjZXNzOiByZXNwb25zZSA9PiBkZXNlcmlhbGl6ZVN1Y2Nlc3MocmVzcG9uc2UpLFxyXG4gICAgICAgICAgICBvblJldHJ5KHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFja0ZyYW1lID0gcHVzaFRvU3RhY2tUcmFjZShyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAqIElmIHJlc3BvbnNlIGlzIGEgdGltZW91dCwgd2UgaW5jcmVhc2V0IHRoZSBudW1iZXIgb2ZcclxuICAgICAgICAgICAgICAgICAqIHRpbWVvdXRzIHNvIHdlIGNhbiBpbmNyZWFzZSB0aGUgdGltZW91dCBsYXRlci5cclxuICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmlzVGltZWRPdXQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0c0NvdW50Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICAgICAqIEZhaWx1cmVzIGFyZSBpbmRpdmlkdWFsbHkgc2VuZCB0aGUgbG9nZ2VyLCBhbGxvd2luZ1xyXG4gICAgICAgICAgICAgICAgICAgICAqIHRoZSBlbmQgdXNlciB0byBkZWJ1ZyAvIHN0b3JlIHN0YWNrIGZyYW1lcyBldmVuXHJcbiAgICAgICAgICAgICAgICAgICAgICogd2hlbiBhIHJldHJ5IGVycm9yIGRvZXMgbm90IGhhcHBlbi5cclxuICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnRlci5sb2dnZXIuaW5mbygnUmV0cnlhYmxlIGZhaWx1cmUnLCBzdGFja0ZyYW1lV2l0aG91dENyZWRlbnRpYWxzKHN0YWNrRnJhbWUpKSxcclxuICAgICAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAgICAgKiBXZSBhbHNvIHN0b3JlIHRoZSBzdGF0ZSBvZiB0aGUgaG9zdCBpbiBmYWlsdXJlIGNhc2VzLiBJZiB0aGUgaG9zdCwgaXNcclxuICAgICAgICAgICAgICAgICAgICAgKiBkb3duIGl0IHdpbGwgcmVtYWluIGRvd24gZm9yIHRoZSBuZXh0IDIgbWludXRlcy4gSW4gYSB0aW1lb3V0IHNpdHVhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgKiB0aGlzIGhvc3Qgd2lsbCBiZSBhZGRlZCBlbmQgb2YgdGhlIGxpc3Qgb2YgaG9zdHMgb24gdGhlIG5leHQgcmVxdWVzdC5cclxuICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnRlci5ob3N0c0NhY2hlLnNldChob3N0LCBjcmVhdGVTdGF0ZWZ1bEhvc3QoaG9zdCwgcmVzcG9uc2UuaXNUaW1lZE91dCA/IEhvc3RTdGF0dXNFbnVtLlRpbWVvdXRlZCA6IEhvc3RTdGF0dXNFbnVtLkRvd24pKSxcclxuICAgICAgICAgICAgICAgIF0pLnRoZW4oKCkgPT4gcmV0cnkoaG9zdHMsIGdldFRpbWVvdXQpKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25GYWlsKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBwdXNoVG9TdGFja1RyYWNlKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIHRocm93IGRlc2VyaWFsaXplRmFpbHVyZShyZXNwb25zZSwgc3RhY2tUcmFjZVdpdGhvdXRDcmVkZW50aWFscyhzdGFja1RyYWNlKSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdHJhbnNwb3J0ZXIucmVxdWVzdGVyLnNlbmQocGF5bG9hZCkudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXRyeURlY2lzaW9uKHJlc3BvbnNlLCBkZWNpc2lvbnMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRmluYWxseSwgZm9yIGVhY2ggcmV0cnlhYmxlIGhvc3QgcGVyZm9ybSByZXF1ZXN0IHVudGlsIHdlIGdvdCBhIG5vblxyXG4gICAgICogcmV0cnlhYmxlIHJlc3BvbnNlLiBTb21lIG5vdGVzIGhlcmU6XHJcbiAgICAgKlxyXG4gICAgICogMS4gVGhlIHJldmVyc2UgaGVyZSBpcyBhcHBsaWVkIHNvIHdlIGNhbiBhcHBseSBhIGBwb3BgIGxhdGVyIG9uID0+IG1vcmUgcGVyZm9ybWFudC5cclxuICAgICAqIDIuIFdlIGFsc28gZ2V0IGZyb20gdGhlIHJldHJ5YWJsZSBvcHRpb25zIGEgdGltZW91dCBtdWx0aXBsaWVyIHRoYXQgaXMgdGFpbG9yZWRcclxuICAgICAqIGZvciB0aGUgY3VycmVudCBjb250ZXh0LlxyXG4gICAgICovXHJcbiAgICByZXR1cm4gY3JlYXRlUmV0cnlhYmxlT3B0aW9ucyh0cmFuc3BvcnRlci5ob3N0c0NhY2hlLCBzdGF0ZWxlc3NIb3N0cykudGhlbihvcHRpb25zID0+IHtcclxuICAgICAgICByZXR1cm4gcmV0cnkoWy4uLm9wdGlvbnMuc3RhdGVsZXNzSG9zdHNdLnJldmVyc2UoKSwgb3B0aW9ucy5nZXRUaW1lb3V0KTtcclxuICAgIH0pO1xyXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRyYW5zcG9ydGVyKG9wdGlvbnMpIHtcclxuICAgIGNvbnN0IHsgaG9zdHNDYWNoZSwgbG9nZ2VyLCByZXF1ZXN0ZXIsIHJlcXVlc3RzQ2FjaGUsIHJlc3BvbnNlc0NhY2hlLCB0aW1lb3V0cywgdXNlckFnZW50LCBob3N0cywgcXVlcnlQYXJhbWV0ZXJzLCBoZWFkZXJzLCB9ID0gb3B0aW9ucztcclxuICAgIGNvbnN0IHRyYW5zcG9ydGVyID0ge1xyXG4gICAgICAgIGhvc3RzQ2FjaGUsXHJcbiAgICAgICAgbG9nZ2VyLFxyXG4gICAgICAgIHJlcXVlc3RlcixcclxuICAgICAgICByZXF1ZXN0c0NhY2hlLFxyXG4gICAgICAgIHJlc3BvbnNlc0NhY2hlLFxyXG4gICAgICAgIHRpbWVvdXRzLFxyXG4gICAgICAgIHVzZXJBZ2VudCxcclxuICAgICAgICBoZWFkZXJzLFxyXG4gICAgICAgIHF1ZXJ5UGFyYW1ldGVycyxcclxuICAgICAgICBob3N0czogaG9zdHMubWFwKGhvc3QgPT4gY3JlYXRlU3RhdGVsZXNzSG9zdChob3N0KSksXHJcbiAgICAgICAgcmVhZChyZXF1ZXN0LCByZXF1ZXN0T3B0aW9ucykge1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRmlyc3QsIHdlIGNvbXB1dGUgdGhlIHVzZXIgcmVxdWVzdCBvcHRpb25zLiBOb3csIGtlZXAgaW4gbWluZCxcclxuICAgICAgICAgICAgICogdGhhdCB1c2luZyByZXF1ZXN0IG9wdGlvbnMgdGhlIHVzZXIgaXMgYWJsZSB0byBtb2RpZmllZCB0aGUgaW50aXJlXHJcbiAgICAgICAgICAgICAqIHBheWxvYWQgb2YgdGhlIHJlcXVlc3QuIFN1Y2ggYXMgaGVhZGVycywgcXVlcnkgcGFyYW1ldGVycywgYW5kIG90aGVycy5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNvbnN0IG1hcHBlZFJlcXVlc3RPcHRpb25zID0gY3JlYXRlTWFwcGVkUmVxdWVzdE9wdGlvbnMocmVxdWVzdE9wdGlvbnMsIHRyYW5zcG9ydGVyLnRpbWVvdXRzLnJlYWQpO1xyXG4gICAgICAgICAgICBjb25zdCBjcmVhdGVSZXRyeWFibGVSZXF1ZXN0ID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgKiBUaGVuLCB3ZSBwcmVwYXJlIGEgZnVuY3Rpb24gZmFjdG9yeSB0aGF0IGNvbnRhaW5zIHRoZSBjb25zdHJ1Y3Rpb24gb2ZcclxuICAgICAgICAgICAgICAgICAqIHRoZSByZXRyeWFibGUgcmVxdWVzdC4gQXQgdGhpcyBwb2ludCwgd2UgbWF5ICpub3QqIHBlcmZvcm0gdGhlIGFjdHVhbFxyXG4gICAgICAgICAgICAgICAgICogcmVxdWVzdC4gQnV0IHdlIHdhbnQgdG8gaGF2ZSB0aGUgZnVuY3Rpb24gZmFjdG9yeSByZWFkeS5cclxuICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldHJ5YWJsZVJlcXVlc3QodHJhbnNwb3J0ZXIsIHRyYW5zcG9ydGVyLmhvc3RzLmZpbHRlcihob3N0ID0+IChob3N0LmFjY2VwdCAmIENhbGxFbnVtLlJlYWQpICE9PSAwKSwgcmVxdWVzdCwgbWFwcGVkUmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogT25jZSB3ZSBoYXZlIHRoZSBmdW5jdGlvbiBmYWN0b3J5IHJlYWR5LCB3ZSBuZWVkIHRvIGRldGVybWluZSBvZiB0aGVcclxuICAgICAgICAgICAgICogcmVxdWVzdCBpcyBcImNhY2hlYWJsZVwiIC0gc2hvdWxkIGJlIGNhY2hlZC4gTm90ZSB0aGF0LCBvbmNlIGFnYWluLFxyXG4gICAgICAgICAgICAgKiB0aGUgdXNlciBjYW4gZm9yY2UgdGhpcyBvcHRpb24uXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBjb25zdCBjYWNoZWFibGUgPSBtYXBwZWRSZXF1ZXN0T3B0aW9ucy5jYWNoZWFibGUgIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgPyBtYXBwZWRSZXF1ZXN0T3B0aW9ucy5jYWNoZWFibGVcclxuICAgICAgICAgICAgICAgIDogcmVxdWVzdC5jYWNoZWFibGU7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBJZiBpcyBub3QgXCJjYWNoZWFibGVcIiwgd2UgaW1tZWRpYXRseSB0cmlnZ2VyIHRoZSByZXRyeWFibGUgcmVxdWVzdCwgbm9cclxuICAgICAgICAgICAgICogbmVlZCB0byBjaGVjayBjYWNoZSBpbXBsZW1lbnRhdGlvbnMuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAoY2FjaGVhYmxlICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlUmV0cnlhYmxlUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBJZiB0aGUgcmVxdWVzdCBpcyBcImNhY2hlYWJsZVwiLCB3ZSBuZWVkIHRvIGZpcnN0IGNvbXB1dGUgdGhlIGtleSB0byBhc2tcclxuICAgICAgICAgICAgICogdGhlIGNhY2hlIGltcGxlbWVudGF0aW9ucyBpZiB0aGlzIHJlcXVlc3QgaXMgb24gcHJvZ3Jlc3Mgb3IgaWYgdGhlXHJcbiAgICAgICAgICAgICAqIHJlc3BvbnNlIGFscmVhZHkgZXhpc3RzIG9uIHRoZSBjYWNoZS5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3QsXHJcbiAgICAgICAgICAgICAgICBtYXBwZWRSZXF1ZXN0T3B0aW9ucyxcclxuICAgICAgICAgICAgICAgIHRyYW5zcG9ydGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzOiB0cmFuc3BvcnRlci5xdWVyeVBhcmFtZXRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdHJhbnNwb3J0ZXIuaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBXaXRoIHRoZSBjb21wdXRlZCBrZXksIHdlIGZpcnN0IGFzayB0aGUgcmVzcG9uc2VzIGNhY2hlXHJcbiAgICAgICAgICAgICAqIGltcGxlbWVudGlvbiBpZiB0aGlzIHJlcXVlc3Qgd2FzIGJlZW4gcmVzb2x2ZWQgYmVmb3JlLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgcmV0dXJuIHRyYW5zcG9ydGVyLnJlc3BvbnNlc0NhY2hlLmdldChrZXksICgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICogSWYgdGhlIHJlcXVlc3QgaGFzIG5ldmVyIHJlc29sdmVkIGJlZm9yZSwgd2UgYWN0dWFsbHkgYXNrIGlmIHRoZXJlXHJcbiAgICAgICAgICAgICAgICAgKiBpcyBhIGN1cnJlbnQgcmVxdWVzdCB3aXRoIHRoZSBzYW1lIGtleSBvbiBwcm9ncmVzcy5cclxuICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zcG9ydGVyLnJlcXVlc3RzQ2FjaGUuZ2V0KGtleSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAodHJhbnNwb3J0ZXIucmVxdWVzdHNDYWNoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICogRmluYWxseSwgaWYgdGhlcmUgaXMgbm8gcmVxdWVzdCBpbiBwcm9ncmVzcyB3aXRoIHRoZSBzYW1lIGtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICogdGhpcyBgY3JlYXRlUmV0cnlhYmxlUmVxdWVzdCgpYCB3aWxsIGFjdHVhbGx5IHRyaWdnZXIgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIHJldHJ5YWJsZSByZXF1ZXN0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldChrZXksIGNyZWF0ZVJldHJ5YWJsZVJlcXVlc3QoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gUHJvbWlzZS5hbGwoW3RyYW5zcG9ydGVyLnJlcXVlc3RzQ2FjaGUuZGVsZXRlKGtleSksIHJlc3BvbnNlXSksIGVyciA9PiBQcm9taXNlLmFsbChbdHJhbnNwb3J0ZXIucmVxdWVzdHNDYWNoZS5kZWxldGUoa2V5KSwgUHJvbWlzZS5yZWplY3QoZXJyKV0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoW18sIHJlc3BvbnNlXSkgPT4gcmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAqIE9mIGNvdXJzZSwgb25jZSB3ZSBnZXQgdGhpcyByZXNwb25zZSBiYWNrIGZyb20gdGhlIHNlcnZlciwgd2VcclxuICAgICAgICAgICAgICAgICAqIHRlbGwgcmVzcG9uc2UgY2FjaGUgdG8gYWN0dWFsbHkgc3RvcmUgdGhlIHJlY2VpdmVkIHJlc3BvbnNlXHJcbiAgICAgICAgICAgICAgICAgKiB0byBiZSB1c2VkIGxhdGVyLlxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICBtaXNzOiByZXNwb25zZSA9PiB0cmFuc3BvcnRlci5yZXNwb25zZXNDYWNoZS5zZXQoa2V5LCByZXNwb25zZSksXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgd3JpdGUocmVxdWVzdCwgcmVxdWVzdE9wdGlvbnMpIHtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIE9uIHdyaXRlIHJlcXVlc3RzLCBubyBjYWNoZSBtZWNoYW5pc21zIGFyZSBhcHBsaWVkLCBhbmQgd2VcclxuICAgICAgICAgICAgICogcHJveHkgdGhlIHJlcXVlc3QgaW1tZWRpYXRlbHkgdG8gdGhlIHJlcXVlc3Rlci5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHJldHVybiByZXRyeWFibGVSZXF1ZXN0KHRyYW5zcG9ydGVyLCB0cmFuc3BvcnRlci5ob3N0cy5maWx0ZXIoaG9zdCA9PiAoaG9zdC5hY2NlcHQgJiBDYWxsRW51bS5Xcml0ZSkgIT09IDApLCByZXF1ZXN0LCBjcmVhdGVNYXBwZWRSZXF1ZXN0T3B0aW9ucyhyZXF1ZXN0T3B0aW9ucywgdHJhbnNwb3J0ZXIudGltZW91dHMud3JpdGUpKTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxuICAgIHJldHVybiB0cmFuc3BvcnRlcjtcclxufVxuXG5mdW5jdGlvbiBjcmVhdGVVc2VyQWdlbnQodmVyc2lvbikge1xyXG4gICAgY29uc3QgdXNlckFnZW50ID0ge1xyXG4gICAgICAgIHZhbHVlOiBgQWxnb2xpYSBmb3IgSmF2YVNjcmlwdCAoJHt2ZXJzaW9ufSlgLFxyXG4gICAgICAgIGFkZChvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFkZGVkVXNlckFnZW50ID0gYDsgJHtvcHRpb25zLnNlZ21lbnR9JHtvcHRpb25zLnZlcnNpb24gIT09IHVuZGVmaW5lZCA/IGAgKCR7b3B0aW9ucy52ZXJzaW9ufSlgIDogJyd9YDtcclxuICAgICAgICAgICAgaWYgKHVzZXJBZ2VudC52YWx1ZS5pbmRleE9mKGFkZGVkVXNlckFnZW50KSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgICAgICAgICB1c2VyQWdlbnQudmFsdWUgPSBgJHt1c2VyQWdlbnQudmFsdWV9JHthZGRlZFVzZXJBZ2VudH1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB1c2VyQWdlbnQ7XHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbiAgICByZXR1cm4gdXNlckFnZW50O1xyXG59XG5cbmZ1bmN0aW9uIGRlc2VyaWFsaXplU3VjY2VzcyhyZXNwb25zZSkge1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvbm8tdHJ5LXN0YXRlbWVudFxyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShyZXNwb25zZS5jb250ZW50KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgdGhyb3cgY3JlYXRlRGVzZXJpYWxpemF0aW9uRXJyb3IoZS5tZXNzYWdlLCByZXNwb25zZSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZGVzZXJpYWxpemVGYWlsdXJlKHsgY29udGVudCwgc3RhdHVzIH0sIHN0YWNrRnJhbWUpIHtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL25vLWxldFxyXG4gICAgbGV0IG1lc3NhZ2UgPSBjb250ZW50O1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvbm8tdHJ5LXN0YXRlbWVudFxyXG4gICAgdHJ5IHtcclxuICAgICAgICBtZXNzYWdlID0gSlNPTi5wYXJzZShjb250ZW50KS5tZXNzYWdlO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyAuLlxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNyZWF0ZUFwaUVycm9yKG1lc3NhZ2UsIHN0YXR1cywgc3RhY2tGcmFtZSk7XHJcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvcHJlZmVyLXJlYWRvbmx5LXR5cGVcclxuZnVuY3Rpb24gZW5jb2RlKGZvcm1hdCwgLi4uYXJncykge1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvbm8tbGV0XHJcbiAgICBsZXQgaSA9IDA7XHJcbiAgICByZXR1cm4gZm9ybWF0LnJlcGxhY2UoLyVzL2csICgpID0+IGVuY29kZVVSSUNvbXBvbmVudChhcmdzW2krK10pKTtcclxufVxuXG5mdW5jdGlvbiBzZXJpYWxpemVVcmwoaG9zdCwgcGF0aCwgcXVlcnlQYXJhbWV0ZXJzKSB7XHJcbiAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnNBc1N0cmluZyA9IHNlcmlhbGl6ZVF1ZXJ5UGFyYW1ldGVycyhxdWVyeVBhcmFtZXRlcnMpO1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvbm8tbGV0XHJcbiAgICBsZXQgdXJsID0gYCR7aG9zdC5wcm90b2NvbH06Ly8ke2hvc3QudXJsfS8ke3BhdGguY2hhckF0KDApID09PSAnLycgPyBwYXRoLnN1YnN0cigxKSA6IHBhdGh9YDtcclxuICAgIGlmIChxdWVyeVBhcmFtZXRlcnNBc1N0cmluZy5sZW5ndGgpIHtcclxuICAgICAgICB1cmwgKz0gYD8ke3F1ZXJ5UGFyYW1ldGVyc0FzU3RyaW5nfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdXJsO1xyXG59XHJcbmZ1bmN0aW9uIHNlcmlhbGl6ZVF1ZXJ5UGFyYW1ldGVycyhwYXJhbWV0ZXJzKSB7XHJcbiAgICBjb25zdCBpc09iamVjdE9yQXJyYXkgPSAodmFsdWUpID0+IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IE9iamVjdF0nIHx8XHJcbiAgICAgICAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcclxuICAgIHJldHVybiBPYmplY3Qua2V5cyhwYXJhbWV0ZXJzKVxyXG4gICAgICAgIC5tYXAoa2V5ID0+IGVuY29kZSgnJXM9JXMnLCBrZXksIGlzT2JqZWN0T3JBcnJheShwYXJhbWV0ZXJzW2tleV0pID8gSlNPTi5zdHJpbmdpZnkocGFyYW1ldGVyc1trZXldKSA6IHBhcmFtZXRlcnNba2V5XSkpXHJcbiAgICAgICAgLmpvaW4oJyYnKTtcclxufVxyXG5mdW5jdGlvbiBzZXJpYWxpemVEYXRhKHJlcXVlc3QsIHJlcXVlc3RPcHRpb25zKSB7XHJcbiAgICBpZiAocmVxdWVzdC5tZXRob2QgPT09IE1ldGhvZEVudW0uR2V0IHx8XHJcbiAgICAgICAgKHJlcXVlc3QuZGF0YSA9PT0gdW5kZWZpbmVkICYmIHJlcXVlc3RPcHRpb25zLmRhdGEgPT09IHVuZGVmaW5lZCkpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGF0YSA9IEFycmF5LmlzQXJyYXkocmVxdWVzdC5kYXRhKVxyXG4gICAgICAgID8gcmVxdWVzdC5kYXRhXHJcbiAgICAgICAgOiB7IC4uLnJlcXVlc3QuZGF0YSwgLi4ucmVxdWVzdE9wdGlvbnMuZGF0YSB9O1xyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG59XHJcbmZ1bmN0aW9uIHNlcmlhbGl6ZUhlYWRlcnModHJhbnNwb3J0ZXIsIHJlcXVlc3RPcHRpb25zKSB7XHJcbiAgICBjb25zdCBoZWFkZXJzID0ge1xyXG4gICAgICAgIC4uLnRyYW5zcG9ydGVyLmhlYWRlcnMsXHJcbiAgICAgICAgLi4ucmVxdWVzdE9wdGlvbnMuaGVhZGVycyxcclxuICAgIH07XHJcbiAgICBjb25zdCBzZXJpYWxpemVkSGVhZGVycyA9IHt9O1xyXG4gICAgT2JqZWN0LmtleXMoaGVhZGVycykuZm9yRWFjaChoZWFkZXIgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gaGVhZGVyc1toZWFkZXJdO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgIHNlcmlhbGl6ZWRIZWFkZXJzW2hlYWRlci50b0xvd2VyQ2FzZSgpXSA9IHZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gc2VyaWFsaXplZEhlYWRlcnM7XHJcbn1cblxuZnVuY3Rpb24gc3RhY2tUcmFjZVdpdGhvdXRDcmVkZW50aWFscyhzdGFja1RyYWNlKSB7XHJcbiAgICByZXR1cm4gc3RhY2tUcmFjZS5tYXAoc3RhY2tGcmFtZSA9PiBzdGFja0ZyYW1lV2l0aG91dENyZWRlbnRpYWxzKHN0YWNrRnJhbWUpKTtcclxufVxyXG5mdW5jdGlvbiBzdGFja0ZyYW1lV2l0aG91dENyZWRlbnRpYWxzKHN0YWNrRnJhbWUpIHtcclxuICAgIGNvbnN0IG1vZGlmaWVkSGVhZGVycyA9IHN0YWNrRnJhbWUucmVxdWVzdC5oZWFkZXJzWyd4LWFsZ29saWEtYXBpLWtleSddXHJcbiAgICAgICAgPyB7ICd4LWFsZ29saWEtYXBpLWtleSc6ICcqKioqKicgfVxyXG4gICAgICAgIDoge307XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIC4uLnN0YWNrRnJhbWUsXHJcbiAgICAgICAgcmVxdWVzdDoge1xyXG4gICAgICAgICAgICAuLi5zdGFja0ZyYW1lLnJlcXVlc3QsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIC4uLnN0YWNrRnJhbWUucmVxdWVzdC5oZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgLi4ubW9kaWZpZWRIZWFkZXJzLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFwaUVycm9yKG1lc3NhZ2UsIHN0YXR1cywgdHJhbnNwb3J0ZXJTdGFja1RyYWNlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5hbWU6ICdBcGlFcnJvcicsXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICBzdGF0dXMsXHJcbiAgICAgICAgdHJhbnNwb3J0ZXJTdGFja1RyYWNlLFxyXG4gICAgfTtcclxufVxuXG5mdW5jdGlvbiBjcmVhdGVEZXNlcmlhbGl6YXRpb25FcnJvcihtZXNzYWdlLCByZXNwb25zZSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiAnRGVzZXJpYWxpemF0aW9uRXJyb3InLFxyXG4gICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgcmVzcG9uc2UsXHJcbiAgICB9O1xyXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVJldHJ5RXJyb3IodHJhbnNwb3J0ZXJTdGFja1RyYWNlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5hbWU6ICdSZXRyeUVycm9yJyxcclxuICAgICAgICBtZXNzYWdlOiAnVW5yZWFjaGFibGUgaG9zdHMgLSB5b3VyIGFwcGxpY2F0aW9uIGlkIG1heSBiZSBpbmNvcnJlY3QuIElmIHRoZSBlcnJvciBwZXJzaXN0cywgcGxlYXNlIHJlYWNoIG91dCB0byB0aGUgQWxnb2xpYSBTdXBwb3J0IHRlYW06IGh0dHBzOi8vYWxnLmxpL3N1cHBvcnQgLicsXHJcbiAgICAgICAgdHJhbnNwb3J0ZXJTdGFja1RyYWNlLFxyXG4gICAgfTtcclxufVxuXG5leHBvcnQgeyBDYWxsRW51bSwgSG9zdFN0YXR1c0VudW0sIGNyZWF0ZUFwaUVycm9yLCBjcmVhdGVEZXNlcmlhbGl6YXRpb25FcnJvciwgY3JlYXRlTWFwcGVkUmVxdWVzdE9wdGlvbnMsIGNyZWF0ZVJldHJ5RXJyb3IsIGNyZWF0ZVN0YXRlZnVsSG9zdCwgY3JlYXRlU3RhdGVsZXNzSG9zdCwgY3JlYXRlVHJhbnNwb3J0ZXIsIGNyZWF0ZVVzZXJBZ2VudCwgZGVzZXJpYWxpemVGYWlsdXJlLCBkZXNlcmlhbGl6ZVN1Y2Nlc3MsIGlzU3RhdGVmdWxIb3N0VGltZW91dGVkLCBpc1N0YXRlZnVsSG9zdFVwLCBzZXJpYWxpemVEYXRhLCBzZXJpYWxpemVIZWFkZXJzLCBzZXJpYWxpemVRdWVyeVBhcmFtZXRlcnMsIHNlcmlhbGl6ZVVybCwgc3RhY2tGcmFtZVdpdGhvdXRDcmVkZW50aWFscywgc3RhY2tUcmFjZVdpdGhvdXRDcmVkZW50aWFscyB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@algolia/transporter/dist/transporter.esm.js\n");

/***/ })

};
;